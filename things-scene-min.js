!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.scene=e():t.scene=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=90)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=C(n(94)),i=C(n(153)),a=T(n(20)),u=T(n(27)),s=T(n(190)),c=C(n(198)),l=T(n(3)),f=n(1),h=T(n(73)),p=C(n(74)),d=n(72),y=C(n(200)),v=n(75),g=n(201),b=n(202),m=C(n(203)),_=C(n(204)),w=C(n(205)),x=C(n(206)),k=n(207),O=C(n(208)),P=C(n(209)),A=n(77),E=n(210),j=n(214),M=C(n(35)),S=C(n(216));function T(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function C(t){return t&&t.__esModule?t:{default:t}}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I={},B={mutable:!1,resizable:!0,rotatable:!0,properties:[],"value-property":"text",sample:{xx:0}},L=[],D={theta:0,tx:0,ty:0,sx:1,sy:1,fade:0},F=new WeakMap,Y=0,N=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._app=n,this._model=e||{},this._state={},this._delta=l.clone(D),n&&this.animation&&(this.animation.started=!0),this.clearCache(),S.default.add(this),F.set(this,Y++)}return r(t,null,[{key:"buildSample",value:function(t,e){var n=this.register(t);if(n){var r=n.nature.sample||{};return Object.assign({type:t},r,e)}console.error("Class not registered.",t)}},{key:"register",value:function(t,e){if(!e)return I[t];I[t]=e}},{key:"nature",get:function(){return B}},{key:"residents",get:function(){return F}}]),r(t,[{key:"created",value:function(){}},{key:"added",value:function(t){}},{key:"removed",value:function(t){}},{key:"ready",value:function(){}},{key:"touch",value:function(){this.updatedAt=performance.now()}},{key:"clearCache",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];h.clear.apply(h,[this].concat(e))}},{key:"removeSelf",value:function(t){t?this.dispose():this.parent&&this.parent.removeComponent(this)}},{key:"dispose",value:function(){this._animation&&(this._animation.dispose(),delete this._animation),this.disposeMappings(),this.parent&&this.parent.removeComponent(this),delete this._text_substitutor,delete this._value_substitutor,this._disposed=!0,this.retention&&S.default.touch(),this.clearCache(),delete this._app}},{key:"isLayer",value:function(){return!1}},{key:"isGroup",value:function(){return!1}},{key:"isContainer",value:function(){return!1}},{key:"isLine",value:function(){return!1}},{key:"isRoot",value:function(){return!1}},{key:"isRootModel",value:function(){return!1}},{key:"is3dish",value:function(){return!1}},{key:"isTemplate",value:function(){return!!this.get("templatePrefix")}},{key:"isHTMLElement",value:function(){return!1}},{key:"get",value:function(t){return this._model[t]}},{key:"set",value:function(t,e){if("string"==typeof t)return this.set(R({},t,e));var n={},r={},i=!1,a=(t=l.clone(t),this);return Object.getOwnPropertyNames(t).forEach(function(e){var u=a._model[e],s=t[e];(0,o.default)(u,s)||(r[e]=u,n[e]=s,a._model[e]=s,delete a._state[e],i=!0)}),i&&(this.clearCache(),n.hasOwnProperty("text")&&delete this._text_substitutor,n.hasOwnProperty("retention")&&S.default.add(this),n.hasOwnProperty("fillStyle")&&this.onchangeFill(n,r),n.hasOwnProperty("mappings")&&this.onchangeMappings(n,r),n.hasOwnProperty("data")&&this.onchangeData(n,r),this.onchange&&this.onchange(n,r),this.trigger("change",n,r)),this}},{key:"getState",value:function(t){return this._state.hasOwnProperty(t)?this._state[t]:this.get(t)}},{key:"setState",value:function(t,e){if("string"==typeof t)return this.setState(R({},t,e));var n={},r={},i=!1,a=(t=l.clone(t),this);return Object.getOwnPropertyNames(t).forEach(function(e){var u=a.getState(e),s=t[e];(0,o.default)(u,s)||(r[e]=u,n[e]=s,a._state[e]=s,i=!0)}),i&&(this.clearCache(),n.hasOwnProperty("text")&&delete this._text_substitutor,n.hasOwnProperty("fillStyle")&&this.onchangeFill(n,r),n.hasOwnProperty("data")&&this.onchangeData(n,r),this.onchange&&this.onchange(n,r),this.trigger("change",n,r)),this}},{key:"isDescendible",value:function(t){return!0}},{key:"getContext",value:function(){return this._parent.getContext()}},{key:"outline",value:function(t){return(0,m.default)(this,t||0)}},{key:"contains",value:function(t,e){return!1}},{key:"adjustResize",value:function(t,e,n){if(n){var r=this.bounds,o=r.height/r.width,i=t.width-r.width,a=t.height-r.height;i*o>a?a=i*o:i=a/o;var u=t.left-r.left,s=t.top-r.top;return 0!=u&&0!=s?(s=-a,u=-i):0!=u?u=-i:0!=s&&(s=-a),{left:r.left+u,top:r.top+s,width:r.width+i,height:r.height+a}}return t}},{key:"adjustRotation",value:function(t,e){if(e||this.app.rotateStepForced){var n=this.app.rotateStep;return Math.floor((t+n/2)/n)*n}return t}},{key:"findFirst",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(t.apply(void 0,[this].concat(n)))return this}},{key:"findAll",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return"string"==typeof t?a.select(t,this,n[0]||this):"function"==typeof t&&t.apply(void 0,[this].concat(n))?[this]:void 0}},{key:"capture",value:function(t,e){if(!this.capturable)return!1;var n=this.transcoordP2S(t,e);return this.contains(n.x,n.y)?this:void 0}},{key:"prepare",value:function(t,e){t(this)}},{key:"prepareIf",value:function(t){var e=this;t&&this.prepare&&this.prepare(function(t){e.invalidate()},function(t){(0,f.error)(t)})}},{key:"draw",value:function(t){t.save(),this.__proto__.hasOwnProperty("_pre_draw")?this._pre_draw(t):this.prerender(t),this.__proto__.hasOwnProperty("_draw")?this._draw(t):this.render(t),this.__proto__.hasOwnProperty("_post_draw")?this._post_draw(t):this.postrender(t),t.restore()}},{key:"delta",value:function(t,e){if(void 0===e)return t?this._delta[t]:this._delta;this._delta[t]=e}},{key:"prerender",value:function(t){var e=this.rotatePoint,n=this.model,r=n.scale,o=n.rotation,i=n.shadow,a=n.alpha,u=(r&&r.x||1)*this._delta.sx,s=(r&&r.y||1)*this._delta.sy,c=(o||0)+this._delta.theta,l=this._delta,f=l.tx,h=void 0===f?0:f,p=l.ty,y=void 0===p?0:p,v=(a||1)-this._delta.fade;(h||y)&&t.translate(h,y),(1!=u||1!=s||c)&&(t.translate(e.x,e.y),1==u&&1==s||t.scale(u,s),c&&t.rotate(c),t.translate(-e.x,-e.y)),v&&(t.globalAlpha=v),i&&(0,d.setShadow)(t,i,this),this.hidden&&(t.globalAlpha*=.5)}},{key:"render",value:function(t){}},{key:"postrender",value:function(t){this.drawText(t)}},{key:"drawText",value:function(t){!this.textHidden&&this.text&&this.hasTextProperty&&(0,k.drawText)(t,this.textBounds,this.textLines(t),this.model)}},{key:"drawStroke",value:function(t){(0,_.default)(t,this.model,this)}},{key:"drawFill",value:function(t){this.fillStyle&&"transparent"!=this.fillStyle&&((0,g.drawFill)(t,this.bounds,this.center,this.model,this),(0,d.resetShadow)(t))}},{key:"animate",value:function(t){return this._animate&&this._animate.stop(),this._animate=(0,p.default)(t),this._animate}},{key:"move",value:function(t){var e=t.x,n=t.y,r=this.path,o=e,i=n;this.path=r.map(function(t){return{x:t.x+o,y:t.y+i}})}},{key:"symmetryX",value:function(t){"number"!=typeof t&&(t=this.center.x);var e=this.model.rotation,n=this.fillStyle;if(this.set("rotation",2*Math.PI-e),n&&"gradient"===n.type&&"linear"===n.gradientType){var r=l.clone(n);r.rotation=(Math.PI-parseFloat(n.rotation||0))%(2*Math.PI),this.set("fillStyle",r)}this.path=this.path.map(function(e){return{x:2*t-e.x,y:e.y}})}},{key:"symmetryY",value:function(t){this.symmetryX(),this.set("rotation",(Math.PI+this.model.rotation)%(2*Math.PI)),t&&this.move({x:0,y:2*(t-this.center.y)})}},{key:"effect",value:function(t,e){return(0,c.default)(this,t,e)}},{key:"invalidate",value:function(){this.parent&&this.parent.invalidate()}},{key:"defaultTextSubstitutor",value:function(){var t=this.getState("text");return void 0==t?"":String(t)}},{key:"textLines",value:function(t){return(0,k.textLines)(t||this.getContext(),this.textBounds.width,this.font,this.text,this.get("textWrap"))}},{key:"trim",value:function(){delete this._model[""],"chartjs"!==this._model.type&&delete this._model.chart}},{key:"serialize",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return JSON.stringify.apply(JSON,[this.hierarchy].concat(e))}},{key:"nature",get:function(){return this.constructor.nature}},{key:"disposed",get:function(){return!!this._disposed}},{key:"retention",get:function(){return Number(this.get("retention"))||0}},{key:"hasTextProperty",get:function(){return!0}},{key:"app",get:function(){return!this._app&&this.parent&&(this._app=this.parent.app),this._app}},{key:"model",get:function(){return this._model}},{key:"state",get:function(){return Object.assign({},this._model,this._state)}},{key:"hierarchy",get:function(){var t=l.clone(this._model);return this.volatile.forEach(function(e){delete t[e]}),t}},{key:"volatile",get:function(){return L}},{key:"textHidden",get:function(){return!!this._textHidden},set:function(t){this._textHidden=!!t,this.invalidate()}},{key:"root",get:function(){return this.isRoot()?this:this.parent&&this.parent.root}},{key:"rootModel",get:function(){return this.isRootModel()?this:this.parent&&this.parent.rootModel}},{key:"parent",get:function(){return this._parent},set:function(t){this._parent=t}},{key:"center",get:function(){var t=this.bounds;return{x:t.left+t.width/2,y:t.top+t.height/2}},set:function(t){if(t&&!isNaN(t.x)&&!isNaN(t.y)){var e=this.center;if(Math.round(100*t.x)/100!=Math.round(100*e.x)/100||Math.round(100*t.y)/100!=Math.round(100*e.y)/100){var n=t.x-e.x,r=t.y-e.y;this.path=this.path.map(function(t){return{x:t.x+n,y:t.y+r}})}}}},{key:"location",get:function(){return this.center},set:function(t){this.center=t}},{key:"dimension",get:function(){return this.get("dimension")},set:function(t){this.set("dimension",t)}},{key:"bounds",get:function(){var t,e,n,r,o=this.path;t=e=o[0].x,n=r=o[0].y;for(var i=1;i<o.length;i++){var a=o[i];a.x<t?t=a.x:a.x>e&&(e=a.x),a.y<n?n=a.y:a.y>r&&(r=a.y)}return{left:t,top:n,width:e-t,height:r-n}},set:function(t){var e=this.bounds;if(Math.round(100*t.width)/100!=Math.round(100*e.width)/100||Math.round(100*t.height)/100!=Math.round(100*e.height)/100||Math.round(100*t.left)/100!=Math.round(100*e.left)/100||Math.round(100*t.top)/100!=Math.round(100*e.top)/100){var n=0==e.width?1:t.width/e.width,r=0==e.height?1:t.height/e.height;this.path=this.path.map(function(o){return{x:t.left+(o.x-e.left)*n,y:t.top+(o.y-e.top)*r}})}}},{key:"path",get:function(){return(0,f.error)("이 컴포넌트에 get path 가 구현되어있지 않음.",this),[]},set:function(t){(0,f.error)("이 컴포넌트에 get path 가 구현되어있지 않음.",this)}},{key:"anchors",get:function(){return[]}},{key:"strokeStyle",get:function(){return this.get("strokeStyle")},set:function(t){this.set("strokeStyle",t)}},{key:"fillStyle",get:function(){return this.getState("fillStyle")},set:function(t){this.setState("fillStyle",t)}},{key:"fontColor",get:function(){return this.get("fontColor")},set:function(t){this.set("fontColor",String(l.objToVal(t)))}},{key:"rotation",get:function(){return this.getState("rotation")},set:function(t){this.setState("rotation",Number(l.objToVal(t)))}},{key:"mutable",get:function(){return B.mutable}},{key:"resizable",get:function(){return B.resizable&&!this.stuck}},{key:"rotatable",get:function(){return B.rotatable&&!this.stuck}},{key:"capturable",get:function(){return!1!==this.get("capturable")}},{key:"stuck",get:function(){return!!(this.parent&&this.parent.layout.isStuck(this)||this.get("locked"))}},{key:"hidden",get:function(){return this.app.isViewMode&&this.getState("hidden")},set:function(t){this.setState("hidden",t)}},{key:"animation",get:function(){if(this.app.isViewMode&&!this.isTemplate()){if(!this._animation){var t=this.model.animation;t&&t.oncreate&&(this._animation=s.compile(this,t.oncreate))}return this._animation}}},{key:"started",set:function(t){this.animation&&(this.animation.started=t)}},{key:"font",get:function(){return(0,k.font)(this.model)}},{key:"lineHeight",get:function(){var t=this.get("lineHeight");return t||1.2*this.fontSize}},{key:"textSubstitutor",get:function(){return this._text_substitutor||(this._text_substitutor=(0,A.buildSubstitutor)(this.getState("text"),this)||this.defaultTextSubstitutor),this._text_substitutor}},{key:"text",get:function(){var t=this.get("textFormat");return t?(0,x.default)(t,this.textSubstitutor()):this.textSubstitutor()},set:function(t){delete this._text_substitutor;var e=l.objToVal(t);this.setState("text",void 0==e?"":String(e))}},{key:"textBounds",get:function(){var t=this.model,e=t.paddingTop,n=void 0===e?0:e,r=t.paddingLeft,o=void 0===r?0:r,i=t.paddingRight,a=void 0===i?0:i,u=t.paddingBottom,s=void 0===u?0:u,c=this.bounds,l=c.left,f=c.top,h=c.width,p=c.height;return{left:l+o,top:f+n,width:Math.max(h-o-a,0),height:Math.max(p-n-s,0)}}},{key:"rotatePoint",get:function(){return this.center}},{key:"value",get:function(){var t=this.nature["value-property"]||"text";return"value"==t?this.getState("value"):this[t]},set:function(t){var e=this.nature["value-property"]||"text";"value"==e?this.setState("value",t):this[e]=t}},{key:"data",get:function(){return this.getState("data")},set:function(t){this.setState("data",t),this.touch()}},{key:"mappings",get:function(){return!this._mappings&&this.parent&&this.buildMappings(),this._mappings}},{key:"controls",get:function(){}}]),t}();e.default=N,N.union=y.default,N.transcoordR=j.transcoordR,N.transcoordRR=j.transcoordRR,N.createCanvas=v.createCanvas,N.memoize=h.intercept,N.mixin=u.mixin,N.drawText=k.drawText,N.font=k.font,N.textLines=k.textLines,N.drawStroke=_.default,N.drawFill=g.drawFill,N.reposition=M.default,N.RetentionManager=S.default,N.template=i.default,Object.assign(N.prototype,{drawEffect:w.default,prepareFill:g.prepareFill,prepareFillIf:g.prepareFillIf,onchangeFill:g.onchangeFill,mutateBounds:P.default,mutatePath:O.default,substitute:A.substitute,onchangeMappings:E.onchangeMappings,onchangeData:E.onchangeData,buildMappings:E.buildMappings,executeMappings:E.executeMappings,disposeMappings:E.disposeMappings,ondropfile:b.ondropfile,transcoordS2P:j.transcoordS2P,transcoordP2S:j.transcoordP2S,transcoordS2T:j.transcoordS2T,transcoordT2S:j.transcoordT2S,transcoordS2TR:j.transcoordS2TR,transcoordS2O:j.transcoordS2O,transcoordC2S:j.transcoordC2S,transcoordS2C:j.transcoordS2C,_pre_draw:N.prototype.prerender,_draw:N.prototype.render,_post_draw:N.prototype.postrender}),["rotatePoint","font","lineHeight","retention"].forEach(function(t){return N.memoize(N.prototype,t,!1)}),["bounds","center","textBounds"].forEach(function(t){return N.memoize(N.prototype,t,!0)}),N.mixin(N.prototype,u.event.withEvent)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});"undefined"==typeof window||window;var r="[ERROR]",o="[WARN]",i="[DEBUG]";e.error=function(){for(var t,e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=[];n.forEach(function(t){return t&&t.stack&&i.push(t.stack)}),(t=console).error.apply(t,[r].concat(n,[i.join(" ")]))},e.warn=function(){for(var t,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=[];n.forEach(function(t){return t&&t.stack&&i.push(t.stack)}),(t=console).warn.apply(t,[o].concat(n,[i.join(" ")]))},e.debug=function(){for(var t,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=console).log.apply(t,[i].concat(n))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.NOTHING={},e.MODE_VIEW=0,e.MODE_EDIT=1,e.MODE_SHIFT=2,e.MAX_UNDO_SIZE=30,e.DPPX="undefined"==typeof window?1:window.devicePixelRatio||(window.matchMedia&&window.matchMedia("(min-resolution: 2dppx), (-webkit-min-device-pixel-ratio: 1.5),(-moz-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5)").matches?2:1)||1,e.GESTURES=["mousemove","mouseup","mousedown","mouseout","wheel","click","touchstart","touchmove","touchend","dblclick"],e.KEYEVENTS=["keydown","keyup"],e.DEFAULT={ALPHA:1,FONT_SIZE:15,FONT_FAMILY:"serif",FONT_COLOR:"black",TEXT_ALIGN:"center",TEXT_BASELINE:"middle",TEXT_WRAP:!1,BOLD:!1,ITALIC:!1,STROKE_STYLE:"#999",LINE_DASH:"solid"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.clone=function(t){return JSON.parse(JSON.stringify(t))},e.merge=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"!=(void 0===e?"undefined":r(e))&&(e={});for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];o.forEach(function(n){var o=function(o){"object"!=r(n[o])?e[o]=n[o]:n[o].length>0?e[o]=n[o].map(function(e){return"object"!=r(n[o])?e:t({},e)}):e[o]=t(e[o],n[o])};for(var i in n)o(i)});return e},e.push=function t(e,n,o){if(!e||!n)return e;for(var i in n){if(e[i]&&o)throw new Error('utils.push attempted to overwrite "'+i+'" while running in protected mode');"object"==r(e[i])&&"object"==r(n[i])?t(e[i],n[i]):e[i]=n[i]}return e};var o=n(68);Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return s(o).default}});var i=n(181);Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return s(i).default}});var a=n(182);Object.defineProperty(e,"once",{enumerable:!0,get:function(){return s(a).default}}),e.uniqueId=function(t){return""+(t||"")+ ++c};var u=n(186);function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return s(u).default}}),e.objToVal=function(t){for(;t&&"object"===(void 0===t?"undefined":r(t));){var e=t;for(var n in t){t=t[n];break}if(t===e){t=void 0;break}}return t};var c=0},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(73));e.default=function(t){var e=function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,t),r(n,[{key:"contains",value:function(t,e){var n=this.model,r=n.left,o=n.top,i=n.width,a=n.height,u=n.lineWidth,s=(void 0===u?0:u)/2;return t<Math.max(r+i,r)+s&&t>Math.min(r+i,r)-s&&e<Math.max(o+a,o)+s&&e>Math.min(o+a,o)-s}},{key:"path",set:function(t){var e=t[0],n=t[2],r=this.model;r.width,r.height;this.set({left:e.x,top:e.y,width:n.x-e.x,height:n.y-e.y})},get:function(){var t=this.model,e=t.left,n=void 0===e?0:e,r=t.top,o=void 0===r?0:r,i=t.width,a=void 0===i?0:i,u=t.height,s=void 0===u?0:u;return[{x:n,y:o},{x:n+a,y:o},{x:n+a,y:o+s},{x:n,y:o+s}]}}]),n}();return o.intercept(e.prototype,"path",!1),e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),a=(r=i)&&r.__esModule?r:{default:r};var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"postrender",value:function(t){this.drawFill(t),this.drawStroke(t),function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"postrender",this).call(this,t)}},{key:"rotationX",set:function(t){this.setState("rotationX",t)},get:function(){return this.getState("rotationX")}},{key:"rotationY",set:function(t){this.setState("rotationY",t)},get:function(){return this.getState("rotationY")}},{key:"rotationZ",set:function(t){this.setState("rotation",t)},get:function(){return this.getState("rotation")}},{key:"zPos",set:function(t){this.setState("zPos",t)},get:function(){return this.getState("zPos")}},{key:"depth",set:function(t){this.setState("depth",t)},get:function(){return this.getState("depth")}}]),e}();e.default=u},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(44),i="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,a=o||i||Function("return this")();t.exports=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(87),a=(r=i)&&r.__esModule?r:{default:r};n(3);var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"execute",value:function(){this.params.changes.forEach(function(t){return t.component.set(t.after)})}}],[{key:"before",value:function(t){return t.map(function(t){return{component:t}})}},{key:"after",value:function(t,e){e.execute(null,!1)}},{key:"around",value:function(t,e,n){e.call(n),t.execute(null,!1)}}]),e}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=l(n(0)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(20)),u=n(36),s=l(n(4)),c=l(n(78));function l(t){return t&&t.__esModule?t:{default:t}}var f=[],h=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r._components=[],r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,c.default)((0,s.default)(i.default))),r(e,[{key:"dispose",value:function(){this.components.slice().forEach(function(t){return t.dispose()}),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispose",this).call(this)}},{key:"isContainer",value:function(){return!0}},{key:"containable",value:function(t){return t.isDescendible(this)&&"variable"!==t.get("type")}},{key:"reflow",value:function(){this.layout.reflow(this),this.components&&this.components.forEach(function(t){t.isContainer()&&t.reflow()})}},{key:"addComponent",value:function(t){var e=t.parent;if(e){if(this===e)return;e.removeComponent(t)}var n=this._components.push(t)-1;t.parent=this,t.added(this),this.trigger("add",this,t,n),t.delegate_on(this),t.trigger("added",this,t,n),this.root&&this.root.isReady&&t.ready()}},{key:"removeComponent",value:function(t){var e=this._components.indexOf(t);-1!=e&&(this._components.splice(e,1),t.parent=null,t.removed(this),this.trigger("remove",this,t),t.trigger("removed",this,t),t.delegate_off(this))}},{key:"insertComponentAt",value:function(t,e){var n=t.parent;n&&n.removeComponent(t);var r=this._components.splice(0,e);this._components=r.concat(t,this._components),e=this._components.indexOf(t),t.parent=this,t.added(this),this.trigger("add",this,t,e),t.delegate_on(this),t.trigger("added",this,t,e)}},{key:"add",value:function(t){var e=this;return t instanceof Array?(t.forEach(function(t){-1==e._components.indexOf(t)&&e.addComponent(t)}),this):this.add.call(this,[t])}},{key:"remove",value:function(t){var e=this;return t instanceof Array?this._components?(t.forEach(function(t){e.removeComponent(t)}),this):this:this.remove.call(this,[t])}},{key:"getAt",value:function(t){if(this._components)return this._components[t]}},{key:"forEach",value:function(t,e){this._components&&this._components.forEach(t,e)}},{key:"traverse",value:function(t,e){t.call(e,this),this._components&&this._components.forEach(function(n){n.isContainer()?n.traverse(t,e):t.call(e,n)})}},{key:"indexOf",value:function(t){return(this._components||f).indexOf(t)}},{key:"size",value:function(){return(this._components||f).length}},{key:"moveChildAt",value:function(t,e){var n=this.indexOf(e);if(-1!=n){var r=this._components.splice(0,n),o=this._components.splice(1);this._components=r.concat(o),t=Math.max(0,t),t=Math.min(t,this._components.length),r=this._components.splice(0,t),this._components=r.concat(e,this._components)}}},{key:"moveChildForward",value:function(t){var e=this.indexOf(t);-1!=e&&e!=this.size()-1&&(this._components[e]=this._components[e+1],this._components[e+1]=t)}},{key:"moveChildBackward",value:function(t){var e=this.indexOf(t);-1!=e&&0!=e&&(this._components[e]=this._components[e-1],this._components[e-1]=t)}},{key:"moveChildToFront",value:function(t){var e=this.indexOf(t);if(-1!=e&&e!=this.size()-1){var n=this._components.splice(0,e),r=this._components.splice(1);this._components=n.concat(r,this._components)}}},{key:"moveChildToBack",value:function(t){var e=this.indexOf(t);if(-1!=e&&0!=e){var n=this._components.splice(0,e),r=this._components.splice(0);this._components=this._components.concat(n,r)}}},{key:"symmetryX",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"symmetryX",this).call(this,t),this.components.map(function(t){t.symmetryX(0)})}},{key:"findAll",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if("string"==typeof t)return a.select(t,this,n[0]||this);if("function"==typeof t){for(var o=[],i=this.components.length-1;i>=0;i--){var u,s=(u=this.components[i]).findAll.apply(u,[t].concat(n));s&&(o=o.concat(s))}return t.apply(void 0,[this].concat(n))&&o.push(this),o}}},{key:"findFirst",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if("string"==typeof t)return a.select(t,this,n[0])[0];if("function"==typeof t){for(var o=this.components.length-1;o>=0;o--){var i,u=(i=this.components[o]).findFirst.apply(i,[t].concat(n));if(null!=u)return u}return t.apply(void 0,[this].concat(n))?this:null}}},{key:"findById",value:function(t){return this.root.findById(t)}},{key:"contains",value:function(t,n){var r=o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"contains",this).call(this,t,n);if(!r){var i=this.model,a=i.left,u=i.top,s=i.width,c=i.height,l=i.lineWidth,f=void 0===l?0:l,h=this.stuck?0:10+f/2;r=t<Math.max(a+s,a)+h&&t>Math.min(a+s,a)-h&&n<Math.max(u+c,u)+h&&n>Math.min(u+c,u)-h}return r}},{key:"capture",value:function(t,e){var n=this.transcoordP2S(t,e);if(!this.contains(n.x,n.y))return!1;var r=this.bounds;n.x-=r.left,n.y-=r.top;for(var o=this.layout.capturables(this),i=o.length-1;i>=0;i--){var a=o[i].capture(n.x,n.y);if(a)return a}return this.capturable&&this}},{key:"capturePath",value:function(t,e){if(e){if(e.indexOf(this)>-1)return!1;for(var n=0;n<e.length;n++)if(!this.containable(e[n]))return!1}for(var r=[],o=this.bounds,i=o.left,a=o.top,u=o.width,s=o.height,c=0;c<t.length;c++){var l=this.transcoordP2S(t[c].x,t[c].y);if(l.x<i||l.x>i+u||l.y<a||l.y>a+s)return!1;l.x-=i,l.y-=a,r.push(l)}for(var f=this.layout.capturables(this),h=f.length-1;h>=0;h--){var p=f[h];if(p.isContainer()){var d=p.capturePath(r,e);if(d)return d}}return this.focusible&&this}},{key:"render",value:function(t){var e=this.bounds,n=e.left,r=void 0===n?0:n,o=e.top,i=void 0===o?0:o,a=e.width,u=e.height;t.beginPath(),t.rect(r,i,a,u),this.drawFill(t),this.drawStroke(t)}},{key:"postrender",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"postrender",this).call(this,t);var n=this.model,r=n.top,i=n.left;n.scale;t.translate(i,r),this.layout.drawables(this).forEach(function(e){e.draw(t)}),t.translate(-i,-r),this.drawText(t)}},{key:"trim",value:function(){this.components.forEach(function(t){t.trim()}),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"trim",this).call(this)}},{key:"showMoveHandle",get:function(){return!0}},{key:"hasTextProperty",get:function(){return!1}},{key:"components",get:function(){return this._components}},{key:"focusible",get:function(){return!0}},{key:"layout",get:function(){return u.Layout.get(this.get("layout"))||u.AbsoluteLayout}},{key:"hierarchy",get:function(){var t=o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"hierarchy",this);return this.components&&(t.components=this.components.map(function(t){return t.hierarchy})),t}}]),e}();e.default=h,["layout"].forEach(function(t){return i.default.memoize(h.prototype,t,!1)}),i.default.register("container",h)},function(t,e,n){"use strict";var r=n(108),o=n(113);t.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},function(t,e,n){"use strict";var r=n(23),o=n(109),i=n(110),a="[object Null]",u="[object Undefined]",s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?u:a:s&&s in Object(t)?o(t):i(t)}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){var e=void 0===t?"undefined":r(t);return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){return null!=t&&"object"==(void 0===t?"undefined":r(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o={};e.default={register:function(t,e){o[t]=e},unregister:function(t){delete o[t]},get:function(t){if(t){var e=o[t];return e||(0,r.error)("Layout Not Found - ",t),e}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=s(n(0)),a=s(n(8)),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2));function s(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return t.translate=t.translate||{x:0,y:0},r._draw_reserved=!1,r.__draw__=function(){r._draw_reserved=!1,r.trigger("redraw"),r.reflow(),r.draw()},r.throttle_render=function(){r._draw_reserved||requestAnimationFrame(r.__draw__),r._draw_reserved=!0},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"fitSize",value:function(t){if(this.target){var e=getComputedStyle(this.target),n=e?parseFloat(e.getPropertyValue("width")):this.target.offsetWidth,r=e?parseFloat(e.getPropertyValue("height")):this.target.offsetHeight;t.setAttribute("width",n*u.DPPX),t.setAttribute("height",r*u.DPPX),t.style.width=n+"px",t.style.height=r+"px"}}},{key:"resize",value:function(){this.fitSize(this.element)}},{key:"isLayer",value:function(){return!0}},{key:"createElement",value:function(){var t=i.default.createCanvas(1,1);return t.style.position="absolute",t}},{key:"dispose",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispose",this).call(this),this.target=null,this.element=null}},{key:"getContext",value:function(){return this._context2D||(this._context2D=this.canvas&&this.canvas.getContext("2d")),this._context2D}},{key:"draw",value:function(t){this.canvas&&(t=t||this.getContext())&&o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this,t)}},{key:"prerender",value:function(t){var e=this.model,n=e.translate,r=e.scale,o=void 0===r?{x:1,y:1}:r,i=e.rotation;t.clearRect(0,0,t.canvas.width,t.canvas.height),n&&t.translate(n.x*u.DPPX,n.y*u.DPPX),t.scale(o.x*u.DPPX,o.y*u.DPPX),i&&t.rotate(i)}},{key:"contains",value:function(t,e){return!1}},{key:"invalidate",value:function(){this.throttle_render()}},{key:"move",value:function(t){var e=this.get("translate")||{x:0,y:0};this.set({translate:{x:e.x+t.x,y:e.y+t.y}})}},{key:"target",get:function(){return this._target},set:function(t){this._target&&this.element&&this._target.removeChild(this.element),this._target=t,t&&(this.element||(this.element=this.createElement()),this.resize(),t.appendChild(this.element))}},{key:"canvas",get:function(){return this.element}},{key:"selected",get:function(){return this.root.selected},set:function(t){this.root.selected=t}},{key:"focused",get:function(){return this.root.focused},set:function(t){this.root.focused=t}},{key:"rotatePoint",get:function(){return{x:0,y:0}}}]),e}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=(i(n(0)),i(n(87)));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){for(var e=0;t&&!t.isRootModel();)e+=t.get("rotation")||0,t=t.parent;return e%(2*Math.PI)}var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),r(e,[{key:"execute",value:function(){this.params.changes.forEach(function(t){var e=t.component,n=t.to_container,r=t.to_index,o=t.to_left,i=t.to_top,u=(t.hint,function(t){if(t.isRootModel())return t.bounds;var e=t.bounds,n=t.rotatePoint,r=n;return{left:(r=t.transcoordS2T(r.x,r.y)).x-(n.x-e.left),top:r.y-(n.y-e.top),width:e.width,height:e.height}}(e)),s=a(e);if(e.removeSelf(!n),e.bounds=u,e.set("rotation",s),n){e.set("rotation",function(t,e){return((t.get("rotation")||0)-a(e))%(2*Math.PI)}(e,n));var c=function(t,e){if(e.isRootModel())return t.bounds;var n=t.bounds,r=t.rotatePoint,o=e.transcoordT2S(r.x,r.y),i=e.bounds;return{left:o.x-(r.x-n.left)-i.left,top:o.y-(r.y-n.top)-i.top,width:n.width,height:n.height}}(e,n);t.to_left=void 0!==o?o:c.left,t.to_top=void 0!==i?i:c.top,e.bounds={left:t.to_left,top:t.to_top,width:c.width,height:c.height},void 0===r?n.addComponent(e):n.insertComponentAt(e,r)}})}}]),e}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(71),a=(r=i)&&r.__esModule?r:{default:r};var u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.client=e,this.config=n,this._started=!1;var r=this.config,o=r.delta,i=void 0===o?"linear":o,u=r.options,s=r.ease;"string"==typeof i&&(i=a.default[i]),this.delta="out"==s?function(t,e){return function(n){return 1-t(1-n,e)}}(i,u):"inout"==s?function(t,e){return function(n){return n<.5?t(2*n,e)/2:(2-t(2*(1-n),e))/2}}(i,u):i,this.init()}return o(t,[{key:"dispose",value:function(){this.stop(),delete this.client}},{key:"init",value:function(){}},{key:"start",value:function(){var t=this;if(!this._started){var e=this.config,n=e.duration,r=void 0===n?2e3:n,o=e.delay,i=void 0===o?0:o,a=e.repeat,u=void 0!==a&&a;this._started=!0,setTimeout(function(){var e=0;t._raf=requestAnimationFrame(function n(){if(t._started){0==e&&(e=performance.now(),t.client.touch());var o=performance.now()-e,a=i/r,s=o/r,c=u?s%(1+a):Math.min(s,1);c=Math.max(c-a,0),t.step(t.delta(c)),t.client&&t.client.invalidate(),!(s>=1)||u&&t._started||(t.stop(),e=0),t._started&&(t._raf=requestAnimationFrame(n))}})},0)}}},{key:"stop",value:function(){this._raf&&cancelAnimationFrame(this._raf),this._raf=null,this._started=!1}},{key:"started",get:function(){return this._started},set:function(t){this.started!=!!t&&(t?this.start():this.stop())}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(79);Object.defineProperty(e,"compile",{enumerable:!0,get:function(){return a(r).default}});var o=n(88);Object.defineProperty(e,"duplicate",{enumerable:!0,get:function(){return a(o).default}});var i=n(20);function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"select",{enumerable:!0,get:function(){return i.select}}),Object.defineProperty(e,"match",{enumerable:!0,get:function(){return i.match}})},function(t,e,n){"use strict";t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){"use strict";var r=Array.isArray;t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){var o=e.get("class");return!!o&&(o.split(" ")||[]).indexOf(t.substr(1))>=0}function o(t,e,n,r){return t==e.get("type")}function i(t,e,n,r){switch(t){case"(all)":return!0;case"(parent)":return n&&n.parent===e;case"(child)":case"(children)":return n&&n===e.parent;case"(sibling)":case"(siblings)":return n&&n.parent===e.parent&&n!==e;default:return!1}}Object.defineProperty(e,"__esModule",{value:!0}),e.match=function(t,e,n,i){if("(all)"==t)return!0;switch(t.charAt(0)){case"#":return function(t,e,n,r){return t.substr(1)==e.get("id")}(t,e);case".":return r(t,e,n,i);case"(":return function(t,e,n,r){switch(t){case"(all)":return!0;case"(self)":return r===e;case"(root)":return!r.parent&&r===e;case"(descendant)":return r!==e;case"(child)":return r===e.parent;default:return!1}}(t,e,0,i);default:return o(t,e,n,i)}},e.select=function(t,e,n){if("(root)"==t)return[e];if("(self)"==t)return n?[n]:[];var a;switch(t.charAt(0)){case"#":var u=e.root.findById(t.substr(1));return u?[u]:[];case".":a=r;break;case"(":a=i;break;default:a=o}return function t(e,n,r,o,i,a){e(n,r,o,i)&&a.push(r);r.components&&r.components.forEach(function(r){t(e,n,r,o,i,a)});return a}(a,t,e,n,e,[])}},function(t,e,n){"use strict";var r=n(98),o=n(99),i=n(100),a=n(101),u=n(102);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){"use strict";var r=n(18);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){"use strict";var r=n(6).Symbol;t.exports=r},function(t,e,n){"use strict";var r=n(9)(Object,"create");t.exports=r},function(t,e,n){"use strict";var r=n(122);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){"use strict";var r=n(43),o=n(53);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);Object.defineProperty(e,"logger",{enumerable:!0,get:function(){return a(r).default}});var o=n(179);Object.defineProperty(e,"event",{enumerable:!0,get:function(){return a(o).default}});var i=n(70);function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"mixin",{enumerable:!0,get:function(){return a(i).default}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=u(n(8)),a=u(n(0));function u(t){return t&&t.__esModule?t:{default:t}}var s=["left","top","width","height","rotation","animation"],c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"isGroup",value:function(){return!0}},{key:"get",value:function(t){return this._model[t]}},{key:"set",value:function(t,n){if("string"==typeof t)return this.set((a=n,(i=t)in(r={})?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,r));var r,i,a,u=s.reduce(function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e},{});return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"set",this).call(this,u)}},{key:"capture",value:function(t,n){var r=o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"capture",this).call(this,t,n);if(!this.app.isEditMode)return r;if(this.parent.isGroup())return r&&r!==this&&r;for(var i=0;i<this.root.selected.length;i++){for(var a=this.root.selected[i];a!==this&&(a.isGroup()||a.parent.isGroup());)a=a.parent;if(a===this)return r&&r!==this&&r}return r&&r!==this&&this}},{key:"calculateBounds",value:function(){this.clearCache(),this.__MUTATING__=!0,this.mutateBounds(function(t){var e=a.default.union(this.components.map(function(t){return t.bounds}));return this.components.forEach(function(t){var n=t.bounds;t.bounds={left:n.left-e.left,top:n.top-e.top,width:n.width,height:n.height}}),{left:t.left+e.left,top:t.top+e.top,width:e.width,height:e.height}},this),this.__MUTATING__=!1,this.parent.isGroup()&&this.parent.calculateBounds()}},{key:"render",value:function(t){}},{key:"postrender",value:function(t){var e=this.model,n=e.top,r=e.left;e.scale;t.translate(r,n),this.layout.drawables(this).forEach(function(e){e.draw(t)}),t.translate(-r,-n)}},{key:"bounds",set:function(t){if(this.__MUTATING__)(function t(e,n,r,o){var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);null!==a&&t(a,n,r,o)}else if("value"in i&&i.writable)i.value=r;else{var u=i.set;void 0!==u&&u.call(o,r)}return r})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"bounds",t,this);else{var n=this.bounds,r=t.width/n.width,o=t.height/n.height;this.path=this.path.map(function(e){return{x:t.left+(e.x-n.left)*r,y:t.top+(e.y-n.top)*o}}),this.components&&this.components.forEach(function(t){if(t.mutable)t.mutatePath(null,function(t){return t.map(function(t){return{x:t.x*r,y:t.y*o}})});else{var e=t.bounds,n=t.center,i={x:n.x*(1-r),y:n.y*(1-o)},a=e.width*(1-r),u=e.height*(1-o),s=-(i.x-a/2),c=-(i.y-u/2);t.bounds={left:e.left+s,top:e.top+c,width:e.width*r,height:e.height*o}}})}},get:function(){return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"bounds",this)}},{key:"focusible",get:function(){return!1}}]),e}();e.default=c,a.default.register("group",c)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={};e.default={register:function(t,e){r[t]=e},unregister:function(t){delete r[t]},get:function(t){return r[t]}}},function(t,e,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":o(window))&&(r=window)}t.exports=r},function(t,e,n){"use strict";var r=n(9)(n(6),"Map");t.exports=r},function(t,e,n){"use strict";(function(t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(6),i=n(144),a="object"==r(e)&&e&&!e.nodeType&&e,u=a&&"object"==r(t)&&t&&!t.nodeType&&t,s=u&&u.exports===a?o.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;t.exports=c}).call(e,n(51)(t))},function(t,e,n){"use strict";var r=n(145),o=n(146),i=n(147),a=i&&i.isTypedArray,u=a?o(a):r;t.exports=u},function(t,e,n){"use strict";var r=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.state,n=e.id,r=e.scale,i=void 0===r?u:r,c=(e.translate,e.bold),l=e.italic,f=e.fontFamily,h=void 0===f?"":f,p=e.textAlign,d=e.textBaseline,y=e.paddingTop,v=void 0===y?0:y,g=e.paddingBottom,b=void 0===g?0:g,m=e.paddingLeft,_=void 0===m?0:m,w=e.paddingRight,x=void 0===w?0:w,k=e.fontSize,O=void 0===k?o.DEFAULT.FONT_SIZE:k,P=e.lineWidth,A=void 0===P?0:P,E=e.lineDash,j=t.state.class,M=(t.text,t.strokeStyle),S=(t.fillStyle,t.rotation),T=void 0===S?0:S,C=t.fontColor,R=t.hidden,I=t.bounds,B=I.left,L=I.top,D=I.width,F=I.height,Y=t.element;Y.hidden=R,n&&(Y.id=n);j&&(Y.className=j);Object.assign(Y.style,s,{fontFamily:h,fontSize:O+"px",left:B+"px",top:L+"px",width:D+"px",height:F+"px",paddingTop:v+"px",paddingRight:x+"px",paddingBottom:b+"px",paddingLeft:_+"px",border:A+"px",borderColor:M,borderStyle:A>0?E||o.DEFAULT.LINE_DASH:"",color:C,fontWeight:c?"bold":"",fontStyle:l?"italic":"",textAlign:"end"==p?"right":"start"==p?"left":"",verticalAlign:d}),(0,a.default)(t);var N=t.delta(),U=(i&&i.x||1)*N.sx,z=(i&&i.y||1)*N.sy,H=(T||0)+N.theta,W=N.tx||0,G=N.ty||0;["-webkit-","-moz-","-ms-","-o-",""].forEach(function(t){Y.style[t+"transform"]="rotate("+H+"rad) translate("+W+"px, "+G+"px) scale("+U+", "+z+")"})};var r,o=n(2),i=n(215),a=(r=i)&&r.__esModule?r:{default:r};var u={x:1,y:1},s={boxSizing:"border-box",margin:"0px",position:"absolute",outline:"none"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(13);Object.defineProperty(e,"Layout",{enumerable:!0,get:function(){return l(r).default}});var o=n(217);Object.defineProperty(e,"AbsoluteLayout",{enumerable:!0,get:function(){return l(o).default}});var i=n(218);Object.defineProperty(e,"CardLayout",{enumerable:!0,get:function(){return l(i).default}});var a=n(219);Object.defineProperty(e,"LinearHorizontalLayout",{enumerable:!0,get:function(){return l(a).default}});var u=n(220);Object.defineProperty(e,"LinearVerticalLayout",{enumerable:!0,get:function(){return l(u).default}});var s=n(221);Object.defineProperty(e,"TableLayout",{enumerable:!0,get:function(){return l(s).default}});var c=n(222);function l(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"HTMLAbsoluteLayout",{enumerable:!0,get:function(){return l(c).default}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=u(n(0)),i=u(n(5)),a=u(n(225));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"is3dish",value:function(){return!0}},{key:"render",value:function(t){var e=this.model,n=e.cx,r=e.cy,o=e.rx,i=e.ry,a=e.startAngle,u=e.endAngle,s=e.anticlockwise;t.beginPath(),t.ellipse(n,r,Math.abs(o),Math.abs(i),0,a||0,u||2*Math.PI,s)}},{key:"contains",value:function(t,e){var n=this.model,r=n.cx,o=n.cy,i=(t-r)/(2*n.rx-.5),a=(e-o)/(2*n.ry-.5);return i*i+a*a<.25}},{key:"outline",value:function(t){return(0,a.default)(this,t)}},{key:"path",get:function(){var t=this.model,e=t.cx,n=t.cy,r=t.rx,o=t.ry;return[{x:e-r,y:n-o},{x:e+r,y:n-o},{x:e+r,y:n+o},{x:e-r,y:n+o}]},set:function(t){var e=t[0],n=t[2];this.set({cx:e.x+(n.x-e.x)/2,cy:e.y+(n.y-e.y)/2,rx:(n.x-e.x)/2,ry:(n.y-e.y)/2})}}]),e}();e.default=s,o.default.memoize(s.prototype,"path",!1),o.default.register("ellipse",s)},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.license=function(t){a.key=t};var r={},o=!1,i=!1,a=e.License=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,null,[{key:"isHostnameValid",value:function(){var e=location.hostname;if(""===e)return!0;for(var n=t.hostname.split(","),r=0;r<n.length;r++){if(t.matchLicenseHost(n[r].trim(),t.baseUrl))return!0;if(t.matchLicenseHost(n[r].trim(),e))return!0}return!1}},{key:"matchLicenseHost",value:function(e,n){if((n="127.0.0.1"==n?"localhost":n)==(e="127.0.0.1"==e?"localhost":e))return"localhost"!=e||"Production"!=t.licenseType;var r=e.split("."),o=n.split(".");if(r.length==o.length){for(var i=0;i<r.length;i++){var a=r[i],u=o[i];if(!("*"==a||a==u))return!1}return!0}return!1}},{key:"isUnlimited",value:function(){return"UNLIMITED"==t.expirationDate}},{key:"isUnexpired",value:function(){if(t.isUnlimited())return!0;var e=new Date;return t.expirationDate>e}},{key:"isKeyValid",value:function(){JSON.stringify(r,null," ");return r.Key==function(t,e){var n=JSON.parse(JSON.stringify(t));delete n.Key;var r=[];return u(JSON.stringify(n)).split("").forEach(function(t,n){r.push(String.fromCharCode(Math.abs(t.charCodeAt()-e[n%e.length].charCodeAt())))}),u(r.join(""))}(r,"hatio lab.")}},{key:"certified",get:function(){if(i)return i;if(!t.key)return!1;try{for(var e=Number(t.key.charAt(0)),n=Number(t.key.substring(t.key.length-e)),o=t.key.substring(1,t.key.length-e),a=0,u=0;u<o.length;u++)a+=o.charCodeAt(u);return a===n&&(r=JSON.parse(atob(o)),i=!0)}catch(t){return console.error("license invalid"),!1}}},{key:"key",get:function(){return t._key},set:function(e){t._key=e,o=!1,i=!1}},{key:"licenseType",get:function(){return r["License Type"]}},{key:"expirationDate",get:function(){var t=r["Expiration Date"]||"";if("UNLIMITED"==t)return t;var e=t.split(".");return t&&3==e.length&&(t=new Date(e[0],e[1],e[2])),t}},{key:"hostname",get:function(){return r.Hostname}},{key:"licenseKey",get:function(){return r.Key}},{key:"baseUrl",get:function(){return t._baseUrl||""},set:function(e){t._baseUrl=e}},{key:"valid",get:function(){return!!t.certified&&(o||(o=t.isKeyValid()&&t.isHostnameValid()&&t.isUnexpired()),o)}}]),t}();function u(e){return new t(e).toString("base64")}}).call(e,n(245).Buffer)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){t instanceof Array||(t=[t]);n||(n=this.model_layer);var r=[];this.selected=t.map(function(t){try{return o.compile(t,n.app)}catch(t){return console.warn(t),!1}}).filter(function(t){return!!t}).map(function(t){var o=e.left,i=e.top,a=e.width,u=e.height,s=e.x,c=e.y,l=e.cx,f=e.cy;return isNaN(o)||isNaN(i)||isNaN(a)||isNaN(u)||(t.bounds={left:o,top:i,width:a,height:u}),isNaN(s)||isNaN(c)||t.move({x:s,y:c}),isNaN(l)||isNaN(f)||(t.center={x:l,y:f}),r.push({component:t,to_container:n}),t}),this.app.commander.execute(new a.default({changes:r}))};var r,o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(17)),i=n(15),a=(r=i)&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=this.selected;this.selected=[];var e=null,n=t.filter(function(t){return!t.isRootModel()&&(t.parent.focusible||t.parent.isGroup())}).map(function(t){return e||(e=t.parent),{component:t,to_container:null}}),r=function(){var t=[];if(e.components.filter(function(t){return!n.find(function(e){return e.component===t})}).forEach(function(e){return t.push(e)}),t.length>1)return"break";var r=e.parent;t.forEach(function(t){return n.push({component:t,to_container:r})}),n.push({component:e,to_container:null}),e=r};for(;e&&e.isGroup();){var o=r();if("break"===o)break}n.length>0&&this.app.commander.execute(new i.default({changes:n}));e&&e.calculateBounds&&e.calculateBounds()};var r,o=n(15),i=(r=o)&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=13.3;e.default={screen:function(t){return void 0!==t&&(r=t),r}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=y(n(0)),i=y(n(8)),a=y(n(223)),u=d(n(17)),s=d(n(261)),c=d(n(263)),l=d(n(267)),f=d(n(3)),h=d(n(86)),p=n(1);function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function y(t){return t&&t.__esModule?t:{default:t}}var v=[];"undefined"!=typeof window&&window.addEventListener("resize",function(){v.forEach(function(t){t.resize()})});var g=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,Object.assign({type:"root",scale:{x:1,y:1}},t||{}),n));return t=t||{},r._app=n,r.target_element=t.target_element,r.rebuildContentModel(r.model.model),v.push(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"dispose",value:function(){this._app&&this._app.dispose(),function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispose",this).call(this),this._disposeAllResources(),this.target_element=null,delete this._refresh_mapping_debouncer,h.hide(this);var t=v.indexOf(this);t>=0&&v.splice(t,1)}},{key:"isRoot",value:function(){return!0}},{key:"variable",value:function(t,e){var n=this.findById(t);if(!n){var r=this.findTemplateFor(t);if(!r)return;var o=Object.assign(f.clone(r.hierarchy),{id:t,templatePrefix:""});n=u.compile(o,this.app),this.model_layer.addComponent(n)}if(void 0===e)return n.data;n.data=e,n.touch()}},{key:"buildVariables",value:function(t){var e=this;!t||t instanceof Array||(t=Object.keys(t).map(function(e){var n=t[e];return n.key=e,n})),t&&t.forEach(function(t,n){var r=e.indexMap[t.key];if(r)r.set({data:t.value,mappings:t.mappings&&t.mappings.slice(),dataType:t.dataType});else{var o=u.compile({type:"variable",id:t.key,left:-120,top:0+20*n,strokeStyle:"black",width:100,height:20,dataType:t.type,data:t.value,mappings:t.mappings&&t.mappings.slice()},e.app);e.model_layer.addComponent(o)}})}},{key:"addTemplate",value:function(t,e){var n=this.templateMap[t];n&&(0,p.error)("Template replaced (duplicated)",t,e,n),this.templateMap[t]=e,delete this.templatePrefixes}},{key:"removeTemplate",value:function(t,e){var n=this.templateMap[t];n!==e?(0,p.warn)("Removing template failed (different)",t,e,n):delete this.templateMap[t],delete this.templatePrefixes}},{key:"findTemplateFor",value:function(t){this.templatePrefixes||(this.templatePrefixes=Object.keys(this.templateMap).sort().reverse());var e=this.templatePrefixes.find(function(e){return t.startsWith(e)});if(e)return this.templateMap[e]}},{key:"addIndex",value:function(t,e){var n=this.indexMap[t];n&&(0,p.error)("Index replaced (duplicated)",t,e,n),this.indexMap[t]=e}},{key:"removeIndex",value:function(t,e){var n=this.indexMap[t];n!==e?(0,p.warn)("Removing index failed (different)",t,e,n):delete this.indexMap[t]}},{key:"findById",value:function(t){return this.indexMap[t]}},{key:"findOrCreate",value:function(t){var e=this.indexMap[t];if(!e){var n=this.findTemplateFor(t);if(n){var r=Object.assign(f.clone(n.hierarchy),{id:t,templatePrefix:""});e=u.compile(r,this.app),this.model_layer.addComponent(e)}}return e}},{key:"resize",value:function(){this.components.forEach(function(t){t.resize&&t.resize()}),this.invalidate()}},{key:"_disposeAllResources",value:function(){var t=this;this.selected=[],this._focused=null,this._ready=!1,this.eventEngine&&(this.assist_handlers&&this.assist_handlers.forEach(function(e){t.eventEngine.remove(e)}),this.eventEngine.dispose(),delete this.eventEngine),this.assist_layers&&this.assist_layers.forEach(function(e){e.dispose(),t.removeComponent(e)}),delete this.assist_layers,this.model_layer&&this.model_layer.dispose(),this.model_layer&&this.removeComponent(this.model_layer),delete this.model_layer,this.indexMap={},this.templateMap={}}},{key:"rebuildContentModel",value:function(t){var e=this;this._disposeAllResources(),this.eventEngine=new c.Engine(this),(t=t||{}).type="model-layer";var n=t.variables;delete t.variables,this.model_layer=u.compile(t,this.app),this.model_layer.target=this.target_element,this.addComponent(this.model_layer),n&&this.buildVariables(n),this.assist_layers=(this.model.layers||[]).map(function(t){var n=u.compile(t,e.app);return n.target=e.target_element,e.addComponent(n),n}),this.assist_handlers=(this.model.handlers||[]).map(function(t){var n={};return e.eventEngine.add(n,l.EventMap.get(t)),n}),this._ready=!0,this.traverse(function(t){return t.ready()})}},{key:"render",value:function(){this.components.forEach(function(t){return t.draw()})}},{key:"contains",value:function(t,e){return!0}},{key:"capturePath",value:function(t,e){return this.model_layer.capturePath(t,e)}},{key:"invalidate",value:function(){this.components.forEach(function(t){return t.invalidate()})}},{key:"refreshMappings",value:function(){if(!this._refresh_mapping_debouncer){if(this.disposed)return;this._refresh_mapping_debouncer=f.debounce(function t(e){e.executeMappings(),e.components&&e.components.forEach(function(e){return t(e)})},1e3)}this._refresh_mapping_debouncer(this.model_layer)}},{key:"_addTraverse",value:function(t){var e=this;t.components&&t.components.forEach(function(t){return e._addTraverse(t)});var n=t.model,r=n.id,o=n.templatePrefix;r&&this.addIndex(r,t),o&&this.addTemplate(o,t);var i=f.merge({},t.eventMap,t.model.eventMap);this.eventEngine.add(t,i)}},{key:"_removeTraverse",value:function(t){var e=this;t.components&&t.components.forEach(function(t){return e._removeTraverse(t)});var n=t.model,r=n.id,o=n.templatePrefix;r&&this.removeIndex(r,t),o&&this.removeTemplate(o,t),this.eventEngine.remove(t)}},{key:"onadded",value:function(t,e){this._addTraverse(e),this.refreshMappings(),this.invalidate()}},{key:"onremoved",value:function(t,e){this._removeTraverse(e),this.invalidate()}},{key:"onchanged",value:function(t,e,n){e.templatePrefix&&this.removeTemplate(e.templatePrefix,n.origin),t.templatePrefix&&this.addTemplate(t.templatePrefix,n.origin),e.id&&this.removeIndex(e.id,n.origin),t.id&&this.addIndex(t.id,n.origin),e.id==t.id&&e.class==t.class||this.refreshMappings()}},{key:"app",get:function(){return this._app}},{key:"target_element",get:function(){return this._target_element},set:function(t){this._ua_event_handler&&(this._ua_event_handler.dispose(),delete this._ua_event_handler),t&&(this._ua_event_handler=new c.UAEventHandler(this,t)),this.forEach(function(e){return e.target=t}),this._target_element=t}},{key:"unitScale",get:function(){switch(this.model_layer.get("unit")){case"mm":case"cm":case"in":return this.app.PPM/10;case"px":default:return 1}}},{key:"root",get:function(){return this}},{key:"isReady",get:function(){return this._ready}},{key:"rootModel",get:function(){return this.model_layer}},{key:"stuck",get:function(){return!0}},{key:"data",get:function(){return Object.values(this.indexMap).reduce(function(t,e){return t[e.model.id]=e.data,t},{})},set:function(t){for(var e in t){var n=this.findOrCreate(e);n&&(n.data=t[e])}}},{key:"selected",get:function(){return(this._selected||[]).filter(function(t){return t.parent})},set:function(t){var e=this._selected;this._selected=t,this.trigger("selected",t,e)}},{key:"focused",get:function(){return this._focused},set:function(t){this._focused!==t&&(this._focused=t,this.invalidate())}},{key:"style",get:function(){return this._style},set:function(t){this._style=t,this._compiled_style=s.compile(t)}},{key:"hasTextProperty",get:function(){return!1}},{key:"eventMap",get:function(){return{"(root)":{"(descendant)":{added:this.onadded,removed:this.onremoved,change:this.onchanged}}}}}]),e}();e.default=g,Object.assign(g.prototype,{fit:a.default}),o.default.memoize(g.prototype,"unitScale",!1)},function(t,e,n){"use strict";var r=n(10),o=n(11),i="[object AsyncFunction]",a="[object Function]",u="[object GeneratorFunction]",s="[object Proxy]";t.exports=function(t){if(!o(t))return!1;var e=r(t);return e==a||e==u||e==i||e==s}},function(t,e,n){"use strict";(function(e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="object"==(void 0===e?"undefined":n(e))&&e&&e.Object===Object&&e;t.exports=r}).call(e,n(30))},function(t,e,n){"use strict";var r=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){"use strict";var r=n(114),o=n(121),i=n(123),a=n(124),u=n(125);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){"use strict";var r=n(126),o=n(129),i=n(130),a=1,u=2;t.exports=function(t,e,n,s,c,l){var f=n&a,h=t.length,p=e.length;if(h!=p&&!(f&&p>h))return!1;var d=l.get(t);if(d&&l.get(e))return d==e;var y=-1,v=!0,g=n&u?new r:void 0;for(l.set(t,e),l.set(e,t);++y<h;){var b=t[y],m=e[y];if(s)var _=f?s(m,b,y,e,t,l):s(b,m,y,t,e,l);if(void 0!==_){if(_)continue;v=!1;break}if(g){if(!o(e,function(t,e){if(!i(g,e)&&(b===t||c(b,t,n,s,l)))return g.push(e)})){v=!1;break}}else if(b!==m&&!c(b,m,n,s,l)){v=!1;break}}return l.delete(t),l.delete(e),v}},function(t,e,n){"use strict";var r=n(49),o=n(54),i=n(26);t.exports=function(t){return i(t)?r(t):o(t)}},function(t,e,n){"use strict";var r=n(142),o=n(50),i=n(19),a=n(32),u=n(52),s=n(33),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),l=!n&&o(t),f=!n&&!l&&a(t),h=!n&&!l&&!f&&s(t),p=n||l||f||h,d=p?r(t.length,String):[],y=d.length;for(var v in t)!e&&!c.call(t,v)||p&&("length"==v||f&&("offset"==v||"parent"==v)||h&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||u(v,y))||d.push(v);return d}},function(t,e,n){"use strict";var r=n(143),o=n(12),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(t){return o(t)&&a.call(t,"callee")&&!u.call(t,"callee")};t.exports=s},function(t,e,n){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=9007199254740991,i=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var n=void 0===t?"undefined":r(t);return!!(e=null==e?o:e)&&("number"==n||"symbol"!=n&&i.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){"use strict";var r=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}},function(t,e,n){"use strict";var r=n(34),o=n(148),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){"use strict";t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){"use strict";var r=n(149),o=n(31),i=n(150),a=n(151),u=n(152),s=n(10),c=n(45),l=c(r),f=c(o),h=c(i),p=c(a),d=c(u),y=s;(r&&"[object DataView]"!=y(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=y(new o)||i&&"[object Promise]"!=y(i.resolve())||a&&"[object Set]"!=y(new a)||u&&"[object WeakMap]"!=y(new u))&&(y=function(t){var e=s(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case l:return"[object DataView]";case f:return"[object Map]";case h:return"[object Promise]";case p:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=y},function(t,e,n){"use strict";var r=n(58);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){"use strict";var r=n(9),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,n){"use strict";var r=n(60),o=n(158),i=n(159);t.exports=function(t,e){return i(o(t,e,r),t+"")}},function(t,e,n){"use strict";t.exports=function(t){return t}},function(t,e,n){"use strict";t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(18),i=n(26),a=n(52),u=n(11);t.exports=function(t,e,n){if(!u(n))return!1;var s=void 0===e?"undefined":r(e);return!!("number"==s?i(n)&&a(e,n.length):"string"==s&&e in n)&&o(n[e],t)}},function(t,e,n){"use strict";var r=n(10),o=n(12),i=n(167),a="[object DOMException]",u="[object Error]";t.exports=function(t){if(!o(t))return!1;var e=r(t);return e==u||e==a||"string"==typeof t.message&&"string"==typeof t.name&&!i(t)}},function(t,e,n){"use strict";t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e,n){"use strict";t.exports=/<%=([\s\S]+?)%>/g},function(t,e,n){"use strict";var r=n(176);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(10),i=n(12),a="[object Symbol]";t.exports=function(t){return"symbol"==(void 0===t?"undefined":r(t))||i(t)&&o(t)==a}},function(t,e,n){"use strict";var r=n(11),o=n(180),i=n(69),a="Expected a function",u=Math.max,s=Math.min;t.exports=function(t,e,n){var c,l,f,h,p,d,y=0,v=!1,g=!1,b=!0;if("function"!=typeof t)throw new TypeError(a);function m(e){var n=c,r=l;return c=l=void 0,y=e,h=t.apply(r,n)}function _(t){var n=t-d;return void 0===d||n>=e||n<0||g&&t-y>=f}function w(){var t=o();if(_(t))return x(t);p=setTimeout(w,function(t){var n=e-(t-d);return g?s(n,f-(t-y)):n}(t))}function x(t){return p=void 0,b&&c?m(t):(c=l=void 0,h)}function k(){var t=o(),n=_(t);if(c=arguments,l=this,d=t,n){if(void 0===p)return function(t){return y=t,p=setTimeout(w,e),v?m(t):h}(d);if(g)return p=setTimeout(w,e),m(d)}return void 0===p&&(p=setTimeout(w,e)),h}return e=i(e)||0,r(n)&&(v=!!n.leading,f=(g="maxWait"in n)?u(i(n.maxWait)||0,e):f,b="trailing"in n?!!n.trailing:b),k.cancel=function(){void 0!==p&&clearTimeout(p),y=0,c=d=l=p=void 0},k.flush=function(){return void 0===p?h:x(o())},k}},function(t,e,n){"use strict";var r=n(11),o=n(67),i=NaN,a=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return i;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=s.test(t);return n||c.test(t)?l(t.slice(2),n?2:8):u.test(t)?i:+t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){if(n instanceof Array)n.forEach(function(n){return t(e,n)});else{if(e.mixedIn=e.hasOwnProperty("mixedIn")?e.mixedIn:[],e.mixingIn=e.hasOwnProperty("mixingIn")?e.mixingIn:[],e.mixedIn.indexOf(n)>=0)return e;if(e.mixingIn.indexOf(n)>=0)throw new Error("found cyclic dependencies between "+e.mixingIn);e.mixingIn.push(n),n.call(e),e.mixingIn.pop(),e.mixedIn.push(n)}return e}},function(t,e,n){"use strict";function r(t){return t}function o(t){return Math.pow(t,2)}function i(t){return 1-Math.sin(Math.acos(t))}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:1.5};return Math.pow(t,2)*((e.x+1)*t-e.x)}function u(t){for(var e=0,n=1;;e+=n,n/=2)if(t>=(7-4*e)/11)return-Math.pow((11-6*e-11*t)/4,2)+Math.pow(n,2)}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:1.5};return Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e.x/3*t)}Object.defineProperty(e,"__esModule",{value:!0}),e.linear=r,e.quad=o,e.circ=i,e.back=a,e.bounce=u,e.elastic=s,e.default={linear:r,quad:o,circ:i,back:a,bounce:u,elastic:s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setShadow=function(t,e,n){var o=e.left,i=void 0===o?0:o,a=e.top,u=void 0===a?0:a,s=e.blurSize,c=void 0===s?0:s,l=e.color,f=void 0===l?"transparent":l,h=n.rootModel.get("scale")||r;t.shadowOffsetX=i*h.x,t.shadowOffsetY=u*h.y,t.shadowBlur=c*h.x,t.shadowColor=f},e.resetShadow=function(t){t.shadowColor="transparent"};var r={x:1,y:1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.intercept=function(t,e,n){var i=t.__lookupGetter__(e);if(!i)return void(0,o.error)(e+" is not defined in "+t.constructor.name);n?t.__defineGetter__(e,function(){return void 0===this.__cache__[e]&&(this.__cache__[e]=i.call(this)),r.clone(this.__cache__[e])}):t.__defineGetter__(e,function(){return void 0===this.__cache__[e]&&(this.__cache__[e]=i.call(this)),this.__cache__[e]})},e.reset=function(t){t.__cache__={}},e.clear=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];0==n.length?t.__cache__={}:n.forEach(function(e){return delete t.__cache__[e]})};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),o=n(1)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.duration,n=void 0===e?1e3:e,r=(t.delay,t.step),o=t.delta,a=t.ease,u=t.options,s=t.repeat,c=void 0!==s&&s;"string"==typeof o&&(o=i.default[o]);"out"==a?o=function(t,e){return function(n){return 1-t(1-n,e)}}(o,u):"inout"==a&&(o=function(t,e){return function(n){return n<.5?t(2*n,e)/2:(2-t(2*(1-n),e))/2}}(o,u));var l=!1;return{start:function(){var t=this;if(l)return this;l=!0;var e=0;return requestAnimationFrame(function i(){if(!l)return;0==e&&(e=performance.now());var a=(performance.now()-e)/n,s=c?a%1:Math.min(a,1);r(o(s,u)),!(a>=1)||c&&l||(t.stop(),e=0);l&&requestAnimationFrame(i)}),this},stop:function(){return l=!1,this}}};var r,o=n(71),i=(r=o)&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.createCanvas=void 0,e.createElement=void 0;"undefined"==typeof document?e.createCanvas=function(t,e){return new Canvas(t,e)}:e.createCanvas=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n}},function(t,e,n){"use strict";function r(t,e,n){if(e.length<2)return e;for(var r=2;r<e.length;r++){var o=e.substring(0,r);if(!(t.measureText(o).width<n))break}return e.substring(0,r-1)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,o){var i=String(e).split("\n");return o?[].concat.apply([],i.map(function(e){return function(t,e,n){var o,i,a=e.split(" "),u=[],s=[];for(o=0,i=1;i<=a.length;i++)if(s=a.slice(o,i),t.measureText(s.join(" ")).width>n){if(i-o==1){var c=r(t,s[0],n);u.push([c]),a.splice(o,1,c,s[0].substring(c.length))}else{for(;""==a[i-1];)i++;u.push(a.slice(o,--i))}o=i}i-o>1&&u.push(s);0==u.length&&u.push([""]);return u}(t,e,n)})):i.map(function(t){return t.split(" ")})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.substitute=function(t){var e=this;if(!t)return;var n=String(t),o=(n.match(/#{(\S*)}/gi)||[]).map(function(t){return i(t)}),a=(n.match(/\${[^}]*}/gi)||[]).map(function(t){return i(t)});if(0==o.length&&0==a.length)return n;var u=n;return o.forEach(function(t){var n=(0,r.objToVal)(t.accessor(e.getState(t.target)));u=u.replace(t.match,void 0===n?"":n)}),a.forEach(function(t){var n=e.root.findById(t.target),o=(0,r.objToVal)(t.accessor(n&&n.data));u=u.replace(t.match,void 0===o?"":o)}),u},e.buildSubstitutor=function(t,e){if(!t)return;var n=String(t),o=(n.match(/#{(\S*)}/gi)||[]).map(function(t){return i(t)}),a=(n.match(/\${[^}]*}/gi)||[]).map(function(t){return i(t)});if(0==o.length&&0==a.length)return;return function(){var t=n;return o.forEach(function(n){var o=(0,r.objToVal)(n.accessor(e.getState(n.target)));t=t.replace(n.match,void 0===o?"":o)}),a.forEach(function(n){var o=e.root.findById(n.target),i=(0,r.objToVal)(n.accessor(o&&o.data));t=t.replace(n.match,void 0===i?"":i)}),t}};var r=n(3),o=function(t){return t};function i(t){var e=t.substr(2,t.length-3).trim().replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split(".").filter(function(t){return!!t.trim()}),n=e.slice(1);return{match:t,target:e[0],accessor:n.length>0?function(t){return n.reduce(function(t,e){return t?t[e]:void 0},t)}:o}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0};var i=new Image;i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAclBMVEVHcEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC0BbqFAAAAJXRSTlMAgAP3VSI6/g9fBk5FavJsMrariSjzPnO1enRRL5SMhmOOWB9keFTE0wAAANxJREFUOMutk9kWgyAMRLFuiLjUtdp9yf//YglVsQXz1HniMPcEMgHGvpX2O0Ypi+EgCL+IAShC+wB7QfubRDT7AFcnUPoLMLiP4PyJbsb55i05AgnR5iaQDsICgtH0cotBWoAP1c7kC6kFxEseCfZfB6gEgbNeBrira2QmH1uVYCXlA3is8UmgUCPIyQJKEmu8QtQJN0e9DPXVpzG2G216c1CqRmcBOdxXk07sWUSPv07zo0amCNQycv+NzmR6cRcwmfbuI7p2nZ/z4be0P83Foz6vIkhfZXr82XgDlZsspIq4peUAAAAASUVORK5CYII=",e.default=function(t){return function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,t),r(n,[{key:"postrender",value:function(t){o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"postrender",this).call(this,t),this.app.isEditMode&&this._focused&&this.showMoveHandle&&this._draw_move_handle(t)}},{key:"_draw_move_handle",value:function(t){var e=this.bounds,n=e.left,r=e.top,o=e.width;t.save(),t.beginPath(),t.rect(n+o,r,25,25);t.fillStyle="rgba(235, 235, 235, 1)",t.strokeStyle="#333",t.fill(),t.stroke(),t.drawImage(i,n+o+3.75,r+3.75,17.5,17.5),t.closePath(),t.restore()}},{key:"contains",value:function(t,e){var r=o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"contains",this).call(this,t,e);if(this.app.isViewMode)return r;var i=this.bounds,a=i.left,u=i.top,s=i.width,c=(i.height,a+s);return this.showMoveHandle&&(r=r||t<Math.max(c+25,c)&&t>Math.min(c+25,c)&&e<Math.max(u+25,u)&&e>Math.min(u+25,u)),this._focused=!!r,this.invalidate(),r}}]),n}()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){var i=r.Component.register(e.type);if(!i)return(0,o.warn)("Class not found",e.type),null;var a=new i(e,n);e.components&&a.isContainer()&&(e.components.forEach(function(e){var r=t(e,n);r&&a.addComponent(r)}),delete e.components);a.created();return a};var r=i(n(80)),o=(i(n(242)),n(1));function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);Object.defineProperty(e,"Component",{enumerable:!0,get:function(){return T(r).default}});var o=n(8);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return T(o).default}});var i=n(42);Object.defineProperty(e,"RootContainer",{enumerable:!0,get:function(){return T(i).default}});var a=n(5);Object.defineProperty(e,"Shape",{enumerable:!0,get:function(){return T(a).default}});var u=n(81);Object.defineProperty(e,"Line",{enumerable:!0,get:function(){return T(u).default}});var s=n(37);Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return T(s).default}});var c=n(82);Object.defineProperty(e,"Rect",{enumerable:!0,get:function(){return T(c).default}});var l=n(226);Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return T(l).default}});var f=n(227);Object.defineProperty(e,"Polyline",{enumerable:!0,get:function(){return T(f).default}});var h=n(83);Object.defineProperty(e,"Ruler",{enumerable:!0,get:function(){return T(h).default}});var p=n(228);Object.defineProperty(e,"ImageView",{enumerable:!0,get:function(){return T(p).default}});var d=n(229);Object.defineProperty(e,"AudioPlayer",{enumerable:!0,get:function(){return T(d).default}});var y=n(230);Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return T(y).default}});var v=n(28);Object.defineProperty(e,"Group",{enumerable:!0,get:function(){return T(v).default}});var g=n(231);Object.defineProperty(e,"LocalRef",{enumerable:!0,get:function(){return T(g).default}});var b=n(232);Object.defineProperty(e,"GlobalRef",{enumerable:!0,get:function(){return T(b).default}});var m=n(84);Object.defineProperty(e,"InfoWindow",{enumerable:!0,get:function(){return T(m).default}});var _=n(233);Object.defineProperty(e,"HTMLOverlayElement",{enumerable:!0,get:function(){return T(_).default}});var w=n(234);Object.defineProperty(e,"HTMLOverlayContainer",{enumerable:!0,get:function(){return T(w).default}});var x=n(235);Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return T(x).default}});var k=n(236);Object.defineProperty(e,"Triangle",{enumerable:!0,get:function(){return T(k).default}});var O=n(237);Object.defineProperty(e,"Donut",{enumerable:!0,get:function(){return T(O).default}});var P=n(238);Object.defineProperty(e,"Star",{enumerable:!0,get:function(){return T(P).default}});var A=n(239);Object.defineProperty(e,"Variable",{enumerable:!0,get:function(){return T(A).default}});var E=n(4);Object.defineProperty(e,"RectPath",{enumerable:!0,get:function(){return T(E).default}});var j=n(240);Object.defineProperty(e,"ValueHolder",{enumerable:!0,get:function(){return T(j).default}});var M=n(241);Object.defineProperty(e,"DataSource",{enumerable:!0,get:function(){return T(M).default}});var S=n(78);function T(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"MoveHandle",{enumerable:!0,get:function(){return T(S).default}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),a=(r=i)&&r.__esModule?r:{default:r},u=n(224);var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"isLine",value:function(){return!0}},{key:"render",value:function(t){var e=this.model,n=e.begin,r=void 0===n?"none":n,o=e.end,i=void 0===o?"none":o,a=e.lineWidth,s=this.drawPath;(0,u.drawEndTips)(t,s,this.model),t.beginPath();var c=(0,u.getTipNeckPos)(r,a,s[0],s[1]),l=(0,u.getTipNeckPos)(i,a,s[s.length-1],s[s.length-2]);t.moveTo(c.x,c.y);for(var f=1;f<s.length-1;f++)t.lineTo(s[f].x,s[f].y);t.lineTo(l.x,l.y),this.drawStroke(t)}},{key:"contains",value:function(t,e){var n=this.model.lineWidth;return(0,u.containedInPath)(t,e,this.drawPath,n)}},{key:"drawPath",get:function(){return this.path}},{key:"resizable",get:function(){return!1}},{key:"mutable",get:function(){return!0}},{key:"rotatable",get:function(){return!1}},{key:"path",get:function(){var t=this.model;return[{x:t.x1,y:t.y1},{x:t.x2,y:t.y2}]},set:function(t){var e=t[0],n=t[1];this.set({x1:e.x,y1:e.y,x2:n.x,y2:n.y})}}]),e}();e.default=s,s.getTipNeckPos=u.getTipNeckPos,s.containedInPath=u.containedInPath,s.drawEndTips=u.drawEndTips,a.default.memoize(s.prototype,"path",!1),a.default.register("line",s)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=u(n(0)),i=u(n(5)),a=u(n(4));function u(t){return t&&t.__esModule?t:{default:t}}var s={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"round",name:"round",property:"round"}]},c={ondragmove:function(t,e,n){var r=n.model,o=r.left,i=(r.top,r.width),a=r.height,u=(n.transcoordP2S(t.x,t.y).x-o)/(i/2)*100;u=l(u,i,a),n.set({round:u})}};function l(t,e,n){var r=e>n?n/e*100:100;return t>=r?t=r:t<=0&&(t=0),t}var f=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,a.default)(i.default)),r(e,[{key:"is3dish",value:function(){return!0}},{key:"render",value:function(t){var e=this.model.round,n=void 0===e?0:e,r=this.bounds,o=r.left,i=r.top,a=r.width,u=r.height;t.translate(o,i),t.beginPath();var s=(n=l(n,a,u))/100*(a/2);t.moveTo(s,0),t.arcTo(a,0,a,u,s),t.arcTo(a,u,0,u,s),t.arcTo(0,u,0,0,s),t.arcTo(0,0,a,0,s),t.translate(-o,-i)}},{key:"controls",get:function(){var t=this.model,e=t.left,n=t.top,r=t.width,o=t.round,i=t.height;return[{x:e+r/2*((o=void 0==o?0:l(o,r,i))/100),y:n,handler:c}]}},{key:"nature",get:function(){return s}}]),e}();e.default=f,o.default.register("rect",f)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=u(n(0)),i=u(n(5)),a=u(n(4));!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(2));function u(t){return t&&t.__esModule?t:{default:t}}var s=[1,2,10,20,50,50,50,50,50,50],c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,a.default)(i.default)),r(e,[{key:"render",value:function(t){var e=this.model,n=e.lineWidth,r=void 0===n?1:n,o=e.fillStyle,i=void 0===o?"lightgray":o,a=e.font,u=void 0===a?"15px Arial":a,c=e.left,l=e.top,f=(e.rotation,e.origin),h=(e.margin,e.width),p=e.height,d=e.side,y=void 0===d?"bottom":d,v=e.strokeStyle,g=void 0===v?"#000000":v,b=e.scale,m=void 0===b?1:b;t.translate(c,l),t.beginPath();var _=Math.round(r/2);t.rect(-_,-_,h+2*_,p+2*_),t.clip(),t.beginPath(),t.rect(0,0,h,p),i&&(t.fillStyle=i,t.fill()),t.lineWidth=r,t.strokeStyle=g,t.stroke(),t.beginPath(),t.font=u;var w="bottom"!==y,x=w?0:p,k=4*p/5,O=2*p/3,P=1*p/2,A=3*p/5;w&&(k=p-k,O=p-O,P=p-P,A=p-1.5*p/5);var E=m*this.app.PPM/this.root.unitScale,j=Math.ceil(f/E),M=this.app.PPM/E,S=M<=1.1?1:s[Math.round(M)]||100;1!=S&&(j+=(S-j%S)%S);var T=Math.ceil(j*E),C=f+h;for(t.fillStyle=g;T<C;){if(j%10==0){t.moveTo(T-f,P),t.lineTo(T-f,x);var R=(j/10).toString(),I=t.measureText(R);t.fillText(R,T-f-I.width-6,A)}else j%5==0?(t.moveTo(T-f,O),t.lineTo(T-f,x)):(t.moveTo(T-f,k),t.lineTo(T-f,x));j+=S,T=Math.ceil(j*E)}}}]),e}();e.default=c,o.default.register("ruler",c)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=s(n(0)),i=s(n(5)),a=s(n(4)),u=n(2);function s(t){return t&&t.__esModule?t:{default:t}}var c={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"textarea",label:"front-side-template",name:"frontSideTemplate",property:{language:"html"}},{type:"textarea",label:"back-side-template",name:"backSideTemplate",property:{language:"html"}},{type:"textarea",label:"style",name:"style",property:{language:"css"}}]};function l(t,e){var n=t.split(/\s+/),r=n.indexOf(e);return-1!=r?n.splice(r,1):n.splice(-1,0,e),n.join(" ")}var f=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,a.default)(i.default)),r(e,[{key:"dispose",value:function(){var t=this;this.infoWindows.map(function(t){return t.component}).forEach(function(e){return t._removeInfoWindow(e)}),function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispose",this).call(this)}},{key:"_findInfoWindowByComponent",value:function(t){return this.infoWindows.find(function(e){return e.component===t})}},{key:"_addInfoWindow",value:function(t,e,n){this._findInfoWindowByComponent(t)||this._windows.push({component:t,window:e,styleElement:n})}},{key:"_removeInfoWindow",value:function(t){var e=this._findInfoWindowByComponent(t);if(e){var n=e.window;n&&n.parentNode.removeChild(n);var r=this.infoWindows.lastIndexOf(e);this.infoWindows.splice(r,1)}}},{key:"render",value:function(t){var n=this.bounds,r=n.left,o=n.top,i=n.width,a=n.height;t.beginPath(),t.drawImage(e.image,r,o,i,a)}},{key:"infoWindows",get:function(){return this._windows||(this._windows=[]),this._windows}},{key:"hasTextProperty",get:function(){return!1}},{key:"nature",get:function(){return c}}],[{key:"hide",value:function(t,e){if(e){var n=t.root.findById(e);n?n._removeInfoWindow(t):console.warn("InfoWindow Not Found.",e)}}},{key:"show",value:function(t,n,r){if(n){var i=t.root.findById(n);if(i){if(!i._findInfoWindowByComponent(t)){var a=i.model,s=a.frontSideTemplate,c=void 0===s?"":s,f=a.backSideTemplate,h=[c,void 0===f?"":f].filter(function(t){return String(t).trim()});if(0!=(h=h.map(function(t){return o.default.template(function(t,e,n){return(e||n?['<div class="info-window-btns">',e?'<button class="closable">&#88</button>':"",n?'<button class="flipable">&#8652</button>':"","</div>"]:[]).concat(['<div class="info-window-content">',t,"</div>"]).join("")}(t,!r,2==h.length))})).length){var p='\n.flip {\n  backface-visibility:             hidden;\n      -moz-backface-visibility:    hidden;\n      -ms-backface-visibility:     hidden;\n      -o-backface-visibility:      hidden;\n      -webkit-backface-visibility: hidden;\n  border-radius: 7px;\n  height: auto;\n  font: normal 14px helvetica, arial, san serif;\n  position: absolute;\n  opacity:.9;\n  transform-origin:             50% 50% 0px;\n      -moz-transform-origin:    50% 50% 0px;\n      -ms-transform-origin:     50% 50% 0px;\n      -o-transform-origin:      50% 50% 0px;\n      -webkit-transform-origin: 50% 50% 0px;\n  transition: all 2s;\n      -moz-transition:    all 2s;\n      -ms-transition:     all 2s;\n      -o-transition:      all 2s;\n      -webkit-transition: all 2s;\n  min-width: 100px;min-height:50px;\n  background-color:#3e424e;\n  box-shadow: 2px 3px 2px 0px rgba(0,0,0,0.15);\n}\n\n#side-1 {\n  transform:             rotateY( 0deg );\n      -moz-transform:    rotateY( 0deg );\n      -ms-transform:     rotateY( 0deg );\n      -o-transform:      rotateY( 0deg );\n      -webkit-transform: rotateY( 0deg );\n}\n.flip:after{\n   content:"";\n   display:block;\n   position: absolute;\n   opacity:.9;\n   width: 0;\n   height: 0;\n}\n.flip.arrow-top:after{\n   left:45%;\n   top:-17px;\n   border-left:10px solid transparent;\n   border-bottom:18px solid #323b44;\n   border-right:10px solid transparent;\n}\n.flip.arrow-right:after{\n   left:100%;\n   top:48%;\n   border-top:10px solid transparent;\n   border-left:18px solid #323b44;\n   border-bottom:10px solid transparent;\n}\n.flip.arrow-bottom:after{\n   left:45%;\n   top:100%;\n   border-left:10px solid transparent;\n   border-top:18px solid #323b44;\n   border-right:10px solid transparent;\n}\n.flip.arrow-left:after{\n   right:100%;\n   top:48%;\n   border-top:10px solid transparent;\n   border-right:18px solid #323b44;\n   border-bottom:10px solid transparent;\n}\n\n#side-2 {\n  transform:             rotateY( 180deg );\n      -moz-transform:    rotateY( 180deg );\n      -ms-transform:     rotateY( 180deg );\n      -o-transform:      rotateY( 180deg );\n      -webkit-transform: rotateY( 180deg );\n}\n\n.flip-side-1 {\n  transform:             rotateY( 0deg ) !important;\n      -moz-transform:    rotateY( 0deg ) !important;\n      -ms-transform:     rotateY( 0deg ) !important;\n      -o-transform:      rotateY( 0deg ) !important;\n      -webkit-transform: rotateY( 0deg ) !important;\n}\n\n.flip-side-2 {\n  transform:             rotateY( 180deg ) !important;\n      -moz-transform:    rotateY( 180deg ) !important;\n      -ms-transform:     rotateY( 180deg ) !important;\n      -o-transform:      rotateY( 180deg ) !important;\n      -webkit-transform: rotateY( 180deg ) !important;\n}\n\n.info-window-btns{\n  position:absolute;\n  top:-7px;\n  right:5px;\n  overflow:hidden;\n}\n.info-window-content{\n  padding:10px;\n  color:#efefef;\n  font-size:13px;\n  line-height:1.4;\n}\n.info-window-btns button{\n  width:20px;height:20px;\n  float:right;\n  border:0;\n  border-radius:12px;\n  background-color:#2a7da1;\n  margin-right:3px;padding:2px 4px;\n  text-align:center;\n  cursor:pointer;\n  font-size:12px;\n  color:#fff\n}\n.info-window-btns button:hover{\n  background-color:#60bb23;\n}\n'+i.get("style"),d=t.bounds,y=d.left,v=d.top,g=d.width,b=d.height,m=document.createElement("span");m.style.position="absolute";var _=document.createElement("style");if(_.type="text/css",_.styleSheet?_.styleSheet.cssText=p:_.appendChild(document.createTextNode(p)),m.appendChild(_),h[0]){var w=document.createElement("div");w.id="side-1",w.className="flip",w.style.display="inline-block",w.innerHTML=h[0](t)}if(h[1]){var x=document.createElement("div");x.id="side-2",x.className="flip",x.style.display="inline-block",x.innerHTML=h[1](t)}u.GESTURES.forEach(function(t){m.addEventListener(t,function(t){t.stopPropagation()})}),u.KEYEVENTS.forEach(function(t){m.addEventListener(t,function(t){t.stopPropagation()})});var k=t.root.model_layer.overlay;if(w&&m.appendChild(w),x&&m.appendChild(x),k.appendChild(m),i._addInfoWindow(t,m,_),w){var O=w.querySelector(".info-window-btns > .flipable");O&&O.addEventListener("click",function(t){t.preventDefault(),x.className=l(x.className,"flip-side-1"),w.className=l(w.className,"flip-side-2")},!1);var P=w.querySelector(".info-window-btns > .closable");P&&P.addEventListener("click",function(r){r.preventDefault(),e.hide(t,n)},!1)}if(x){var A=x.querySelector(".info-window-btns > .flipable");A&&A.addEventListener("click",function(t){t.preventDefault(),x.className=l(x.className,"flip-side-1"),w.className=l(w.className,"flip-side-2")},!1);var E=x.querySelector(".info-window-btns > .closable");E&&E.addEventListener("click",function(r){r.preventDefault(),e.hide(t,n)},!1)}var j=w.offsetWidth,M=w.offsetHeight,S=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,t.rootModel.target.getBoundingClientRect()),T=[];w&&T.push(w),x&&T.push(x);var C={x:y+g/2,y:v},R=t.transcoordS2C(C.x+j/2,C.y);if(R.x+S.left<S.right){if(M+20<R.y)return m.style.marginLeft=C.x-j/2+"px",m.style.marginTop=C.y-M-20+"px",void T.forEach(function(t){return t.className+=" arrow-bottom"});if(C={x:y+g/2,y:v+b},R=t.transcoordS2C(C.x+j/2,C.y+M+20),S.bottom>R.y+S.top)return m.style.marginLeft=C.x-j/2+"px",m.style.marginTop=C.y+20+"px",void T.forEach(function(t){return t.className+=" arrow-top"})}if(C={x:y,y:v+b/2},(R=t.transcoordS2C(C.x-j-20,C.y+M)).x>S.left)return m.style.marginLeft=C.x-j-20+"px",m.style.marginTop=C.y-M/2+"px",void T.forEach(function(t){return t.className+=" arrow-right"});C={x:y+g,y:v+b/2},m.style.marginLeft=C.x+20+"px",m.style.marginTop=C.y-M/2+"px",T.forEach(function(t){return t.className+=" arrow-left"})}}}else console.warn("InfoWindow Not Found.",n)}else console.warn("InfoWindow not defined.")}},{key:"image",get:function(){return e._image||(e._image=new Image,e._image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAY1BMVEVHcEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADIAbxiAAAAIHRSTlMA+gPshCwwWFzYCeLRm7QRG6rLeDZI9JOJJDtjb1HAf1sAT80AAAQQSURBVHhe7MCBAAAAAMKw/KkzOMG2BAAAAKeu3lUohIEggO7jQi5qHqpgwML5/6+0F0y02z31FlvMMLKt86QMQ1ined2Evih1hFFjLfRWjgzDOGZ6JSiM00B9EuHALtQxJLiQBmqSBCeSUEuEGzs1BDjSaHxWOKK5Eyz/4SoMV/hp4+vtcPkdwZD/udwevNg7t1xXYRiKmkB7C+ENlPLq8fxHeX+RGjWQ1D45ldcIulBIvCvYJGBEadyTzxAcfY57NBjpLScOO/bzugcTHe7IMwiSLMcdHZhocMcMgTLjjgZM7F1bCJZ2v27ARGzYDwIk2Z+JYGJ/iiwQLMv+JAEThjkmRG64Q0Q+gIiIiIiIiIiIyFy0KRFt0bOJZAWSUigmkQaJaXhENiRnYBEpkZySRSRGcmIWEaQnYhHRSI5mESmQnIJFZIqQmGhiEYEbEnPjGlEGjYTogW/WUkOXENENSqZfEXmDiIiIiIiIiIiIiIiIiIiImq5ETIpRpBpjJCMeKy6Ri0ZS9MQjkmkkJs1YRDokp2MRyZGclkUkQnIiEQltaX3Lzb6yiGTpl2y/avqSAxGgelCOKI+Kc2isL0TUSsZ4EREREREREREREREREREREfnIQzXrNWSRTeNxnlOwIgueIr6AAyE+CpiqMEUK71IDO4E+LluEKYKnKcMUifEsTZgiJZ5lDVNkwJPcqzBFoPF/HplfxL/w6b4EPGv1h18Weya1TL8iIiIeiIiIiIiIiEjkPefxV+5YA9PPHylB+u5aqgZ39H+jKOxrqtu+pkzvr9YbzoZ6w2OFkzcrA3yE4WZlSSyFk54VoA/wR43+FaD+r9w32QdWvgvjp2ty2xq8qHPHmtyPFxfrK3hw1ejERlAlfR/Ame2OTow05d4rOLLSlHtDVhI0uRO01JeZ405op6zgNNXT+bIRfpIgn+AkU4pOxBscohojdCHu4RRzjC5EYwVHqRONDkSnEvK/CB3QSU32IRW3ZPnj9iEVoGCNTLVrh8ia1x+6wq8xvB5mz8pxu7oPwIn9lcR0AiuX1+1KX+BXqdvXzWsAC0NsGjzZsS/2Bd6yRA5RgIHkXNhSD3whASZ8rrB9mItuEAizac0fDlHxDMEwpQfD1tW4y3Hjfy5s9nOHH3uwWA+EqEJBWCjoTL/S5toBB/7hu6zer74NgqSP39zJU+qQX3ix763mHTqvIVRUVprCljlElRkEjBqNYevH8veBJ2xhiyhE8YctmhDFH7ZoQhR/2KIJUfxhiyRE8YctmhDFH7ZoQhR/2OIJUfxhC9Ppf/t1jgJACERRsHGyYRZB0Ujvf0xD8w6kP7y6RZmgf/oTFTtbbzJVxZWo2Nlqw6TVy5GowNl6ssm7v50obamfSxQAAAAAAAsKLM15fb3vpQAAAABJRU5ErkJggg=="),e._image}}]),e}();e.default=f,o.default.register("info-window",f)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(35),a=(r=i)&&r.__esModule?r:{default:r};e.default=function(t){return function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,t),o(n,[{key:"isHTMLElement",value:function(){return!0}},{key:"setElementProperties",value:function(t){throw new Error("Not Implemented Yet")}},{key:"createElement",value:function(){this.element=document.createElement(this.tagName),this.element&&(this.parent.isHTMLElement()?this.parent.element.appendChild(this.element):this.root.model_layer.overlay.appendChild(this.element),this.oncreate_element&&this.oncreate_element(this.element))}},{key:"reposition",value:function(){this.element&&(0,a.default)(this)}},{key:"disposeElement",value:function(){var t=this.element;t&&t.parentElement&&t.parentElement.removeChild(t),delete this.element}},{key:"ready",value:function(){!this.element&&this.createElement(),this.setElementProperties(this.element),this.reposition()}},{key:"added",value:function(){this.element&&(this.parent.isHTMLElement()?this.parent.element.appendChild(this.element):this.root.model_layer.overlay.appendChild(this.element),this.reposition())}},{key:"dispose",value:function(){this.disposeElement(this),function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0}(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"onchange",value:function(t,e){this.element&&this.setElementProperties(this.element),this.reposition()}},{key:"isDescendible",value:function(t){return t.isHTMLElement()}},{key:"element",get:function(){return this._element},set:function(t){this._element=t}},{key:"tagName",get:function(){return this.get("type")}},{key:"hasTextProperty",get:function(){return!0}},{key:"textHidden",get:function(){return!0}}]),n}()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hide=y,e.show=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},v=n.data,g=n.location,b=void 0===g?o:g,m=t.app.refProvider;m&&m.get(e,!0).then(function(e){var n=document.createElement("div");n.style.position="absolute",n.style.display="inline-block",n.innerHTML=l;var g=n.querySelector(".popup-content"),m=e.root.model,_=m.width,w=m.height;g.style.width=_+"px",g.style.height=w+"px";var x=document.createElement("style");x.type="text/css",x.styleSheet?x.styleSheet.cssText=f:x.appendChild(document.createTextNode(f)),n.appendChild(x),r.GESTURES.forEach(function(t){n.addEventListener(t,function(t){t.stopPropagation()})}),r.KEYEVENTS.forEach(function(t){n.addEventListener(t,function(t){t.stopPropagation()})});var k=t.root.model_layer.overlay;k.appendChild(n),function(t,e,n){d(t),p.set(t,{div:e,scene:n})}(t.root,n,e),n.querySelector(".closable").addEventListener("click",function(e){e.preventDefault(),y(t.root)},!1),e.target=g,e.data=v||t.data,e.fit("both");var O=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o,l=t.bounds,f=e.bounds,p=Math.max(l.width/4-f.width/2,h),d=Math.min(3*l.width/4+f.width/2,l.width-h)-f.width,y=Math.max(l.height/4-f.height/2,h),v=Math.min(3*l.height/4+f.height/2,l.height-h)-f.height;switch(r){case c:return{x:n.x<l.width/2?d:p,y:n.y<l.height/2?v:y};case i:return{x:p,y:y};case a:return{x:d,y:y};case u:return{x:p,y:v};case s:return{x:d,y:v};case o:default:return{x:(l.width-f.width)/2,y:(l.height-f.height)/2}}}(t.rootModel,e.root,t.center,b);n.style.left=O.x+"px",n.style.top=O.y+"px"},function(t){console.error("cannot fetch board: "+e,t)})};var r=n(2),o="center",i="left-top",a="right-top",u="left-bottom",s="right-bottom",c="auto",l='\n<div class="popup-content">\n</div>\n<button class="closable">&#88</button>\n',f="\nbutton.closable {\n  width: 20px;\n  height: 20px;\n  right: 0px;\n  top: 0px;\n  padding: 0;\n  margin: 0;\n  border: 0px;\n  text-align: center;\n  cursor: pointer;\n  font-size: 12px;\n  color: black;\n  position: absolute;\n  background-color: transparent;\n}\n\nbutton.closable:hover {\n  background-color:#60bb23;\n}\n",h=20,p=new WeakMap;function d(t){var e=p.get(t);if(e){var n=e.div.parentNode;n&&n.removeChild(e.div);var r=e.scene;r.target=null,r.release(),p.delete(t)}}function y(t){d(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.params=Object.assign({},e)}return r(t,[{key:"excute",value:function(){}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=(0,a.clone)(t.hierarchy);void 0!==e.id&&delete e.id;return(0,i.default)(e,t.app)};var r,o=n(79),i=(r=o)&&r.__esModule?r:{default:r},a=n(3)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(271)),i=u(n(74)),a=u(n(285));function u(t){return t&&t.__esModule?t:{default:t}}var s=new WeakSet,c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._container=e,this.app=e.app,this._commander=new a.default(this._container),this.app.commander=this._commander,s.add(this)}return r(t,null,[{key:"residents",get:function(){return s}}]),r(t,[{key:"play",value:function(){o.play.apply(this._container,arguments)}},{key:"add",value:function(){return o.add.apply(this._container,arguments)}},{key:"duplicate",value:function(){return o.duplicate.apply(this._container,arguments)}},{key:"remove",value:function(){return o.remove.apply(this._container,arguments)}},{key:"animate",value:function(){return i.default.apply(this,arguments)}},{key:"fullscreen",value:function(){return o.fullscreen.apply(this._container,arguments)}},{key:"variable",value:function(t,e){return this._container.variable.apply(this._container,arguments)}},{key:"resize",value:function(){this._container.resize()}},{key:"dispose",value:function(){this._commander&&this._commander.dispose(),this._container&&this._container.dispose()}},{key:"select",value:function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return this._container.selected=(e=this.root).findAll.apply(e,[t].concat(r)),this.selected}},{key:"undo",value:function(){this.commander.undo()}},{key:"redo",value:function(){this.commander.redo()}},{key:"cut",value:function(){return o.cut.apply(this._container,arguments)}},{key:"copy",value:function(){return o.copy.apply(this._container,arguments)}},{key:"paste",value:function(){return o.paste.apply(this._container,arguments)}},{key:"undoableChange",value:function(){return o.undoableChange.apply(this._container,arguments)}},{key:"change",value:function(){return o.change.apply(this.root,arguments)}},{key:"findAll",value:function(){return this.root.findAll.apply(this.root,arguments)}},{key:"findFirst",value:function(){return this.root.findFirst.apply(this.root,arguments)}},{key:"findById",value:function(){return this._container.findById.apply(this._container,arguments)}},{key:"serialize",value:function(){return this.root.trim(),this.root.serialize.apply(this.root,arguments)}},{key:"align",value:function(){return o.align.apply(this._container,arguments)}},{key:"distribute",value:function(){return o.distribute.apply(this._container,arguments)}},{key:"zorder",value:function(){return o.zorder.apply(this._container,arguments)}},{key:"symmetryX",value:function(){return o.symmetryX.apply(this._container,arguments)}},{key:"symmetryY",value:function(){return o.symmetryY.apply(this._container,arguments)}},{key:"on",value:function(){return o.on.apply(this._container,arguments)}},{key:"once",value:function(){return o.once.apply(this._container,arguments)}},{key:"off",value:function(){return o.off.apply(this._container,arguments)}},{key:"toDataURL",value:function(){return o.toDataURL.apply(this._container,arguments)}},{key:"group",value:function(){return o.group.apply(this._container,arguments)}},{key:"ungroup",value:function(){return o.ungroup.apply(this._container,arguments)}},{key:"fit",value:function(t){var e=this;this._container.once("redraw",function(){return e._container.fit(t)}),this._container.invalidate()}},{key:"target",get:function(){return this._container.target_element},set:function(t){var e;if("string"==typeof t){if(!(e=document.getElementById(t)))throw"target element '"+t+"' is not exist";if(e.firstChild)throw"target element '"+t+"' already has children"}else e=t;e&&e.style&&(e.style.cursor="default"),this._container.target_element=e,this._container.invalidate()}},{key:"scale",get:function(){return this.root.get("scale")},set:function(t){this.root.set("scale",t)}},{key:"translate",get:function(){return this.root.get("translate")},set:function(t){this.root.set("translate",t)}},{key:"unit",get:function(){return this.root.get("unit")||"px"}},{key:"PPM",get:function(){return this.app.PPM}},{key:"PPI",get:function(){return this.app.PPI}},{key:"DPPX",get:function(){return this.app.DPPX}},{key:"unitScale",get:function(){return this._container.unitScale}},{key:"screen",get:function(){return this.app.screen},set:function(t){this.app.screen=t,this._container.resize()}},{key:"selected",get:function(){return this._container.selected.slice()}},{key:"commander",get:function(){return this._commander}},{key:"model",get:function(){return this.root.hierarchy},set:function(t){this._container.rebuildContentModel(t)}},{key:"root",get:function(){return this._container.model_layer}},{key:"mode",get:function(){return this.app.mode},set:function(t){void 0!==t&&(this.app.mode=t)}},{key:"ids",get:function(){return o.getIds.apply(this._container)}},{key:"data",set:function(t){this._container.data=t},get:function(){return this._container.data}},{key:"variables",get:function(){return o.getVariables.apply(this._container)},set:function(t){o.setVariables.apply(this._container,[t])}}]),t}();e.default=c},function(t,e,n){"use strict";(function(r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(91));e.default=o,"undefined"!=typeof window&&(window.scene=o),void 0!==r&&(r.scene=o),e.default=o,t.exports=e.default}).call(e,n(30))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FPS=e.version=e.license=e.Scene=e.ScriptLoader=e.ReferenceMap=e.EventMap=e.Layer=e.Model=e.create=e.config=e.polyfill=void 0;var r=n(92);Object.defineProperty(e,"polyfill",{enumerable:!0,get:function(){return m(r).default}});var o=n(41);Object.defineProperty(e,"config",{enumerable:!0,get:function(){return o.config}});var i=n(93);Object.defineProperty(e,"create",{enumerable:!0,get:function(){return m(i).default}});var a=n(14);Object.defineProperty(e,"Layer",{enumerable:!0,get:function(){return m(a).default}});var u=n(29);Object.defineProperty(e,"EventMap",{enumerable:!0,get:function(){return m(u).default}});var s=n(2);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})});var c=n(80);Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})});var l=n(36);Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})});var f=n(288);Object.defineProperty(e,"ReferenceMap",{enumerable:!0,get:function(){return m(f).default}});var h=n(289);Object.defineProperty(e,"ScriptLoader",{enumerable:!0,get:function(){return m(h).default}});var p=n(1);Object.keys(p).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return p[t]}})});var d=n(89);Object.defineProperty(e,"Scene",{enumerable:!0,get:function(){return m(d).default}});var y=n(38);Object.defineProperty(e,"license",{enumerable:!0,get:function(){return y.license}});var v=n(290);Object.defineProperty(e,"version",{enumerable:!0,get:function(){return m(v).default}});var g=n(291);Object.defineProperty(e,"FPS",{enumerable:!0,get:function(){return m(g).default}});var b=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(17));function m(t){return t&&t.__esModule?t:{default:t}}e.Model=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.default="done","function"!=typeof Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])}return e}),"function"!=typeof Object.values&&(Object.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e}),"function"!=typeof Object.keys&&(Object.values=function(t){var e=[];for(var n in t)e.push(n);return e}),"undefined"!=typeof CanvasRenderingContext2D&&void 0==CanvasRenderingContext2D.prototype.ellipse&&(CanvasRenderingContext2D.prototype.ellipse=function(t,e,n,r,o,i,a,u){this.save(),this.translate(t,e),this.rotate(o),this.translate(-n,-r),this.scale(n,r),this.arc(1,1,1,i,a,u),this.restore()}),function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(console.warn("requestAnimationFrame not supported"),window.requestAnimationFrame=function(e,n){var r=performance.now(),o=Math.max(0,33-(r-t)),i=window.setTimeout(function(){e(r+o)},o);return t=r+o,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t});var i=i||function(){function t(){o(this,t)}return r(t,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"has",value:function(){}},{key:"delete",value:function(){}}]),t}(),a=a||function(){function t(){o(this,t)}return r(t,[{key:"add",value:function(){}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.target,n=t.model,u=t.style,s=t.layers,c=void 0===s?[]:s,l=t.handlers,f=void 0===l?[]:l,h=t.mode,p=void 0===h?i.MODE_VIEW:h,d=t.refProvider,y=null;if("string"==typeof e){if(!(y=document.getElementById(e)))throw"target element '"+e+"' is not exist";if(y.firstChild)throw"target element '"+e+"' is not empty"}else y=e;y&&y.style&&(y.style.cursor="default",y.style.overflow="hidden");return new a.default(new r.default({target_element:y,model:n,style:u,layers:c,handlers:f},new o.default(p,d)))};var r=u(n(42)),o=u(n(270)),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2)),a=u(n(89));function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";var r=n(95);t.exports=function(t,e){return r(t,e)}},function(t,e,n){"use strict";var r=n(96),o=n(12);t.exports=function t(e,n,i,a,u){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!=e&&n!=n:r(e,n,i,a,t,u))}},function(t,e,n){"use strict";var r=n(97),o=n(47),i=n(131),a=n(135),u=n(56),s=n(19),c=n(32),l=n(33),f=1,h="[object Arguments]",p="[object Array]",d="[object Object]",y=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,v,g,b){var m=s(t),_=s(e),w=m?p:u(t),x=_?p:u(e),k=(w=w==h?d:w)==d,O=(x=x==h?d:x)==d,P=w==x;if(P&&c(t)){if(!c(e))return!1;m=!0,k=!1}if(P&&!k)return b||(b=new r),m||l(t)?o(t,e,n,v,g,b):i(t,e,w,n,v,g,b);if(!(n&f)){var A=k&&y.call(t,"__wrapped__"),E=O&&y.call(e,"__wrapped__");if(A||E){var j=A?t.value():t,M=E?e.value():e;return b||(b=new r),g(j,M,n,v,b)}}return!!P&&(b||(b=new r),a(t,e,n,v,g,b))}},function(t,e,n){"use strict";var r=n(21),o=n(103),i=n(104),a=n(105),u=n(106),s=n(107);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=u,c.prototype.set=s,t.exports=c},function(t,e,n){"use strict";t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){"use strict";var r=n(22),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():o.call(e,n,1),--this.size,0))}},function(t,e,n){"use strict";var r=n(22);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){"use strict";var r=n(22);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){"use strict";var r=n(22);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){"use strict";var r=n(21);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e,n){"use strict";t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e,n){"use strict";t.exports=function(t){return this.__data__.get(t)}},function(t,e,n){"use strict";t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){"use strict";var r=n(21),o=n(31),i=n(46),a=200;t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var u=n.__data__;if(!o||u.length<a-1)return u.push([t,e]),this.size=++n.size,this;n=this.__data__=new i(u)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){"use strict";var r=n(43),o=n(111),i=n(11),a=n(45),u=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,l=s.toString,f=c.hasOwnProperty,h=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(r(t)?h:u).test(a(t))}},function(t,e,n){"use strict";var r=n(23),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[u]=n:delete t[u]),o}},function(t,e,n){"use strict";var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}},function(t,e,n){"use strict";var r,o=n(112),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!i&&i in t}},function(t,e,n){"use strict";var r=n(6)["__core-js_shared__"];t.exports=r},function(t,e,n){"use strict";t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){"use strict";var r=n(115),o=n(21),i=n(31);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(t,e,n){"use strict";var r=n(116),o=n(117),i=n(118),a=n(119),u=n(120);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){"use strict";var r=n(24);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e,n){"use strict";t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){"use strict";var r=n(24),o="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return n===o?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){"use strict";var r=n(24),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},function(t,e,n){"use strict";var r=n(24),o="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?o:e,this}},function(t,e,n){"use strict";var r=n(25);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){var e=void 0===t?"undefined":r(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){"use strict";var r=n(25);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){"use strict";var r=n(25);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){"use strict";var r=n(25);t.exports=function(t,e){var n=r(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},function(t,e,n){"use strict";var r=n(46),o=n(127),i=n(128);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,t.exports=a},function(t,e,n){"use strict";var r="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,r),this}},function(t,e,n){"use strict";t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){"use strict";t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){"use strict";t.exports=function(t,e){return t.has(e)}},function(t,e,n){"use strict";var r=n(23),o=n(132),i=n(18),a=n(47),u=n(133),s=n(134),c=1,l=2,f="[object Boolean]",h="[object Date]",p="[object Error]",d="[object Map]",y="[object Number]",v="[object RegExp]",g="[object Set]",b="[object String]",m="[object Symbol]",_="[object ArrayBuffer]",w="[object DataView]",x=r?r.prototype:void 0,k=x?x.valueOf:void 0;t.exports=function(t,e,n,r,x,O,P){switch(n){case w:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _:return!(t.byteLength!=e.byteLength||!O(new o(t),new o(e)));case f:case h:case y:return i(+t,+e);case p:return t.name==e.name&&t.message==e.message;case v:case b:return t==e+"";case d:var A=u;case g:var E=r&c;if(A||(A=s),t.size!=e.size&&!E)return!1;var j=P.get(t);if(j)return j==e;r|=l,P.set(t,e);var M=a(A(t),A(e),r,x,O,P);return P.delete(t),M;case m:if(k)return k.call(t)==k.call(e)}return!1}},function(t,e,n){"use strict";var r=n(6).Uint8Array;t.exports=r},function(t,e,n){"use strict";t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},function(t,e,n){"use strict";t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},function(t,e,n){"use strict";var r=n(136),o=1,i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,a,u,s){var c=n&o,l=r(t),f=l.length;if(f!=r(e).length&&!c)return!1;for(var h=f;h--;){var p=l[h];if(!(c?p in e:i.call(e,p)))return!1}var d=s.get(t);if(d&&s.get(e))return d==e;var y=!0;s.set(t,e),s.set(e,t);for(var v=c;++h<f;){var g=t[p=l[h]],b=e[p];if(a)var m=c?a(b,g,p,e,t,s):a(g,b,p,t,e,s);if(!(void 0===m?g===b||u(g,b,n,a,s):m)){y=!1;break}v||(v="constructor"==p)}if(y&&!v){var _=t.constructor,w=e.constructor;_!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w)&&(y=!1)}return s.delete(t),s.delete(e),y}},function(t,e,n){"use strict";var r=n(137),o=n(139),i=n(48);t.exports=function(t){return r(t,i,o)}},function(t,e,n){"use strict";var r=n(138),o=n(19);t.exports=function(t,e,n){var i=e(t);return o(t)?i:r(i,n(t))}},function(t,e,n){"use strict";t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e,n){"use strict";var r=n(140),o=n(141),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(t){return null==t?[]:(t=Object(t),r(a(t),function(e){return i.call(t,e)}))}:o;t.exports=u},function(t,e,n){"use strict";t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}},function(t,e,n){"use strict";t.exports=function(){return[]}},function(t,e,n){"use strict";t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){"use strict";var r=n(10),o=n(12),i="[object Arguments]";t.exports=function(t){return o(t)&&r(t)==i}},function(t,e,n){"use strict";t.exports=function(){return!1}},function(t,e,n){"use strict";var r=n(10),o=n(53),i=n(12),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[r(t)]}},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){"use strict";(function(t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(44),i="object"==r(e)&&e&&!e.nodeType&&e,a=i&&"object"==r(t)&&t&&!t.nodeType&&t,u=a&&a.exports===i&&o.process,s=function(){try{return u&&u.binding&&u.binding("util")}catch(t){}}();t.exports=s}).call(e,n(51)(t))},function(t,e,n){"use strict";var r=n(55)(Object.keys,Object);t.exports=r},function(t,e,n){"use strict";var r=n(9)(n(6),"DataView");t.exports=r},function(t,e,n){"use strict";var r=n(9)(n(6),"Promise");t.exports=r},function(t,e,n){"use strict";var r=n(9)(n(6),"Set");t.exports=r},function(t,e,n){"use strict";var r=n(9)(n(6),"WeakMap");t.exports=r},function(t,e,n){"use strict";var r=n(154),o=n(166),i=n(169),a=n(170),u=n(171),s=n(63),c=n(62),l=n(48),f=n(65),h=n(172),p=n(66),d=/\b__p \+= '';/g,y=/\b(__p \+=) '' \+/g,v=/(__e\(.*?\)|\b__t\)) \+\n'';/g,g=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,b=/($^)/,m=/['\n\r\u2028\u2029\\]/g;t.exports=function(t,e,n){var _=h.imports._.templateSettings||h;n&&c(t,e,n)&&(e=void 0),t=p(t),e=r({},e,_,a);var w,x,k=r({},e.imports,_.imports,a),O=l(k),P=i(k,O),A=0,E=e.interpolate||b,j="__p += '",M=RegExp((e.escape||b).source+"|"+E.source+"|"+(E===f?g:b).source+"|"+(e.evaluate||b).source+"|$","g"),S="sourceURL"in e?"//# sourceURL="+e.sourceURL+"\n":"";t.replace(M,function(e,n,r,o,i,a){return r||(r=o),j+=t.slice(A,a).replace(m,u),n&&(w=!0,j+="' +\n__e("+n+") +\n'"),i&&(x=!0,j+="';\n"+i+";\n__p += '"),r&&(j+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),A=a+e.length,e}),j+="';\n";var T=e.variable;T||(j="with (obj) {\n"+j+"\n}\n"),j=(x?j.replace(d,""):j).replace(y,"$1").replace(v,"$1;"),j="function("+(T||"obj")+") {\n"+(T?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(w?", __e = _.escape":"")+(x?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+j+"return __p\n}";var C=o(function(){return Function(O,S+"return "+j).apply(void 0,P)});if(C.source=j,s(C))throw C;return C}},function(t,e,n){"use strict";var r=n(155),o=n(157),i=n(163),a=o(function(t,e,n,o){r(e,i(e),t,o)});t.exports=a},function(t,e,n){"use strict";var r=n(156),o=n(57);t.exports=function(t,e,n,i){var a=!n;n||(n={});for(var u=-1,s=e.length;++u<s;){var c=e[u],l=i?i(n[c],t[c],c,n,t):void 0;void 0===l&&(l=t[c]),a?o(n,c,l):r(n,c,l)}return n}},function(t,e,n){"use strict";var r=n(57),o=n(18),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];i.call(t,e)&&o(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){"use strict";var r=n(59),o=n(62);t.exports=function(t){return r(function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,u=i>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,u&&o(n[0],n[1],u)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,a)}return e})}},function(t,e,n){"use strict";var r=n(61),o=Math.max;t.exports=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,u=o(i.length-e,0),s=Array(u);++a<u;)s[a]=i[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=i[a];return c[e]=n(s),r(t,this,c)}}},function(t,e,n){"use strict";var r=n(160),o=n(162)(r);t.exports=o},function(t,e,n){"use strict";var r=n(161),o=n(58),i=n(60),a=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;t.exports=a},function(t,e,n){"use strict";t.exports=function(t){return function(){return t}}},function(t,e,n){"use strict";var r=800,o=16,i=Date.now;t.exports=function(t){var e=0,n=0;return function(){var a=i(),u=o-(a-n);if(n=a,u>0){if(++e>=r)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){"use strict";var r=n(49),o=n(164),i=n(26);t.exports=function(t){return i(t)?r(t,!0):o(t)}},function(t,e,n){"use strict";var r=n(11),o=n(34),i=n(165),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=o(t),n=[];for(var u in t)("constructor"!=u||!e&&a.call(t,u))&&n.push(u);return n}},function(t,e,n){"use strict";t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){"use strict";var r=n(61),o=n(59),i=n(63),a=o(function(t,e){try{return r(t,void 0,e)}catch(t){return i(t)?t:new Error(t)}});t.exports=a},function(t,e,n){"use strict";var r=n(10),o=n(168),i=n(12),a="[object Object]",u=Function.prototype,s=Object.prototype,c=u.toString,l=s.hasOwnProperty,f=c.call(Object);t.exports=function(t){if(!i(t)||r(t)!=a)return!1;var e=o(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}},function(t,e,n){"use strict";var r=n(55)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){"use strict";var r=n(64);t.exports=function(t,e){return r(e,function(e){return t[e]})}},function(t,e,n){"use strict";var r=n(18),o=Object.prototype,i=o.hasOwnProperty;t.exports=function(t,e,n,a){return void 0===t||r(t,o[n])&&!i.call(a,n)?e:t}},function(t,e,n){"use strict";var r={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};t.exports=function(t){return"\\"+r[t]}},function(t,e,n){"use strict";var r=n(173),o={escape:n(177),evaluate:n(178),interpolate:n(65),variable:"",imports:{_:{escape:r}}};t.exports=o},function(t,e,n){"use strict";var r=n(174),o=n(66),i=/[&<>"']/g,a=RegExp(i.source);t.exports=function(t){return(t=o(t))&&a.test(t)?t.replace(i,r):t}},function(t,e,n){"use strict";var r=n(175)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});t.exports=r},function(t,e,n){"use strict";t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},function(t,e,n){"use strict";var r=n(23),o=n(64),i=n(19),a=n(67),u=1/0,s=r?r.prototype:void 0,c=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(a(e))return c?c.call(e):"";var n=e+"";return"0"==n&&1/e==-u?"-0":n}},function(t,e,n){"use strict";t.exports=/<%-([\s\S]+?)%>/g},function(t,e,n){"use strict";t.exports=/<%([\s\S]+?)%>/g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),i=n(187);var a=/\s+/;function u(t,e,n,o){if(!n)return!0;if("object"==(void 0===n?"undefined":r(n))){for(var i in n){var u=n[i];t[e].apply(t,[i,u])}return!1}return!a.test(n)||(n.split(a).forEach(function(n){return t[e].apply(t,[n].concat(o))}),!1)}var s=["on","off","once","delegate_on","delegate_off","trigger","listenTo"],c={withEvent:function(){var t=this;s.forEach(function(e){return t[e]=c[e]})},on:function(t,e,n){return u(this,"on",t,[e,n])&&e?(this._listeners||(this._listeners={}),(this._listeners[t]||(this._listeners[t]=[])).push({callback:e,context:n,ctx:n||this}),this):this},once:function(t,e,n){if(!u(this,"once",t,[e,n])||!e)return this;var r=this,i=o.once(function(){r.off(t,i),e.apply(r,arguments)});i._callback=e,this.on(t,i,n)},off:function(t,e,n){if(!this._listeners||!u(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._listeners=void 0,this;var r;r=t?[t]:Object.keys(this._listeners);for(var o=0;o<r.length;o++){var i=r[o],a=this._listeners[i];if(a){var s=[];if(this._listeners[i]=s,e||n)for(var c=0;c<a.length;c++){var l=a[c];(e&&e!==l.callback&&e!==l.callback._callback||n&&n!==l.context)&&s.push(l)}s.length||delete this._listeners[i]}}return this},delegate_on:function(t){return this._delegators||(this._delegators=new i.List),this._delegators.append(t),this},delegate_off:function(t){return this._delegators?(this._delegators.remove(t),this):this},delegate:function(){if(this._delegators&&this._delegators.size()>0&&f(this._delegators,arguments),!this._listeners)return this;var t=arguments.length-1,e=arguments[t];arguments[t]={origin:e.origin,name:e.name,deliverer:this};var n=this._listeners[e.name],r=this._listeners["(all)"];return n&&l(n,arguments),r&&l(r,arguments),this},trigger:function(t){var e=[].slice.call(arguments,1);if(e.push({origin:this,name:t,deliverer:this}),this._delegators&&this._delegators.size()>0&&f(this._delegators,e),!this._listeners)return this;if(!u(this,"trigger",t,e))return this;var n=this._listeners[t],r=this._listeners["(all)"];return n&&l(n,e),r&&l(r,e),this},stopListening:function(t,e,n){var i=this._listeningTo;if(!i)return this;var a=!e&&!n;for(var u in n||"object"!=(void 0===e?"undefined":r(e))||(n=this),t&&((i={})[t._listenId]=t),i){var s=i[u];s.off(e,n,this),(a||o.isEmpty(s._events))&&delete this._listeningTo[u]}return this}};function l(t,e){t.forEach(function(t){return t.callback.apply(t.ctx,e)})}function f(t,e){t.forEach(function(t){return c.delegate.apply(t,e)})}var h={listenTo:"on",listenToOnce:"once"};for(var p in h){var d=h[p];c[p]=function(t,e,n){this._listeningTo||(this._listeningTo={});var i=this._listeningTo;return t._listenId||(t._listenId=o.uniqueId("l")),i[t._listenId]=t,n||"object"!=(void 0===e?"undefined":r(e))||(n=this),t[d](e,n,this),this}}e.default=c},function(t,e,n){"use strict";var r=n(6);t.exports=function(){return r.Date.now()}},function(t,e,n){"use strict";var r=n(68),o=n(11),i="Expected a function";t.exports=function(t,e,n){var a=!0,u=!0;if("function"!=typeof t)throw new TypeError(i);return o(n)&&(a="leading"in n?!!n.leading:a,u="trailing"in n?!!n.trailing:u),r(t,e,{leading:a,maxWait:e,trailing:u})}},function(t,e,n){"use strict";var r=n(183);t.exports=function(t){return r(2,t)}},function(t,e,n){"use strict";var r=n(184),o="Expected a function";t.exports=function(t,e){var n;if("function"!=typeof e)throw new TypeError(o);return t=r(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}},function(t,e,n){"use strict";var r=n(185);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},function(t,e,n){"use strict";var r=n(69),o=1/0,i=1.7976931348623157e308;t.exports=function(t){return t?(t=r(t))===o||t===-o?(t<0?-1:1)*i:t==t?t:0:0===t?t:0}},function(t,e,n){"use strict";var r=n(54),o=n(56),i=n(50),a=n(19),u=n(26),s=n(32),c=n(34),l=n(33),f="[object Map]",h="[object Set]",p=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(u(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||s(t)||l(t)||i(t)))return!t.length;var e=o(t);if(e==f||e==h)return!t.size;if(c(t))return!r(t).length;for(var n in t)if(p.call(t,n))return!1;return!0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Stack=e.List=void 0,e.withList=function(){for(var t in r)this[t]=r[t]},e.withStack=function(){for(var t in r)this[t]=r[t]};var r=i(n(188)),o=i(n(189));function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=e.List=function t(){a(this,t)},s=e.Stack=function t(){a(this,t)};u.prototype=r,s.prototype=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.insertAt=function(t,e){if(!this.__collection__)return this;-1==(t=this.__collection__.indexOf(e))&&this.__collection__.splice(t,0,e);return this},e.append=function(t){this.__collection__||(this.__collection__=[]);-1==this.__collection__.indexOf(t)&&this.__collection__.push(t);return this},e.prepend=function(t){this.__collection__||(this.__collection__=[]);-1==this.__collection__.indexOf(t)&&this.__collection__.unshift(t);return this},e.remove=function(t){if(!this.__collection__)return this;var e=this.__collection__.indexOf(t);e>=0&&this.__collection__.splice(e,1);return this},e.getAt=function(t){if(this.__collection__)return this.__collection__[t]},e.forEach=function(t,e){this.__collection__&&this.__collection__.forEach(t,e)},e.indexOf=function(t){if(this.__collection__)return this.__collection__.indexOf(t)},e.size=function(){return this.__collection__?this.__collection__.length:0},e.clear=function(){this.__collection__=[]},e.moveForward=function(t){var e=this.indexOf(t);if(-1==e||0==e)return;this.__collection__[e]=this.__collection__[e-1],this.__collection__[e-1]=t},e.moveBackward=function(t){var e=this.indexOf(t);if(-1==e||e==this.size()-1)return;this.__collection__[e]=this.__collection__[e+1],this.__collection__[e+1]=t},e.moveToHead=function(t){var e=this.indexOf(t);if(-1==e||0==e)return;var n=this.__collection__.splice(0,e),r=this.__collection__.splice(1);this.__collection__=this.__collection__.concat(n,r)},e.moveToTail=function(t){var e=this.indexOf(t);if(-1==e||e==this.size()-1)return;var n=this.__collection__.splice(0,e),r=this.__collection__.splice(1);this.__collection__=n.concat(r,this.__collection__)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.push=function(t){throw new Error("Not Implemented Yet")},e.pop=function(t){throw new Error("Not Implemented Yet")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(191);Object.defineProperty(e,"compile",{enumerable:!0,get:function(){return(t=r,t&&t.__esModule?t:{default:t}).default;var t}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=l[e.type];return n?new n(t,e):null};var r=c(n(192)),o=c(n(193)),i=c(n(194)),a=c(n(195)),u=c(n(196)),s=c(n(197));function c(t){return t&&t.__esModule?t:{default:t}}var l={rotation:r.default,vibration:o.default,heartbeat:i.default,moving:a.default,outline:u.default,fade:s.default}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(16),a=(r=i)&&r.__esModule?r:{default:r};var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"step",value:function(t){var e=this.config.theta,n=void 0===e?6.28:e;this.client.delta("theta",t*n)}}]),e}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(16),a=(r=i)&&r.__esModule?r:{default:r};var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"step",value:function(t){var e=this.config.theta,n=void 0===e?.2617993877991494:e,r=4*n,o=t*r;t<.25?o*=-1:t<.75?o-=2*n:o=r-o,this.client.delta("theta",o)}}]),e}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(16),a=(r=i)&&r.__esModule?r:{default:r};var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"step",value:function(t){var e,n=this.config.scale,r=2*((void 0===n?1.3:n)-1);e=t<.5?1+r*t:1+(1-t)*r,this.client.delta("sx",e),this.client.delta("sy",e)}}]),e}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(16),a=(r=i)&&r.__esModule?r:{default:r};var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"step",value:function(t){var e=this.config,n=e.x,r=void 0===n?0:n,o=e.y,i=void 0===o?0:o;this.client.delta("tx",t*r),this.client.delta("ty",t*i)}}]),e}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(16),a=(r=i)&&r.__esModule?r:{default:r};var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"step",value:function(t){var e=this.config.rideOn,n=this.client;if(e&&n&&n.root){var r=n.center,o=n.root.findById(e);if(o){var i=o.outline(t);r=n.transcoordS2T(r.x,r.y);o&&(n.delta("tx",i.x-r.x),n.delta("ty",i.y-r.y))}}}}]),e}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(16),a=(r=i)&&r.__esModule?r:{default:r};var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"step",value:function(t){var e,n=this.config,r=n.startAlpha,o=void 0===r?1:r,i=n.endAlpha,a=void 0===i?0:i,u=o>a?a:o,s=2*((o<a?a:o)-u);e=t<.5?1-(u+t*s):1-(u+(1-t)*s),this.client.delta("fade",e)}}]),e}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var r=a[n.type];if(!r)return;r(t,e,n)};var r=i(n(199)),o=i(n(72));function i(t){return t&&t.__esModule?t:{default:t}}var a={gradation:r.default,shadow:o.default}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){n.type;var r=n.subType,o=n.from,i=n.to,a=n.colors;switch(r){case"linear":var u=e.createLinearGradient(o.x,o.y,i.x,i.y);break;case"radial":var u=e.createRadialGradient(o.x,o.y,o.r,i.x,i.y,i.r);break;default:var u=e.createLinearGradient(o.x,o.y,i.x,i.y)}a&&(a.forEach(function(t){u.addColorStop(t.endPoint,t.color)}),e.fillStyle=u,e.fill())}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,n,r,o;return t.forEach(function(t){void 0===e?(e=t.left,n=t.top,r=t.left+t.width,o=t.top+t.height):(e=Math.min(t.left,e),n=Math.min(t.top,n),r=Math.max(t.left+t.width,r),o=Math.max(t.top+t.height,o))}),{left:e,top:n,width:r-e,height:o-n}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.drawFill=function(t,e,n,o,a){var u=o.alpha,s=void 0===u?1:u,c=a.fillStyle;if(t.globalAlpha*=s,!c)return;if("string"==typeof c)t.fillStyle=c,t.fill();else if("object"==(void 0===c?"undefined":r(c)))if("gradient"==c.type){t.translate(n.x,n.y);var l=void 0,f=e.width,h=e.height;if("linear"==c.gradientType){var p=3.141592653589793,d=c.rotation;if(d>=.436332&&d<=1.13446||d>=2.00713&&d<=2.70526||d>=3.57792&&d<=4.27606||d>=5.14872&&d<=5.84685){var y=Math.sqrt(Math.pow((f-4)/2,2)+Math.pow((h-4)/2,2));y-=y-(f+h)/3,l=t.createLinearGradient(y*Math.cos(d+p),y*Math.sin(d+p),y*Math.cos(d),y*Math.sin(d))}else l=t.createLinearGradient((f-4)/2*Math.cos(d+p),(h-4)/2*Math.sin(d+p),(f-4)/2*Math.cos(d),(h-4)/2*Math.sin(d))}else if("radial"==c.gradientType){var v=.95*Math.sqrt(Math.pow((f-4)/2,2)+Math.pow((h-4)/2,2));switch(c.center){case"center":l=t.createRadialGradient(0,0,0,0,0,v);break;case"left-top":l=t.createRadialGradient(-f/2,-h/2,0,-f/2,-h/2,2*v);break;case"right-top":l=t.createRadialGradient(f/2,-h/2,0,f/2,-h/2,2*v);break;case"left-bottom":l=t.createRadialGradient(-f/2,h/2,0,-f/2,h/2,2*v);break;case"right-bottom":l=t.createRadialGradient(f/2,h/2,0,f/2,h/2,2*v);break;default:l=t.createRadialGradient(0,0,0,0,0,v)}}c.colorStops.forEach(function(t){if(t.position>=0&&t.position<=1)try{l.addColorStop(t.position,t.color)}catch(e){(0,i.warn)("Invalid Color for colorstop : ",t.color),l.addColorStop(t.position,"#fff")}}),t.fillStyle=l,t.fill(),t.translate(-n.x,-n.y)}else if("pattern"==c.type&&c.image){a.prepareFillIf(!a._pattern_image_origin);var g=a._pattern_image;if(!g)return;var b=0,m=0,_=0,w=0,x=e.left,k=e.top;if(!c.fitPattern){switch(b=c.offsetX,m=c.offsetY,c.align){case"center":_=e.width/2-(c.width?c.width/2:0),w=e.height/2+(c.height?c.height/2:0);break;case"left-top":break;case"left-bottom":w=c.height?e.height%c.height:e.height;break;case"right-top":_=c.width?e.width%c.width:e.width;break;case"right-bottom":_=c.width?e.width%c.width:e.width,w=c.height?e.height%c.height:e.height;break;case"left":w=e.height/2+(c.height?c.height/2:0);break;case"right":_=c.width?e.width%c.width:e.width,w=e.height/2+(c.height?c.height/2:0);break;case"top":_=e.width/2-(c.width?c.width/2:0);break;case"bottom":_=e.width/2-(c.width?c.width/2:0),w=c.height?e.height%c.height:e.height}x+=b+_,k+=m+w}t.translate(x,k),c.fitPattern?Math.abs((g.width-e.width)*(g.height-e.height))>1?(delete a._pattern_image,delete a._pattern_image_origin):t.fillStyle=t.createPattern(g,"no-repeat"):t.fillStyle=t.createPattern(g,"repeat"),t.fill(),t.translate(-x,-k)}},e.prepareFill=function(t,e){var n=this.fillStyle;if(!n||"pattern"!=n.type||!n.image)return void t(this);if("string"!=typeof n.image)return this._pattern_image_origin=this._pattern_image=n.image,void t(this);this._pattern_image=null,this._pattern_image_origin=new Image;var r=this;this._pattern_image_origin.onload=function(){if(!n.fitPattern&&!n.width&&!n.height)return r._pattern_image=r._pattern_image_origin,void t(this);var e=n.width||this.width,i=n.height||this.height;n.fitPattern&&(e=r.bounds.width,i=r.bounds.height);var a=(0,o.createCanvas)(e,i),u=a.getContext("2d");u.drawImage(this,0,0,this.width,this.height,0,0,e,i),r._pattern_image=a,t(this)},this._pattern_image_origin.onerror=function(t){e(t)};try{"data"!==String(n.image).substring(0,4)?this._pattern_image_origin.crossOrigin="use-credentials":this._pattern_image_origin.crossOrigin=null,this._pattern_image_origin.src=this.app.url(n.image)}catch(t){e(t)}},e.prepareFillIf=function(t){var e=this;if(!t)return;this.prepareFill(function(t){e.invalidate()},function(t){(0,i.error)(t)})},e.onchangeFill=function(t,e){var n=this.fillStyle;if("pattern"!==n.type)return void(this._pattern_image&&(this._pattern_image=null,this._pattern_image_origin=null));this.prepareFillIf(n.image)};var o=n(75),i=n(1)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ondropfile=function(t,e){for(var n=0;n<t.length;n++)if(t[n].type.startsWith("image/"))return void this.set("fillStyle",{type:"pattern",image:e[n],fitPattern:!0})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t.path.slice();if(!n||!n.length)return void(0,r.error)("path should not be empty");var o=1,i=[];t.isLine()||n.push(n[0]);if(e<=0)return t.transcoordS2T(n[0].x,n[0].y);if(e>=1)return t.transcoordS2T(n[n.length-1].x,n[n.length-1].y);for(;n[o];){var a=n[o-1],u=n[o],s=u.x-a.x,c=u.y-a.y;i.push(Math.sqrt(s*s+c*c)),o++}var l=i.reduce(function(t,e){return t+e},0);o=0;var f=0;do{f+=i[o++]}while(f/l<e);f-=i[--o],e=(e-f/l)*(l/i[o]);var h=n[o%n.length],p=n[(o+1)%n.length],d=h.x+Math.round((p.x-h.x)*e),y=h.y+Math.round((p.y-h.y)*e);return t.transcoordS2T(d,y)};var r=n(1)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var r=e.strokeStyle,o=e.lineDash,i=e.lineWidth,a=e.lineCap,u=e.lineJoin,s=e.alpha;if(!r||0==i)return;a&&(t.lineCap=a);if(o){var c="round"==a;switch(o){case"solid":o=[0,0];break;case"round-dot":o=c?[0,2*i]:[i,i];break;case"square-dot":o=c?[i,2*i]:[2*i,i];break;case"dash":o=c?[3*i,2.5*i]:[4*i,1.5*i];break;case"dash-dot":o=c?[3*i,3*i,0,3*i]:[4*i,2*i,i,2*i];break;case"long-dash":o=c?[5*i,4*i]:[6*i,3*i];break;case"long-dash-dot":o=c?[5*i,3*i,0,3*i]:[6*i,2*i,i,2*i];break;case"long-dash-dot-dot":o=c?[5*i,2*i,0,2*i,0,2*i]:[6*i,i,i,i,i,i]}t.setLineDash(o)}t.globalAlpha*=s,t.strokeStyle=r,t.lineWidth=i,t.lineJoin=u,t.stroke()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=this;if(!this._model.effects)return;this._model.effects.forEach(function(n){e.effect(t,n)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(!t||isNaN(+e))return e;var n,r,o,i,a,u,s,c,l,f,h=t.length,p=t.search(/[0-9\-\+#]/),d=p>0?t.substring(0,p):"",y=t.split("").reverse().join(""),v=y.search(/[0-9\-\+#]/),g=h-v,b=t.substring(g,g+1),m=g+("."===b||","===b?1:0),_=v>0?t.substring(m,h):"";t=t.substring(p,m),e="-"===t.charAt(0)?-e:+e,n=e<0?e=-e:0,r=t.match(/[^\d\-\+#]/g),".",o=r&&r[1]&&r[0]||",",t=t.split("."),e=+(e=e.toFixed(t[1]&&t[1].length))+"",a=t[1]&&t[1].lastIndexOf("0"),(!(s=e.split("."))[1]||s[1]&&s[1].length<=a)&&(e=(+e).toFixed(a+1));if(c=t[0].split(o),t[0]=c.join(""),(i=t[0]&&t[0].indexOf("0"))>-1)for(;s[0].length<t[0].length-i;)s[0]="0"+s[0];else 0==+s[0]&&(s[0]="");if((e=e.split("."))[0]=s[0],u=c[1]&&c[c.length-1].length){for(l=e[0],y="",g=l.length%u,h=l.length,m=0;m<h;m++)y+=l.charAt(m),!((m-g+1)%u)&&m<h-u&&(y+=o);e[0]=y}e[1]=t[1]&&e[1]?"."+e[1]:"",("0"===(r=e.join(""))||""===r)&&(n=!1);f="+"==t[0].substring(0,1)?n?"-":"+":n?"-":"";return d+(f+r)+_}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.textLines=function(t,e,n,r,o){if(!r)return[];t.save(),t.font=n;var i=(0,a.default)(t,r,e,!!o);return t.restore(),i},e.font=u,e.drawText=function(t,e,n,r){var i=r.alpha,a=void 0===i?o.DEFAULT.FONT_COLOR:i,s=r.fontColor,c=void 0===s?o.DEFAULT.FONT_COLOR:s,l=r.textAlign,f=void 0===l?o.DEFAULT.TEXT_ALIGN:l,h=r.textBaseline,p=void 0===h?o.DEFAULT.TEXT_BASELINE:h,d=r.fontSize,y=void 0===d?o.DEFAULT.FONT_SIZE:d,v=r.lineHeight,g=void 0===v?1.2*y:v;t.save(),t.beginPath();var b=e.left,m=e.top,_=e.width,w=e.height;t.font=u(r);var x,k,O=n.length*g;switch(p){case"top":x=m,t.textBaseline="top";break;case"bottom":x=m+w-O+g,t.textBaseline="bottom";break;case"middle":default:x=m+w/2-O/2+g/2,t.textBaseline="middle"}switch(f){case"left":k=b,t.textAlign="left";break;case"right":k=b+_,t.textAlign="right";break;case"justify":k=b,t.textAlign="left";break;case"center":default:k=b+_/2,t.textAlign="center"}t.globalAlpha*=a,t.fillStyle=c,"justify"!=f?n.forEach(function(e,n){t.fillText(e.join(" "),k,x+n*g)}):n.forEach(function(e,n){var r=x+n*g;if(1==e.length)t.fillText(e[0],k,r);else{var o=e.map(function(e){return t.measureText(e).width}),i=o.reduce(function(t,e){return t+e},0),a=(_-i)/(e.length-1),u=k;e.forEach(function(e,n){t.fillText(e,u,r),u+=o[n]+a})}});t.restore()};var r,o=n(2),i=n(76),a=(r=i)&&r.__esModule?r:{default:r};function u(t){var e=t.fontFamily,n=void 0===e?o.DEFAULT.FONT_FAMILY:e,r=t.bold,i=void 0===r?o.DEFAULT.BOLD:r,a=t.italic,u=void 0===a?o.DEFAULT.ITALIC:a,s=t.fontSize,c=void 0===s?o.DEFAULT.FONT_SIZE:s,l=[];return i&&l.push("bold"),u&&l.push("italic"),l.push(c+"px"),l.push(n),l.join(" ")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var r=this,o=this.path,i=this.rotatePoint;this.get("rotation"),this.get("scale");t&&(o=t.call(n,o));var a=o.map(function(t){return r.transcoordS2P(t.x,t.y)});if(e){var o=e.call(n,a);o&&(a=o)}var u,s,c,l,f={x:0,y:0},o=a.map(function(t){return r.transcoordP2S(t.x,t.y,f)});u=s=o[0].x,c=l=o[0].y;for(var h=1;h<o.length;h++){var p=o[h];p.x<u?u=p.x:p.x>s&&(s=p.x),p.y<c?c=p.y:p.y>l&&(l=p.y)}i={x:(u+s)/2,y:(c+l)/2},i=this.transcoordS2P(i.x,i.y,f),this.path=a.map(function(t){return r.transcoordP2S(t.x,t.y,i)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=this.bounds,r=this.rotatePoint,o=this.get("rotation"),a=this.get("scale");if(t){var u=t.call(e,n);u&&(n=u)}var s=n,c=s.left,l=s.top,f=s.width,h=s.height,p=[{x:c,y:l},{x:c+f,y:l+h}],d=(p=p.map(function(t){return i.default.transcoordRR(t.x,t.y,r,o,a)}))[0],y=p[1];r={x:(d.x+y.x)/2,y:(d.y+y.y)/2},p=p.map(function(t){return i.default.transcoordR(t.x,t.y,r,o,a)}),d=p[0],y=p[1],this.bounds={left:d.x,top:d.y,width:y.x-d.x,height:y.y-d.y}};var r,o=n(0),i=(r=o)&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.executeMappings=u,e.onchangeData=function(t,e){u.call(this)},e.buildMappings=function(){var t=this;if(!this._model.mappings)return void(this._mappings=[]);if(!this._model.mappings instanceof Array)return(0,o.error)("Mappings model is invalid (should be a Array) ..",this._model.mappings),void(this._mappings=[]);this._mappings=(this._model.mappings||[]).map(function(e){return new a.default(e,t)})},e.disposeMappings=function(){this._mappings&&this._mappings.forEach(function(t){return t.dispose()}),delete this._mappings},e.onchangeMappings=function(t,e){this.disposeMappings(),u.call(this)};var r,o=n(1),i=n(211),a=(r=i)&&r.__esModule?r:{default:r};function u(){var t=this;this.mappings&&this.mappings.forEach(function(e){try{var n=e.target,r=e.property,i=e.accessor;if(void 0==(i=i(t.data)))return;if("(root)"==(n=n.trim())||"(key)"==n){if((f=Object.keys(i||{}).map(function(e){return t.root.findOrCreate(e)}).filter(function(t){return!!t})).length>0){var a=e.evaluator(i,f);f.forEach(function(t){return t[r]=a[t.get("id")]})}}else if(n.startsWith("[")){if(!n.endsWith("]"))throw String("mapping target should end with ']' to designate property-id.("+n+")");var u=n.substring(1,n.length-1),s=e.evaluator(i,f);if(s instanceof Array)s.forEach(function(e){var n=e[u];if(n){var o=t.root.findOrCreate(n);o&&(o[r]=e)}});else{if(!(s instanceof Object))throw String("mapping data should be an object to target property-id.("+t.data+")");var c=s[u];if(c){var l=t.root.findOrCreate(c);l&&(l[r]=s)}}}else{var f;if((f=t.root.findAll(n,t)).length>0){var h=e.evaluator(i,f);f.forEach(function(t){return t[r]=h})}}}catch(n){(0,o.error)(n,t,e)}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=a(n(212)),i=a(n(213));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.owner=n,this.model=e}return r(t,[{key:"dispose",value:function(){delete this._model,delete this.owner,delete this.evaluator,delete this.accessor}},{key:"model",get:function(){return this._model},set:function(t){t.target;var e=t.property,n=t.rule,r=t.param,a=t.accessor;this._model=t,this.evaluator=(0,o.default)(this,this.owner,n,r,function(t){switch(t){case"ref":case"fillStyle":case"strokeStyle":return"string";default:return}}(e)),this.accessor=(0,i.default)(a)}},{key:"target",get:function(){return this.model.target}},{key:"property",get:function(){return this.model.property}},{key:"param",get:function(){return this.model.param}}]),t}();e.default=u},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.default=buildEvaluator;var _logger=__webpack_require__(1),_utils=__webpack_require__(3);function tostring(t){var e=(0,_utils.objToVal)(t);return void 0==e?"":String(e)}function tonumber(t){return Number((0,_utils.objToVal)(t))}function value(t){return t}function valueString(t){return tostring(t)}function valueNumber(t){return tonumber(t)}function map(t){if(this.param)return t=tostring(t),this.param.hasOwnProperty(t)?this.param[t]:this.param.default}function range(t){var e=this.param;if(e){for(var n in e){var r=n.split("~"),o=_slicedToArray(r,2),i=o[0],a=o[1],u=!!i,s=!!a;if(i=parseFloat(i),a=parseFloat(a),t=tonumber(t),u&&!s&&t>=i)return e[n];if(!u&&s&&t<i)return e[n];if(t>=i&&t<a)return e[n]}return e.default}}function radian(t){return tonumber(t)*Math.PI/180}function noop(){}function build(script){var evaluator;try{return eval("evaluator = function(value, targets) {"+script+"}"),evaluator}catch(t){return(0,_logger.error)(t),noop}}function buildEvaluator(t,e,n,r,o){switch(n){case"value":return"text"===o||"string"===o?valueString.bind(t):"number"===o?valueNumber.bind(t):value.bind(e);case"map":return map.bind(t);case"range":return range.bind(t);case"radian":return radian.bind(t);case"eval":return build(r).bind(e);default:return value.bind(e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(!t)return r;var e=String(t).trim().replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split(".").filter(function(t){return!!t.trim()});return e.length>0?function(t){return e.reduce(function(t,e){return t?t[e]:void 0},t)}:r};var r=function(t){return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.transcoordR=r,e.transcoordRR=o,e.transcoordP2S=function(t,e,n){if(!this.parent)return{x:t,y:e};var o=this.model,i=o.rotation,a=void 0===i?0:i,u=o.scale,s=void 0===u?{x:1,y:1}:u;if(this.isLayer()){var c=this.model.translate,l=r(t,e,c,a,s);return c&&(l.x-=c.x/(s?s.x:1),l.y-=c.y/(s?s.y:1)),l}n=n||this.rotatePoint;var f=r(t,e,n,a,s);return{x:f.x+(n.x-n.x/s.x),y:f.y+(n.y-n.y/s.y)}},e.transcoordS2P=function(t,e,n){if(!this.parent)return{x:t,y:e};var r=this.model,i=r.rotation,a=void 0===i?0:i,u=r.scale,s=void 0===u?{x:1,y:1}:u;if(this.isLayer()){var c=this.model.translate,l=o(t,e,void 0,a,s);return c&&(l.x+=c.x,l.y+=c.y),l}n=n||this.rotatePoint;var f=o(t,e,n,a,s);return{x:f.x-(n.x-n.x/s.x),y:f.y-(n.y-n.y/s.y)}},e.transcoordS2TR=function(t,e,n){var n=n||this.rootModel,r=this.transcoordS2T(t,e,n);return o(r.x,r.y,void 0,n.get("rotation")||0)},e.transcoordS2T=function(t,e,n){for(var n=n||this.rootModel,r=[],o=this.parent;o&&o!==n;o=o.parent)r.push(o);var i=this.transcoordS2P(t,e);return r.forEach(function(t){var e=t.model.scale,n=t.bounds;if(e){var r=t.rotatePoint;i.x+=(r.x-n.left)*e.x,i.y+=(r.y-n.top)*e.y}else i.x+=n.left,i.y+=n.top;i=t.transcoordS2P(i.x,i.y)}),i},e.transcoordT2S=function(t,e,n){for(var n=n||this.rootModel,r=[],o=this.parent;o&&o!==n;o=o.parent)r.splice(0,0,o);var i={x:t,y:e};return r.forEach(function(t){var e=t.model.scale;i=t.transcoordP2S(i.x,i.y);var n=t.bounds;if(e){var r=t.rotatePoint;i.x-=(r.x-n.left)/e.x,i.y-=(r.y-n.top)/e.y}else i.x-=n.left,i.y-=n.top}),this.transcoordP2S(i.x,i.y)},e.transcoordS2O=function(t,e,n){var r=this.rootModel,o=this.transcoordS2T(t,e,r);return n.transcoordT2S(o.x,o.y,r)},e.transcoordC2S=function(t,e,n){if(!n)for(n=this;n&&!n.isLayer();)n=n.parent;var o=n.model,i=o.translate,a=o.scale,u=o.rotation,s=r(t,e,i,u,a);i&&(s.x-=i.x/(a?a.x:1),s.y-=i.y/(a?a.y:1));return n===this?s:this.transcoordT2S(s.x,s.y,n)},e.transcoordS2C=function(t,e,n){if(!n)for(n=this;n&&!n.isLayer();)n=n.parent;if(n!==this)var r=this.transcoordS2T(t,e,n);else var r={x:t,y:e};var i=n.model,a=i.translate,u=i.rotation,s=i.scale;r=o(r.x,r.y,void 0,u,s),a&&(r.x+=a.x,r.y+=a.y);return r};!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(2));function r(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:1,y:1};return t-=n.x,e-=n.y,{x:(t*Math.cos(-r)-e*Math.sin(-r)+n.x)/o.x,y:(t*Math.sin(-r)+e*Math.cos(-r)+n.y)/o.y}}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:1,y:1};return t-=n.x,e-=n.y,{x:(t*Math.cos(r)-e*Math.sin(r)+n.x)*o.x,y:(t*Math.sin(r)+e*Math.cos(r)+n.y)*o.y}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.element,n=t.fillStyle,r=e.style;if(r.background="",!n)return;if("string"==typeof n)r.backgroundColor=n;else switch(n.type){case"pattern":r.backgroundImage="url("+n.image+")",n.fitPattern?r.backgroundSize="100% 100%":n.width||n.height?r.backgroundSize=(n.width?n.width+"px":"auto")+" "+(n.height?n.height+"px":"auto"):r.backgroundSize="contain";break;case"gradient":r.background=function(t,e){var n=e.colorStops,r=e.gradientType;if(n instanceof Array&&n.length>0)switch(r){case"radial":var o=e.center||"center";return"radial-gradient(farthest-corner at "+function(t,e){var n=t.bounds,r=n.width,o=n.height;switch(e){case"center":return[r/2,o/2];case"left-top":return[0,0];case"right-top":return[r,0];case"left-bottom":return[0,o];default:return[r,o]}}(t,o).map(function(t){return t+"px"}).join(" ")+","+n.map(function(t){return t.color+" "+100*t.position+"%"}).join(",")+")";case"linear":var i=180*(e.rotation||0)/3.141592653589793+90+"deg";return"linear-gradient("+i+", "+n.map(function(t){return t.color+" "+100*t.position+"%"}).join(",")+")"}return""}(t,n)}};n(2)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(3),i=n(1);var a,u=[];function s(){a=null;var t=performance.now(),e=(u=u.filter(function(t){return c(t)})).reduce(function(e,n){var r=t-n.updatedAt;return r>=n.retention?e.kills.push(n):e.next=0==e.next?n.retention-r:Math.min(e.next,n.retention-r),e},{next:0,kills:[]});e.kills.forEach(function(t){var e=u.indexOf(t);-1!=e?(u.splice(e,1),t.removeSelf(!0)):(0,i.error)("Should not be here. Maybe reentrance problem.")}),e.next>0&&(a=setTimeout(l,Math.max(e.next,500)))}function c(t){return!t.disposed&&t.retention>0&&!t.isTemplate()&&t.app&&t.app.isViewMode}var l=(0,o.throttle)(function(){requestAnimationFrame(s)},500),f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"add",value:function(t){c(t)&&-1==u.indexOf(t)&&(u.push(t),t.touch()),this.touch()}},{key:"remove",value:function(t){var e=u.indexOf(t);e>0&&u.splice(e,1),this.touch()}},{key:"touch",value:function(){null!==a&&(clearTimeout(a),a=null),l()}},{key:"length",get:function(){return u.length}}]),t}();e.default=new f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(13);var i={reflow:function(t,e){},capturables:function(t){return t.components},drawables:function(t){return t.components.filter(function(t){return!t.hidden})},isStuck:function(t){return!1},ABSOLUTE:!0};((r=o)&&r.__esModule?r:{default:r}).default.register("absolute",i),e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(13);function i(t){var e=t.components.filter(function(t){return!t.hidden}),n=t.get("layoutConfig"),r=e[n&&n.activeIndex||0];return r&&[r]||[]}var a={reflow:function(t){var e=t.bounds,n={left:0,top:0,width:e.width,height:e.height};t.forEach(function(t){t.bounds=n,t.set("rotation",0)})},capturables:function(t){return i(t)},drawables:function(t){return i(t)},isStuck:function(t){return!0}};((r=o)&&r.__esModule?r:{default:r}).default.register("card",a),e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(13);function i(t){var e=t.get("layoutConfig");return e&&e.weight||1}var a={reflow:function(t){var e=this.drawables(t),n=t.get("padding")||{},r=e.reduce(function(t,e){return t+i(e)},0),o=t.bounds,a=r>0?(o.width-((n.left||0)+(n.right||0)))/r:o.width,u=o.height-((n.top||0)+(n.bottom||0)),s=0;e.forEach(function(t){var e=i(t),r=t.get("margin")||{};t.bounds={left:a*s+(n.left||0)+(r.left||0),top:0+(n.top||0)+(r.top||0),width:e*a-((r.left||0)+(r.right||0)),height:u-((r.top||0)+(r.bottom||0))},t.set("rotation",0),s+=e})},capturables:function(t){return t.components},drawables:function(t){return t.components.filter(function(t){return!t.hidden})},isStuck:function(t){return!0}};((r=o)&&r.__esModule?r:{default:r}).default.register("linear-horizontal",a),e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(13);function i(t){var e=t.get("layoutConfig");return e&&e.weight||1}var a={reflow:function(t){var e=this.drawables(t),n=t.get("padding")||{},r=e.reduce(function(t,e){return t+i(e)},0),o=t.bounds,a=r>0?(o.height-((n.top||0)+(n.bottom||0)))/r:o.height,u=o.width-((n.left||0)+(n.right||0)),s=0;e.forEach(function(t){var e=i(t),r=t.get("margin")||{};t.bounds={left:0+(n.left||0)+(r.left||0),top:a*s+(n.top||0)+(r.top||0),width:u-((r.left||0)+(r.right||0)),height:e*a-((r.top||0)+(r.bottom||0))},t.set("rotation",0),s+=e})},capturables:function(t){return t.components},drawables:function(t){return t.components.filter(function(t){return!t.hidden})},isStuck:function(t){return!0}};((r=o)&&r.__esModule?r:{default:r}).default.register("linear-vertical",a),e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(13);var i={reflow:function(t){var e=t.get("layoutConfig"),n=e&&e.columns||t.get("columns"),r=e&&e.rows||t.get("rows"),o=e&&e.widths||t.get("widths"),i=e&&e.heights||t.get("heights"),a=o?o.filter(function(t,e){return e<n}).reduce(function(t,e){return t+e},0):n,u=i?i.filter(function(t,e){return e<r}).reduce(function(t,e){return t+e},0):r,s=t.textBounds,c=t.get("paddingLeft")||0,l=t.get("paddingTop")||0,f=s.width/a,h=s.height/u,p=0,d=0;t.components.forEach(function(t,e){for(var r=o?o[e%n]:1,a=i?i[Math.floor(e/n)]:1,u=t.colspan||1,s=0;--u>0;)s+=o?o[(e+u)%n]:1;for(var y=t.rowspan||1,v=0;--y>0;)v+=i?i[Math.floor(e/n)+y]:1;t.bounds={left:c+p,top:l+d,width:f*(r+s),height:h*(a+v)},t.set("rotation",0),e%n==n-1?(p=0,d+=a*h):p+=r*f})},capturables:function(t){return t.components.filter(function(t){return!t.merged})},drawables:function(t){return t.components.filter(function(t){return!t.merged})},isStuck:function(t){return!0},keyNavigate:function(t,e,n){var r=t.get("layoutConfig"),o=r&&r.columns||t.get("columns"),i=r&&r.rows||t.get("rows"),a=t.getRowColumn(e),u=a.row,s=a.column;switch(n.code){case"ArrowUp":if(u>0)return t.getAt((u-1)*o+s);break;case"ArrowDown":if(u<i-1)return t.getAt((u+1)*o+s);break;case"ArrowRight":if(s<o-1)return t.getAt(u*o+s+1);break;case"ArrowLeft":if(s>0)return t.getAt(u*o+s-1);break;default:return e}},joinType:!0};((r=o)&&r.__esModule?r:{default:r}).default.register("table",i),e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(13)),o=i(n(35));function i(t){return t&&t.__esModule?t:{default:t}}var a={reflow:function(t,e){this.drawables(t).filter(function(t){return t.isHTMLElement()}).forEach(function(t){return(0,o.default)(t)})},capturables:function(t){return t.components},drawables:function(t){return t.components.filter(function(t){return!t.hidden})},isStuck:function(t){return!1},ABSOLUTE:!0};r.default.register("html-absolute",a),e.default=a},function(t,e,n){"use strict";function r(t,e,n){var r=t.unitScale;e.set("scale",{x:r,y:r}),e.set("translate",{x:0,y:0})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=this.model_layer.model,n=e.width,o=e.height,i=this.target_element,a=this.model_layer;if(!(n&&o&&i&&i.offsetWidth&&i.offsetHeight))return void r(this,a,i);switch(t){case"center":!function(t,e,n){var r=t.unitScale,o=e.model,i=o.width,a=o.height;e.set("scale",{x:r,y:r}),e.set("translate",{x:Math.max((n.offsetWidth-i*r)/2,0),y:Math.max((n.offsetHeight-a*r)/2,0)})}(this,a,i);break;case"both":!function(t,e,n){var r=e.model,o=r.width,i=r.height,a=n.offsetWidth,u=n.offsetHeight;e.set("scale",{x:a/o,y:u/i}),e.set("translate",{x:0,y:0})}(0,a,i);break;case"width":!function(t,e,n){var r=n.offsetWidth/e.get("width");e.set("scale",{x:r,y:r}),e.set("translate",{x:0,y:0})}(0,a,i);break;case"height":!function(t,e,n){var r=n.offsetHeight/e.get("height");e.set("scale",{x:r,y:r}),e.set("translate",{x:0,y:0})}(0,a,i);break;case"ratio":!function(t,e,n){var r=e.model,o=r.width,i=r.height,a=n.offsetWidth,u=n.offsetHeight,s=a/o,c=u/i,l=Math.min(s,c);e.set("scale",{x:l,y:l}),e.set("translate",{x:(a-o*l)/2,y:(u-i*l)/2})}(0,a,i);break;case"none":default:r(this,a,i)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.containedInPath=function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=0;o<n.length-1;o++)if(a(t,e,n[o],n[o+1],r))return!0;return!1},e.getTipNeckPos=function(t,e,n,r){if("arrow"!=t.slice(-5))return n;n.x,n.y;var o=Math.atan2(r.y-n.y,r.x-n.x),i=1.5*e;return{x:n.x+Math.cos(o)*i,y:n.y+Math.sin(o)*i}},e.drawEndTips=function(t,e,n){var r=n.lineWidth,o=void 0===r?i:r,a=n.strokeStyle,c=void 0===a?"#000000":a,l=n.lineCap,f=void 0!==l&&l,h=n.alpha,p=void 0===h?1:h,d=n.begin,y=void 0===d?"none":d,v=n.end,g=void 0===v?"none":v,b=n.beginSize,m=void 0===b?"size5":b,_=n.endSize,w=void 0===_?"size5":_;if(("none"!=y||"none"!=g)&&(o=Number(o)||i,t.lineCap=f,t.lineWidth=o,t.strokeStyle=c,t.fillStyle=c,t.globalAlpha*=p,"none"!=y&&u(t,e[0],e[1],o,y,s(m,o)),"none"!=g)){var x=e.length;u(t,e[x-1],e[x-2],o,g,s(w,o))}};var r=5,o=Math.sqrt(3),i=2;function a(t,e,n,o,i){var a,u,s,c,l=r+i,f=n.x,h=n.y,p=o.x,d=o.y;if(Math.abs(f-p)>l&&Math.abs(h-d)>l){var y=(d-h)/(p-f),v=h-y*f;if(Math.abs(e-(y*t+v))>l)return!1}return f>p?(u=f,a=p):(u=p,a=f),h>d?(c=h,s=d):(c=d,s=h),!(u+r<t)&&(!(a-r>t)&&(!(c+r<e)&&!(s-r>e)))}function u(t,e,n,r,i,a){var u=e.x,s=e.y,c=Math.atan2(n.y-s,n.x-u);switch(t.beginPath(),t.translate(u,s),t.rotate(c),i){case"oval":t.ellipse(0,0,a.X,a.Y,0,0,2*Math.PI),t.fill();break;case"diamond":t.moveTo(-a.X,0),t.lineTo(0,-a.Y),t.lineTo(a.X,0),t.lineTo(0,a.Y),t.fill();break;case"arrow":t.moveTo(0,0),t.lineTo(o*a.X,-a.Y),t.lineTo(o*a.X,a.Y),t.fill();break;case"sharp-arrow":t.moveTo(0,0),t.lineTo(o*a.X,-a.Y),t.lineTo(-a.X/1.5+o*a.X,0),t.lineTo(o*a.X,a.Y),t.fill();break;case"open-arrow":t.moveTo(o*a.X+r,-a.Y),t.lineTo(r,0),t.lineTo(o*a.X+r,a.Y),t.stroke()}t.rotate(-c),t.translate(-u,-s),t.closePath()}function s(t,e){var n={};switch(e*=1.2,t){case"size1":n.X=e,n.Y=e;break;case"size2":n.X=1.5*e,n.Y=e;break;case"size3":n.X=2*e,n.Y=e;break;case"size4":n.X=e,n.Y=1.5*e;break;case"size5":n.X=1.5*e,n.Y=1.5*e;break;case"size6":n.X=2*e,n.Y=1.5*e;break;case"size7":n.X=e,n.Y=2*e;break;case"size8":n.X=1.5*e,n.Y=2*e;break;case"size9":n.X=2*e,n.Y=2*e;break;default:n.X=1.5*e,n.Y=1.5*e}return n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t.model,r=n.cx,o=n.cy,i=n.rx,a=n.ry,u=2*Math.PI*e,s=r+i*Math.cos(u),c=o+a*Math.sin(u);return t.transcoordS2T(s,c)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=a(n(0)),i=a(n(5));function a(t){return t&&t.__esModule?t:{default:t}}var u={ondragstart:function(t,e,n){n.mutatePath(null,function(n){n.splice(e+1,0,t)})},ondragmove:function(t,e,n){n.mutatePath(null,function(n){n[e+1]=t})},ondragend:function(t,e,n){}},s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"is3dish",value:function(){return!0}},{key:"render",value:function(t){var e=this.model.path,n=void 0===e?[]:e;if(!(n.length<=1)){t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)t.lineTo(n[r].x,n[r].y);t.closePath()}}},{key:"contains",value:function(t,e){var n=this.model.path,r=!1;return n.forEach(function(o,i){var a=(i+n.length+1)%n.length,u=o.x,s=o.y,c=n[a].x,l=n[a].y;s>e!=l>e&&t<(c-u)*(e-s)/(l-s)+u&&(r=!r)}),r}},{key:"mutable",get:function(){return!0}},{key:"pathExtendable",get:function(){return!0}},{key:"path",get:function(){return this.model.path},set:function(t){this.set("path",t)}},{key:"controls",get:function(){var t=this.path;return t.map(function(e,n){var r=t[n+1>=t.length?0:n+1];return{x:(e.x+r.x)/2,y:(e.y+r.y)/2,handler:u}})}}]),e}();e.default=s,o.default.memoize(s.prototype,"controls",!1),o.default.register("polygon",s)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=a(n(0)),i=a(n(81));function a(t){return t&&t.__esModule?t:{default:t}}var u={ondragstart:function(t,e,n){n.mutatePath(null,function(n){n.splice(e,0,t)})},ondragmove:function(t,e,n){n.mutatePath(null,function(n){n[e]=t})},ondragend:function(t,e,n){}},s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"pathExtendable",get:function(){return!0}},{key:"path",get:function(){return this.model.path},set:function(t){this.set("path",t)}},{key:"controls",get:function(){for(var t=this.path,e=[],n=0;n<t.length-1;n++){var r=t[n],o=t[n+1];0==n&&e.push({x:r.x,y:r.y,handler:u}),e.push({x:(r.x+o.x)/2,y:(r.y+o.y)/2,handler:u}),n==t.length-2&&e.push({x:o.x,y:o.y,handler:u})}return e}}]),e}();e.default=s,o.default.memoize(s.prototype,"controls",!1),o.default.register("polyline",s)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=s(n(0)),i=s(n(5)),a=s(n(4)),u=n(1);function s(t){return t&&t.__esModule?t:{default:t}}var c={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"image-selector",label:"image-src",name:"src",property:{displayField:"id",displayFullUrl:!0,baseUrlAlias:"$base_url",defaultStorage:"scene-image",storageFilters:{type:Array,value:[{name:"category",value:"image"}]},useUpload:!0}}],"value-property":"src"},l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,a.default)(i.default)),r(e,[{key:"dispose",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispose",this).call(this),this._offcanvas=null,this._image=null}},{key:"render",value:function(t){var n=this.model,r=n.left,o=n.top,i=n.width,a=n.height,u=n.isGray,s=void 0!==u&&u,c=n.alpha,l=void 0===c?1:c,f=n.src;if(this.prepareIf(!this._image&&f),t.beginPath(),t.globalAlpha*=l,this._image&&this._image.complete)if(s&&this._offcanvas)t.drawImage(this._offcanvas,r,o,i,a);else try{t.drawImage(this._image,r,o,i,a)}catch(n){t.drawImage(e.noimage,r,o,i,a)}else t.drawImage(e.noimage,r,o,i,a)}},{key:"prepare",value:function(t,e){var n=this,r=this.model.src;if(r){this._image=new Image;try{"data"!==String(r).substring(0,4)?this._image.crossOrigin="use-credentials":this._image.crossOrigin=null,this._image.src="string"==typeof r?this.app.url(r):r}catch(t){return void e(t)}this._image.onload=function(){if(n.get("isGray")){var e=n._image.width,r=n._image.height;n._offcanvas=o.default.createCanvas(e,r);var i=n._offcanvas.getContext("2d");i.drawImage(n._image,0,0);var a=function(t,e,n){try{var r=t.getImageData(0,0,e,n)}catch(t){return(0,u.error)("Get Image Data Error: "+t.message),null}for(var o=r.data,i=0;i<e*n*4;i+=4){var a=o[i],s=o[i+1],c=o[i+2],l=parseInt((a+s+c)/3);r.data[i]=l,r.data[i+1]=l,r.data[i+2]=l}return r}(i,e,r);i.putImageData(a,0,0)}t(n)},this._image.onerror=function(t){e(t)}}else t(this)}},{key:"onchange",value:function(t,e){(t.hasOwnProperty("src")||t.hasOwnProperty("isGray"))&&(this._offcanvas=null,this._image=null,this.prepareIf(t.src))}},{key:"ondropfile",value:function(t,e){for(var n=0;n<t.length;n++)if(t[n].type.startsWith("image/"))return void(this.src=e[n])}},{key:"nature",get:function(){return c}},{key:"hasTextProperty",get:function(){return!1}},{key:"src",get:function(){return this.get("src")},set:function(t){this.set("src",t)}}],[{key:"noimage",get:function(){return e.NOIMAGE||(e.NOIMAGE=new Image,e.NOIMAGE.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABIBAMAAAD7Se1QAAAAIVBMVEUAAABHcEwBAQEREREBAQEEBAQGBgYLCwsDAwMDAwMICAi6HF9tAAAAC3RSTlNNAEAERiMYCS41Eac10lYAAAEgSURBVHhe7dY9asQwEAXgh7DNertNiJy48pIitY3SB7bYdk0ukL1BDDmA9gZecoH4pmFQ3MQayUMguPBrNPD4wD9TCMvJmt3M/AtYwXOlXiWgqADVCUBD46MAnGhMBaCiUQmAm8VA/Eh/eWl9Fn5WcxD+OLuRrUYJDKLluwH2InACUgkoACSdADxQc50Bytadb9RkM0CT13TcvlCT1HFg8UTHvasuUVACCa3El6u2UdD8LFTlKhUFFgA+d3dj10aABkUN72N3jAADCrJq7PIIsPidcxBoTHIIAjMFmyCwmGYIAA1P9gFgfCANAOsDSccCDW+uLDB+kLGg94OkZoAGkwsDDAe2DOg5oPxAg03rBR88OHpBz4N8UVeHFSwma74BTW6Ge4rIRa4AAAAASUVORK5CYII="),e.NOIMAGE}}]),e}();e.default=l,o.default.register("image-view",l)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=s(n(0)),a=s(n(5)),u=s(n(4));function s(t){return t&&t.__esModule?t:{default:t}}var c={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"src",name:"src"}],"value-property":"src"},l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,u.default)(a.default)),r(e,[{key:"dispose",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispose",this).call(this),this._audio=null}},{key:"ready",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"ready",this).call(this),this.setSource(this.src)}},{key:"render",value:function(t){var n=this.model,r=n.left,o=n.top,i=n.width,a=n.height;n.src;t.beginPath(),t.drawImage(e.image,r,o,i,a)}},{key:"start",value:function(){this._audio&&(this._audio.classList.add("active"),this._audio.play())}},{key:"pause",value:function(){this._audio&&(this._audio.classList.remove("active"),this._audio.pause())}},{key:"setSource",value:function(t){if(t){this._audio=new Audio;try{"data"!==String(t).substring(0,4)?this._audio.crossOrigin="use-credentials":this._audio.crossOrigin=null,this._audio.src="string"==typeof t?this.app.url(t):t}catch(t){return void console.error(t)}}else this._audio=null}},{key:"onchange",value:function(t,e){t.hasOwnProperty("src")&&this.setSource(t.src)}},{key:"ondblclick",value:function(t){this.started=!this.started}},{key:"ondropfile",value:function(t,e){for(var n=0;n<t.length;n++)if(t[n].type.startsWith("audio/"))return void(this.src=e[n])}},{key:"nature",get:function(){return c}},{key:"hasTextProperty",get:function(){return!1}},{key:"src",get:function(){return this.get("src")},set:function(t){this.set("src",t)}},{key:"started",get:function(){return this._audio&&this._audio.classList.contains("active")},set:function(t){t?this.start():this.pause()}}],[{key:"image",get:function(){return e.IMAGE||(e.IMAGE=new Image,e.IMAGE.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAMAAAC3Ycb+AAAAP1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACzJYIvAAAAFHRSTlMA8BAwgNBgQKB/wCBwUJDg37CvXyUlBK8AABFYSURBVHja7NsBkqIwFIThTiAQgyBq3/+sm6p1tnamZkaTMhJJf1f4S/JeEIiIiIiIiIiIiIiIiEhD7Hg4BH84TpAKjJ4f3NFCtjVd+InXz2RTs+FXlxGylYHfcVfIJmb+YFWSLUyGVJKKBJJKUo+Rd6w63l/qzLuCkryO5fe0l2xk5mMWbe+v0fNBRqf7S3je6CipQ2ACr+dWcYEpzBFS1plpguatsnomMgdIQSOTuQ5SjmE6/UgK8szgdJIUM/FG41YlFmYJ2kkKsY5ZzAwBurHDk3WGeRY0bvYrGa1+rqNI22f7dS32ZnUK1GMr0eSK3mEc9dhKMxp+ZTo8kT2emOXS5LQ1kCxbJBocSd2k5PaIjMVzjWcdJPk9ooBnmzx1t5XbIxqBKpJ4NGTgzwKiGpK4do72gb+ZUMIYtCPm9WCPMsYTE5k2hq2ZvzujlCE1iRmwf3dvmRyKsT0T7b9I7HEPCpqCiqT2IIqaT1pI0noQZdlFC8l/PbYPAnRORT56VBEE6FXkb49agmByKhJ71BME6FsvEntUFQTdqekisUdlQWCXhovEHtUFAWbTapHYo8YgmFybO3vsUWcQYGmxSOxRbRAMprkisUfFQVKmrX18sxt7VB0ENjT1xir2qDxIwkFi3v89e+xRfxAMzfzzIfZ4hyAYDR9zwVuLPd4jCDrTwoLYGb5LEFi3/+E3rweR6urX20c/Fvls2Pvwm9mDSGIPhv8YPyGf3/eo9Ye7O8B2FIShAAooakEttex/rbODad5/yTHIAjqn505IQPv+Xz06dz+4VXORHEZcgAcB8updM8F6e25jBzwIkE07l+x8amMnPDp6nsNJ+BoZ7Q6F8egqAda9VEuRNlZjBzwYkMskdXR73okd8GBAJiKYjBcZKKqG9OiKDbgdfxJ5VhsBPDiQZhaouD3p4hfw4EAmwxisz3MSHwAPEmQ1TB1N+SmXWoAHC7JbZsWl/IxLLcCDBplNo3lrfMLsmwAPGmShAxX5/1vOEzjEz3iyfQ/hI36W4TctsUesOAifPdrQg8M++KYl95iCBkjI1r8634betBAPHZDTPFAmD3zLiHgogVTziMsahz0eIh5aIGHGRSJ2mFtHPR4iHhQIP2UvWGMf8wk74qEIEib7rLjPiBfxiAcCwp8V+Nae3uMdRhAPDIR/J5f/Q2DTcC+hIB7qIGEq3Ti9bx+sryMeAAgS70OK8G2kBD8L8QBAoLWU3g3vUVIc6D0txAMAsY+4jBWowXHO64gHBGKfYJ2T5qY1BxcL98BB+PQ+XiS9xxh9EQ8ChA6C5UXWIUoE9MBB8LVHQoS7ib8/dRn3sAcJ6bQRSdH96RDxIEH4QEX+AHF4LxHEAwUh12xyr1V8lwjiQYDYF8kuf1jluUQQDwrEvkhW8Wc6LhHUgwfhi4QPlHm7LRHawx4kpE191Dq8lgjhAYDQa1cftYrPEiE8OJDb40uqyzdQCA8WhAzL4G/PT4c3WrgHD2IfllGl53V37zsgHg5ApPNvVvq4Fn4spx4oiH1W3CwtEV+PDhEPJyBSkVX4aa7emkM83ICEKWpGM7wdvYCCeDgCEYpcwhLxczhEPFyBCEUWnRL5T6X59SBASBF+9l28TL5F7uEORCZyCUvEx+S7yT0cgoRVb9JaXLR1qUdfgksQ0fTbgmhFB20d8HAKEha14+F8f1sHPNyCiL6EqK+n20/rgIdjkFC0Ho1s6Gndvcc9ICkr/ey8/rHO6vp9KawL8DAFOV6l9Fyub7IbflsCag1qRfVsXWvxHjxIejU+BHZV6uvHD1XiEb++Bw8i+dNd+Wv0eCQmhcPhRPwUUt2DB5G1sfa1aeyzAuyJj9x2HjyIdKzIKw5SI14ieFtvo3kIQERj3lVhkUOnRD7AnjV5369QkAOJZeCH+Jh41xOLs73dQwAifY6dpxCCbjTDzLf1Bm1Y93tAIDOWXcLPvrHyr2hVoEAceEAgDQzB4jetk0/c2OXRHB48EJCpa4dgpYh2ETxtrshz7zx4ICCzfuTSDn8p/EOS9OTjwgMB+cABP3yWYuOPIofs33LigYCULlpZNXJppVU30Vf14kGAUCLijf1D71lN9FW9eFiA9KgZ8FPpPUsSnufGA+8hvAg2Kpz0nrX//qp+PIgpC3i6xJRITOye9fn1VT15ICCrVlQG5rywo0H8x965bVkNwmCYQ2kR6Gmb939WXV65dFnI/tPdjPBfO7XMN4EkTUJtqZp4sCJ1+8jwkhMu0KpMxFXFA8hlVfQSMxGH5mDK1VKV8QCyvTVtUiYyo7V358VStfGoAEFMhGYhEwloxZy9WKo2Hjwg5iSOvFDXeUYd33+PuVfHgwnEBWLocDJp+IIa2fyvperjwQRiXCKGosyXqoA+YfsIELuYu4HAt+msMknfDK4jfQJIzOZ2IPAQWJtFOhQKivR2IDZ6Awis7V0iLxqBI7uEZo19dakTogLSwKvf8yk8Jq6CGK0GKvWlatG7b7kkUU/Lo1gdXWn7/4E0j0qeJDpqN/ABqQcgJgdqURb4chjQktIugDS6wFFiz3JgaJj7AGJmholAe9YKhoZLJ0Ca6smjwJ4VwVN96gVIE5GM71kHaGKxGyAtRDaB2NBhLVmpHyANRKzDO28W7FS3HQFpaIWa8TrfCXQwegJSL5k+8M9UJ+pm9QTEnCIZrR0MDQeQ9ua0iCcYQaBTV0CqNXQW/yiyYG7W1heQanPaCkciBXuH1BkQJzHcDQxmpgGkPatl4WkbCXO/bW9AqlNg4H0PPMi6A1IxkQmOZ8D0ousNSMVEEuyreTAQ6Q7IRJeCX2YZQHhv6SrBOmpkM+YUzN0BqSRQCupmTeCP9wdkhiOREwtEzgGEsWcF9BhK9R8fQDiN7A8DiR0CKXQlj/q9IM8OgXjIzcKBlAHkD6FulgNzJwPIHwpo8mQAkX3LiPq9dKUMAQk9AqmcqmjuBAJCPQIpA4guIAsKJA0gnwNy3A4kDyBIHCEPxAwgf8gPILqA5AFEF5CxZX0lIHYc6rqADLf380BmFMgxgIzUyf8MJKLTRelKHgKy9wgkjfS7LiA0gKgC8vQn3HUA4RQ5LKPIAQciWbqIEg0YkLNDIHYUyqkCsmKN5vg3+W0AYTRATaPY+uu1IwS6UMGAlO6AFPjSCQMStaNh53cdcPG7Hx1Uupo+rx+Bltn1BuTAj5BptEV/bHAAwbnJMICwRmtUDOSEA8s4Rmtw3nITGD6TwUNoG0Ca7xi2YKSPj2eKXQFxQWKA2QbGMWEMMGseOb7C7T47uJS1JyAzVbTjqZdU3zbHzMXWS+qp4Fgn8Ahy/QCRGqQcwU1vGnN7fylboWn8Bzg//hyjxltvdcl45bwFfYKzFyBy11UU9BnjuoqfWizVlQXulpzBTNbaB5Aid+VRrkBFB630AMS9BC8FK2ggE7u/FGy1kvfcB9TKQufX5uUXNWl3EjvWCi4k/u9A3Ddq1CpTIQGe6VN1qd8ArcvDQNw3S41Kn6qQmOq5e7pRr+8fAYLiIJtFrrvYRMYL0q06vj8EZLXUriJzRY8H1xEagOCK7gkghRg6RQYO0I6aWPwIEAru80AiMWSdzAeuDXUKyr+WqpAID8hMHC1Ct8F4mUsQ6W8pJMICki0JHCBczAFdBl38G3VE6ErQhhWlih4LWrCSLpaqjggHiGe9mVjRY0YPoelyqcqIcIDEe97rqJFFH7FcLlUZEQ6Qg5plvZiBFNhtri1VFREGEC/Eg4nZoU5vqi1VFREGkIXDQ8xAIhzoT/WlKiLCAFIYPOQMxOPdjfWlKiLCADJRm3YGj+pDE2xktmmpaogwgMz8d8GrumZ4xzpbvinqISJ+hiTWm7wEqoJdI9JEV9JChAEkS3xCZzKecLcgN6YwlRBhAGmweTsblg6qKMM7Vmh321UQ4QAp1VfwhqVJIh+Wm03W0qV0EOEAybXtivkCmWrKeH2EZ/xBaSBCV2L9Re+LYSqJJIxDu1ew07U0EGEBcTtmHty4JuPtQhvLh1BAhK7Uvvq0GK484QZST0GvvFDqeSJ1IA0r2mfDljvqBoJ//rVsq7yZCA6kXgVkJ2f4ijIGMjOfMVsCBBORB2Jy+sM6ijNvaBUqmw/cStZ8EiKciHwp6Rp++88qmxXQeTUxDiJWJ9wSISvBicgXW+dypn1PqWTznlwgwdZdfiLHr5OELEAEASKvJFRE5JCPKbh8OxHdQKJU0crEzRXrJ/IEkFms6tGyrUw9kQeALFRXvK2iSzsRAAi6BLxM+60xdsqJAEBuXMAMxDLVp+gmAgC57/UT4qvVj3TVRCAgSAYL91aXtyNLzUQAIFhAiP8m0/NHOp+ILiBtPFKrs6bgSOcT0QTEB8nO3QR1yKslggKRf+m11UB0HOl8IlqAeCvauXuo8HnfIqIDyCw6G8XMcGiplMingMzCnbuHFp/3LSLPA4nUpqm5YkWNzwsQeQxIDsKjH5wVSU5qJPIJIIt4jjpqNBAekQeBfJOeHWS81FQoo4/I7UDcS3wUh0liTzLqiEgDqddx4ZHDrNZAACIAEMw88HPYWb0GAhABgEDmgf9Vb5oNBCByOxD3uqWYbCHVBgIQuRlIsbfwMEG5gQBE7gSyHMDsOayrxJvHBRC5B0hOxJH1nK4SlUE6QOR+IG6ju3iYQEqDdIDIzUDyZu/jMRHpS/OiRG4FkiPRfTw8kbrvIAJEACAIDpyHC1/GQHhEbgKSXwTyqIeEur6kixEBgABHOTr7YSX1MSFAhA0E307wUU76Y0KACAsI/tvCRzkF+iIuL0AEAYLbR2QOfvhKJ/obRESBxNt5rPSFXN4f7dyNdqMgEIbhAXWwJErT/e7/Wreb5HTT07QVgWSAeW5g7b4n8qOSUCRPEId4HP93SXp5dDNGRJFcQTxihSH+NW1Bb1cXKpIryJAwnG/zhl8ZcSP6jiKZghwRaaWLnP/AkcSKKJIniEcUs8QfjFLdEmRvkSxB4lfn0QN6DY+lshQpHiT96Dlr6r5hxRUpHST9ZEY71X7DOmOZQVZLsd5Q8wzrPxYYJDiKNqOBG1ZCkZKzrNXu6lHvkjChSFqQsdTPg45ApXtYaUXKr9TNuPcvqO2pVMkitFXAL2a79/qr3HQvVSTXUtofCl79RDXh5CDpw3pwu6+9kRlvtiI5VtPhmHLltT4EKVQkfb8pcOHrXqk6nBAksUjgpKtuYsskaxGKYT0+84uYgziE4YQgMdx0m8PRfis2MbL33PMXoVjD6PEunI4HSjDjStiJP08vQk9hZzQ7oH/geoLYCUBDW4rf4FqCDFt7THUO6B+4jiDn2XNTW7zf4hqCMND4BOsGyw+yAmh0x+QeFh7EeqD5Ce8nLDrI8NpbDyIWHIQNruo4GyAPlhrEzuixBxHLDDJMnfYgYolBricHNfjIdgMWF+Qyu+pkgX4HCwuymL57ELGkIHZG7z2IWE6Q5VV7vGMhQewbtMcZiwhyHj26ne9+xs8PcvDQHnFFqCD7Au0RW4TK+fOKqw4eoOcqYqgU53HR3/5uShFPCfKey9hFDyJO/vAi7RDZnp7X5igyUH72xSDW1E2Pn4tMRCQgR8vLwbgii4gcmLvqQcSPGtIPX3M08wn6I4qYQ94cM/Yw9Xxhmw+X/59wHrtMlX1AmIkzdyaaAnLg1Nnw8WGYSk40X/BOh4+El6LMSBnN2Cd0tPq4w/LJXGrMbCX06PZ2dcM65yzlNertShSHf3SzRAyPM332IcSAHUKPi8EHmXU0l8Uglmni0yipDoi16s+jJKejhywLooz68yiMEcHr2qM4h81CJ++VPJfTu5UwBpv4Pp9DJSi6MJx0bvUwiw4ewgT8zNR0LHUL+OccOpY/3ElzyGKD5pBlMJpDlsOkMythRoNbXh95PJsdA67MrMtAEYbjeDqNo+7oKqWUUkoppZRSSimllFJKFfMXp4vmSjB8n6sAAAAASUVORK5CYII="),e.IMAGE}}]),e}();e.default=l,i.default.register("audio",l)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(0)),o=i(n(4));function i(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,o.default)(r.default)),e}();e.default=a,r.default.register("text",a)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=s(n(0)),a=s(n(5)),u=s(n(4));function s(t){return t&&t.__esModule?t:{default:t}}var c={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"ref",name:"ref",property:"ref"},{type:"select",label:"fit",name:"fit",property:{options:["both","ratio"]}}],"value-property":"ref"},l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,u.default)(a.default)),r(e,[{key:"draw",value:function(t){this._drawing||(this._drawing=!0,o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this,t),this._drawing=!1)}},{key:"prerender",value:function(t){if(o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prerender",this).call(this,t),this.ref){var n=this.ref.center,r=this.center,i=this.refScale;t.translate(r.x,r.y),t.scale(i.x,i.y),t.translate(-n.x,-n.y)}}},{key:"postrender",value:function(t){if(this.ref)return this.ref.postrender(t);o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"postrender",this).call(this,t)}},{key:"render",value:function(t){if(this.ref)return this.ref.render(t);this.model.round;var e=this.bounds,n=e.left,r=e.top,o=e.width,i=e.height;t.beginPath(),t.rect(n,r,o,i)}},{key:"ref",get:function(){var t=this.getState("ref");return t&&"string"==typeof t?this.root.findById(t):null},set:function(t){this.setState("ref",t)}},{key:"refScale",get:function(){var t=this.ref.bounds,e=(this.ref.center,this.bounds),n=(this.center,e.width/t.width),r=e.height/t.height;switch(this.model.fit){case"both":return{x:n,y:r};case"ratio":default:return{x:Math.min(n,r),y:Math.min(n,r)}}}},{key:"nature",get:function(){return c}},{key:"hasTextProperty",get:function(){return!1}}]),e}();e.default=l,i.default.memoize(l.prototype,"ref",!1),i.default.memoize(l.prototype,"refScale",!1),i.default.register("local-ref",l)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=s(n(0)),a=s(n(5)),u=s(n(4));function s(t){return t&&t.__esModule?t:{default:t}}var c={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"scene-number",name:"ref",placeholder:"SCENE-1"},{type:"select",label:"fit",name:"fit",property:{options:["both","ratio"]}}],"value-property":"ref"},l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,u.default)(a.default)),r(e,[{key:"dispose",value:function(){this._releaseRef(),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispose",this).call(this)}},{key:"draw",value:function(t){this._drawing||(this._drawing=!0,o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this,t),this._drawing=!1)}},{key:"prerender",value:function(t){if(o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prerender",this).call(this,t),this.ref){var n=this.ref.root.center,r=this.center,i=this.refScale;t.translate(r.x,r.y),i&&t.scale(i.x,i.y),t.translate(-n.x,-n.y)}}},{key:"postrender",value:function(t){if(this.ref)return this.ref.root.postrender(t);o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"postrender",this).call(this,t)}},{key:"render",value:function(t){if(this.ref)return this.ref.root.render(t);this.model.round;var e=this.bounds,n=e.left,r=e.top,o=e.width,i=e.height;t.beginPath(),t.rect(n,r,o,i)}},{key:"_releaseRef",value:function(){this.__ref&&this.__ref.release&&(this.__ref._container.off("redraw",this.onredraw_ref,this),this.__ref.release()),delete this.__ref}},{key:"onredraw_ref",value:function(){this.invalidate()}},{key:"onchange",value:function(t,e,n){(e.ref||t.ref)&&this._releaseRef()}},{key:"nature",get:function(){return c}},{key:"hasTextProperty",get:function(){return!1}},{key:"refScale",get:function(){if(this.ref){var t=this.ref.root,e=t.bounds,n=(t.center,this.bounds);this.center;if(e.width&&e.height){var r=n.width/e.width,o=n.height/e.height;switch(this.model.fit){case"both":return{x:r,y:o};case"ratio":default:return{x:Math.min(r,o),y:Math.min(r,o)}}}}}},{key:"ref",get:function(){if(this.__ref||this.__waiting)return this.__ref;var t=this.app.refProvider,e=this.getState("ref");if(t&&e){var n=this;n.__waiting=!0,t.get(e,!0).then(function(t){n.__ref=t,n.__ref.on("redraw",n.onredraw_ref,n),delete n.__waiting},function(t){delete n.__waiting})}return this.__ref},set:function(t){this.setState("ref",t)}}]),e}();e.default=l,i.default.memoize(l.prototype,"ref",!1),i.default.memoize(l.prototype,"refScale",!1),i.default.register("global-ref",l)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(0)),o=a(n(4)),i=a(n(85));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,i.default)((0,o.default)(r.default))),e}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=u(n(8)),i=u(n(85)),a=n(36);function u(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,i.default)(o.default)),r(e,[{key:"render",value:function(t){}},{key:"layout",get:function(){return a.Layout.get(this.get("layout"))||a.HTMLAbsoluteLayout}}]),e}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),a=(r=i)&&r.__esModule?r:{default:r};var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),o(e,[{key:"render",value:function(t){var e=this.model.path,n=void 0===e?[]:e;if(!(n.length<=1)){t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)t.lineTo(n[r].x,n[r].y);t.closePath(),this.drawStroke(t)}}},{key:"contains",value:function(t,e){var n=this.model.path,r=!1;return n.forEach(function(o,i){var a=(i+n.length+1)%n.length,u=o.x,s=o.y,c=n[a].x,l=n[a].y;s>e!=l>e&&t<(c-u)*(e-s)/(l-s)+u&&(r=!r)}),r}},{key:"path",get:function(){return this.model.path},set:function(t){this.set("path",t)}}]),e}();e.default=u,a.default.register("path",u)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=a(n(0)),i=a(n(5));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"render",value:function(t){var e=this.model,n=e.x1,r=e.y1,o=e.x2,i=e.y2,a=e.x3,u=e.y3;t.beginPath(),t.moveTo(n,r),t.lineTo(o,i),t.lineTo(a,u),t.closePath()}},{key:"contains",value:function(t,e){for(var n=this.model,r=[n.x1,n.y1,n.x2,n.y2,n.x3,n.y3],o=!1,i=0;i<r.length;i+=2){var a=(i+2)%r.length,u=r[i],s=r[i+1],c=r[a+1];s>e!=c>e&&t<(r[a]-u)*(e-s)/(c-s)+u&&(o=!o)}return o}},{key:"mutable",get:function(){return!0}},{key:"path",get:function(){var t=this.model;return[{x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:t.x3,y:t.y3}]},set:function(t){this.set({x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y,x3:t[2].x,y3:t[2].y})}}]),e}();e.default=u,o.default.memoize(u.prototype,"path",!1),o.default.register("triangle",u)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=a(n(0)),i=a(n(37));function a(t){return t&&t.__esModule?t:{default:t}}var u={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"ratio",name:"ratio",property:"ratio"}]},s={ondragmove:function(t,e,n){n.controls;var r=n.model,o=r.cx,i=r.rx,a=(n.transcoordP2S(t.x,t.y).x-o)/i*100;a=a>=100||a<=-100?100:Math.abs(a),n.set({ratio:a})}},c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"render",value:function(t){var e=this.model,n=e.ratio,r=void 0===n?50:n,o=e.cx,i=e.cy,a=e.rx,u=e.ry,s=e.startAngle,c=e.endAngle,l=e.anticlockwise;t.beginPath(),t.ellipse(o,i,Math.abs(a),Math.abs(u),0,s||0,c||2*Math.PI,l),t.moveTo(o+a/100*r,i),t.ellipse(o,i,Math.abs(a/100*r),Math.abs(u/100*r),0,s||0,c||2*Math.PI,!0)}},{key:"contains",value:function(t,e){var n=this.model,r=n.cx,o=n.cy,i=n.rx,a=n.ry,u=n.ratio,s=(t-r)/(2*i-.5),c=(e-o)/(2*a-.5),l=(t-r)/(i/100*u*2-.5),f=(e-o)/(a/100*u*2-.5),h=!1;return s*s+c*c<.25&&l*l+f*f>.25&&(h=!h),h}},{key:"controls",get:function(){var t=this.model,e=t.cx,n=t.cy;return[{x:e+t.rx/100*t.ratio,y:n,handler:s}]}},{key:"nature",get:function(){return u}}]),e}();e.default=c,o.default.memoize(c.prototype,"controls",!1),o.default.register("donut",c)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=a(n(0)),i=a(n(37));function a(t){return t&&t.__esModule?t:{default:t}}var u={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"ratio",name:"ratio",property:"ratio"},{type:"number",label:"wing",name:"wing",property:"wing"}]},s={ondragmove:function(t,e,n){n.controls;var r=n.model,o=r.cy,i=r.ry,a=(n.transcoordP2S(t.x,t.y).y-o)/i*100+100;a>=100?a=100:a<=0&&(a=0),n.set({ratio:a})}},c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"render",value:function(t){var e=this.model,n=e.ratio,r=void 0===n?30:n,o=e.wing,i=void 0===o?5:o,a=e.cx,u=e.cy,s=e.rx,c=e.ry;e.startAngle,e.endAngle,e.anticlockwise;if(!(i<3)){var l=1.5707963267948966,f=2*Math.PI/i,h=s-r/100*s,p=c-r/100*c;t.save(),t.beginPath(),t.translate(a,u),t.moveTo(s*Math.cos(-l),c*Math.sin(-l)),t.lineTo((s-h)*(Math.cos(f-l)+Math.cos(0-l))/2,(c-p)*(Math.sin(f-l)+Math.sin(0-l))/2);for(var d=1;d<i;d++)t.lineTo(s*Math.cos(f*d-l),c*Math.sin(f*d-l)),t.lineTo((s-h)*(Math.cos(f*(d+1)-l)+Math.cos(f*d-l))/2,(c-p)*(Math.sin(f*(d+1)-l)+Math.sin(f*d-l))/2);t.closePath(),t.restore()}}},{key:"controls",get:function(){var t=this.model,e=t.cx,n=t.cy,r=t.ry;return[{x:e,y:n-r+r*(t.ratio/100),handler:s}]}},{key:"nature",get:function(){return u}}]),e}();e.default=c,o.default.memoize(c.prototype,"controls",!1),o.default.register("star",c)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=u(n(0)),i=u(n(5)),a=u(n(4));function u(t){return t&&t.__esModule?t:{default:t}}var s={mutable:!1,resizable:!0,rotatable:!1,properties:[]},c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,a.default)(i.default)),r(e,[{key:"render",value:function(t){var e=this.bounds,n=e.left,r=e.top,o=e.width,i=e.height;t.beginPath(),t.rect(n,r,o,i)}},{key:"text",get:function(){return this.get("id")},set:function(t){}},{key:"rotatable",get:function(){return!1}},{key:"nature",get:function(){return s}}]),e}();e.default=c,o.default.register("variable",c)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(3),i=n(77);e.default=function(t){return function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,t),r(n,[{key:"animOnValueChange",value:function(t){var e=this;if(t!=this._lastValue){var n=t-(this._lastValue||0);this._lastValue=t,this._anim_alpha=-n,this.animate({step:function(t){e._anim_alpha=n*(t-1),e.invalidate()},duration:1e3,delta:"circ",options:{x:1},ease:"out"}).start()}}},{key:"dispose",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"dispose",this).call(this),delete this._value_substitutor}},{key:"onchange",value:function(t,e){t.hasOwnProperty("value")&&delete this._value_substitutor}},{key:"defaultValueSubstitutor",value:function(){return this.getState("value")}},{key:"animAlpha",get:function(){return this._anim_alpha||0}},{key:"animValue",get:function(){return(this._lastValue||0)+(this._anim_alpha||0)}},{key:"valueSubstitutor",get:function(){return this._value_substitutor||(this._value_substitutor=(0,i.buildSubstitutor)(this.getState("value"),this)||this.defaultValueSubstitutor),this._value_substitutor}},{key:"value",get:function(){return Number(this.valueSubstitutor())||0},set:function(t){delete this._value_substitutor,this.setState("value",Number((0,o.objToVal)(t)))}}]),n}()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.default=function(t){return function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,t),r(n,[{key:"_convertDataFormat",value:function(t,e){var n;switch(e){case"json":n=JSON.parse(t);break;default:n=t}return n}}]),n}()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(243);Object.defineProperty(e,"ModelLayer",{enumerable:!0,get:function(){return c(r).default}});var o=n(249);Object.defineProperty(e,"GuideLayer",{enumerable:!0,get:function(){return c(o).default}});var i=n(250);Object.defineProperty(e,"ShiftLayer",{enumerable:!0,get:function(){return c(i).default}});var a=n(251);Object.defineProperty(e,"SelectionLayer",{enumerable:!0,get:function(){return c(a).default}});var u=n(252);Object.defineProperty(e,"ModelingLayer",{enumerable:!0,get:function(){return c(u).default}});var s=n(260);function c(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"TagLayer",{enumerable:!0,get:function(){return c(s).default}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=p(n(0)),a=(p(n(8)),p(n(14))),u=(n(1),h(n(27)),p(n(84))),s=h(n(86)),c=h(n(244)),l=n(38),f=n(2);function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}var d={x:1,y:1},y={x:0,y:0},v=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"dispose",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispose",this).call(this),delete this._canvas,delete this._overlay}},{key:"contains",value:function(t,e){return!0}},{key:"isRootModel",value:function(){return!0}},{key:"createElement",value:function(){var t=document.createElement("div");return t.style.position="absolute",t.style["user-select"]="none",t.style.overflow="hidden",this._canvas=i.default.createCanvas(1,1),this._canvas.style.position="absolute",t.appendChild(this._canvas),this._overlay&&t.appendChild(this._overlay),t}},{key:"resize",value:function(){this.fitSize(this.element),this.fitSize(this.canvas)}},{key:"capturePath",value:function(t,e){for(var n=this.layout.capturables(this),r=n.length-1;r>=0;r--){var o=n[r];if(o.isContainer()){var i=o.capturePath(t,e);if(i)return i}}return!1}},{key:"postrender",value:function(t){if(o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"postrender",this).call(this,t),!l.License.valid){this._watermark||(this._watermark=new Image,this._watermark.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJsAAAAjCAMAAAC0JoimAAACQ1BMVEVHcEwODw+xHySxHySxHySxHyRYWFldR0mxHyRLS0wPEBAPEBBYWFmxHiNYWFlYWFlYWFm0HyRYWFlYWFlYWFmxHySxHySxHyRYWFkPEBAODw9YWFlYWFm9QkYPEBAPEBBYWFlYWFmxHyRYWFmxHyQPEBBYWFlYWFlYWFkPEBAPEBBYWFlYWFlYWFlYWFkOEA+xHyQPEBD///9YWFmxHyRYWFlYWFlYWFlYWFkPEBBYWFn89vaxHyRYWFlYWFmxHyRYWFkPEBAPEBAPEBCxHySxHyQOEA8OEA+xHyRYWFmxHyRYWFkOEA9YWFmxHySxHyS8PUEPEBCxHyQOEA+xHyRYWFkPEBBYWFlYWFkPEBAPEBDz3d757u4PEBAPEBAPEBCxHySxHSIPEBDTgIMPEBCxHyQPEBAPEBBYWFkOEA+xHySyHySxHyQPEBAPEBCwHCHCT1OxHySxHyQPEBDksbPeoKLKZmmxHyS6ODwPEBAOEA/XjZD/8fHnmpz/2Njll5n+7e3/09S+PkL8y8zae37ikJL2vb7wra/fiIryzs+xHyQPEBCvGR6xHSL///+wGyCsEheuFRqyHySuFxy0HyWsHSK6NzvakZTARkq3MDTuztBwEhGzJCmWGRzipKe1Ky/XhIfBSk7CT1PkrrDNZ2r14ODw09T35uf9+fnIXmLRc3Xy2NnrwcOiHB/+/Px5ExP67++ZGh3ObnHcm525MzeMFxnovb7nt7ntycqTGRtsERDRen1oEA6XGh1qERBpEQ/HVFjdAcS7AAAAfHRSTlMAEw4E93sNAaQEB9er2D4YhRIRIpyfwMQICg5Fev2i+VejKn8J3l9lM8z1iybgLr/Shfa9VimRbks+tv5Jc81ul8fSY3XoJKmV87QdHlJm769ayXYjQbY5aUZx/fvmTl3gXtH88B17KsJujRU4VZCI9qw+M+r29vPGKK/+ZLYwnwAACHRJREFUeF68lklvGkkUx4tNGBCHHIxlJINkwcG+GCQuyEiIsFkIGQUjS3bGGHucWDGxo2QOaJxv8Kp6Be/77uz7PttHm6qmCTTt4Mxh+KtV23tS/fTqva5CVPfHSuZkJuRD16vwIGDOucaNqDsyJcxQq9Vk6Clf6xtK1l1dg91hi4Isv9h7sybDw+siF6nUXWuQv9MNtMGKDB92dnZevajBeGfXcgC+uy51g+0ByB++0g2/vlqTXTc6us5B7YvqWit141QD8trOX1+p/tirmTtv2COvvfpbcf0iQwj9tGyGn3KzRqIhbXDM8tqfivZeALh6OikHa2/2Gq6JxsbBdLCfDex3V9lAr9TqUFy7YrQ8XNLntikPyUEtG0CtLhmuV9PVguqyz2CHmw36h7BfG6D+8PQi7YoYx3SJWzLq2VxQ0rE1RCRJgB+KEzhoqsnmwEN1thF8U8s2gfEU7bLp2C0txY0+cP4nNkFaPz46ELkfkEkSEFH4KTa3erTT2BvWJp77Sjajr5XNqGPjpM2T2xcX5++2qleRkYPD59uf94+IcBWbwmJT2GzF9JBjfnIZIcOqA+PYZBAtpienmcMUtcRWFrVs1khP3hnIhOpszvuWfKAvYdKwcdLpa17R+cAVcNXjZ4pxdAM4Pdt8ykCVjTE2gwMPL2DsnUZZL2YaQWGM0xQiOIwx/WaKGjZjHsw5AEhYGVvSCUw9plY2svkLr2r7QHes0sBZw/qY6Nm8fkXDjM0ej6fc4ZvYn7Uvp7E3ODuFwsPYg9AsxkPF1L1h7E9pznQ8WjDeD0CywNggmXgUTQKMt7IJn+i+r08+XdLuVwJaCfIJ39DosaRja6iRb4asB3uLrBZYvtXZbPN44Tc6CWI80Z5v5cISQISxmRnUnBkyviYbtz7K8xfHsHtK4bZJW+CqA5f8+fGT2xsDGy/5dyLXzuaP35qdvRV3KGzuidjMDD07Wpp3sXeqwZZawJN2OlnEeFXDZoz2lZIVgND3OvWVIHCnyUaevOT5DUkgQON39l4Ajcgpz78VxX92xd0z/uOuoKsFe7MWaNZh/+S8jo01VlbDNAOtLWxlF0DJlW9lQ05wFrRs7Cw5bp/Gb520sX2jxipwQNYv+M9bpNM/ZAV771lRXMf2O41bfz1u6Za4WS0AFhOKtLIZS5AvN9mETXqWn3erEt2cfya3nymN2+0twgnixksWt05s89hPZ0GFbQLjZZWNubF8o+z4nsJWL0VfBnI+hKIqm3mOVYcZek3lRNSn1oLM/hEfT5+e025fgvZ8G6XG95Lw7ZKn+Qad2EawN+6OL2A8i1j0YrNhhU2ZzE8Zpr34Zpax5XrHmIw9AFFjKAcwx9igknhkyUElgnrpuspG3jYrcUAArThgdXr2lLWvj9rqtF97nxaHMZWDRQelaEczP8waZAtSCzNNKfepKlOkwjonQAL5AuCkBgaIUB/AksomwL6KdvmUQIf/22EVtGy2oEd9h0wog+V0bHIiteJRMs0zMjKNUh5PnDkUPSOx1btZ5R3Sq8qHIg/7MpbCWG8E+Sy9ocKYy0WHCEUymUGVDcjuoXIxPDslHOjhjrbrMT3kOC2bXlaDvTkxuFtNboMN6VX2ad4B6hPOZ2re9URYP318+GSrKsAVqh68Pdl+vrHZtFrQ/y9z8z4ngkDUqOkkEI7jaAPdZ6uKAhFFiZNEsSqIYsuMozOiLFXrS9Xusgncv82Y32vbVhTHDwyuuKBZQtKGQDJICCSBZDGkSRYq0vy4YTz2YmxYX0oYmDFYgLYMKsm286sLc7oxcJ0SOo84zeyWAatxCnvxn7Z7Q9YtQMbap34lLlydry4fQPeco7vsjxZFsXu82y/mk71+f7opioerZVEsVw/7/c20X+yN5sSwmhV/HD66the0ELAi3vDt1WMyigoGKku7etz24CZ5letsj072hjvT3bI8OD4YlrPRznBnMy/L/VVRlv3J/nA43wzL/dGsLJ+uDoY7/fG/2eSMxVgiCAIApjiAZDIwGDCvYakrM2B3MTAIIFIBX1pMhTjojTAXhQxdhYQvPbEGdAFqw5Ttp0Wen/06y/MXx+tB/nh0PjjfLPP8+8npID+dPBsMlotBfjZ9nOcXq1eDwWBOU9wnV2xID+qMFKM6b3IpAiusGIYnpLwNbsZ6ka4aKDQ5K41McLoucRBpHVsDT0Mmr7RqfBPAM/iOYNWJpx1Di+dt2wIuhY9Ian1Ke58HpK9ckVTxskpq64KU0LPJ+ujoglaxPxc06b4kZW1C68cpLQ0f/80mxUElaquOG2ishnoKq9R1u1YXQEgMTmIridlmxUyNe6IRSRoQMVJX06El2ZnStHstBCiI455HPJlY5ytBx0zaGapL8PXh+GR9ne23o9//k+3Fz+N//tYQy5mJUwkklVXMyEpbmRE57eASoQUNE1K+o7u6CHpb/SwBKqZhaQ2IJaQmbYHlAMKaYbAdlngUSzUcgETh65JCzhzGJxdvxrYmLdynzBWbkLjA1jqS6rpY1GucknRczutRBD2VpS6ofIUNWQ+ziuE0eDnkKJsScCqLOTMTggqGZlYRm25CPZahJVwnCMNaJAB8fvjD1puxzX48/PD1WQ1ymuAGtqsbKgJVAkaVeIVr0JDJ2mkLzK7HN3kR87bV4nQlEAEaXZmNGrxoOCk4DQ7A0lWt6YgM8TiyE0kW4KwORHfeP37yP9imlG31nAy/jD94jQaMgC93luw1GZBlABBDhAWgEgWEAJEZuRhBphPFARCTGOQQIyy6ANil73Ae9YCAWIIUElqN5YDqqztf3L29/cD3n1Wf+P697Vu+f3/L97+srn3/onru+1v3ff/29j3ff1V9fuvud99+8x68rWiy4FP5prAZIaASdRveaf0FsOq+MCErseEAAAAASUVORK5CYII=");var n=this._watermark;t.globalAlpha=.5,t.drawImage(n,this.model.width-n.width-30,this.model.height-n.height-30)}}},{key:"_repositionOverlay",value:function(){var t=this._overlay;if(t){var e=this.model,n=e.translate,r=void 0===n?y:n,o=e.scale,i=void 0===o?d:o,a=e.rotation,u=void 0===a?0:a,s=this.bounds,c=s.left,l=s.top;s.width,s.height;t.style.left=c+"px",t.style.top=l+"px";var f="rotate("+u+"rad) scale("+i.x+", "+i.y+")";t.style["margin-left"]=r.x+"px",t.style["margin-top"]=r.y+"px",["-webkit-","-moz-","-ms-","-o-",""].forEach(function(e){t.style[e+"transform"]=f})}}},{key:"onchange",value:function(t){var e=this._model;delete e.id,delete e.text,delete e.class,this._repositionOverlay()}},{key:"onchanged",value:function(t,e,n){this.invalidate()}},{key:"onmouseenter",value:function(t,n){if(this.app&&!this.app.isEditMode&&n){var r=n.origin;if(!(r instanceof e)&&r.model.event&&r.model.event.hover){var o=r.model.event.hover;o.emphasize&&c.emphasize(r),o.infoWindow&&!r.hidden&&u.default.show(r,o.infoWindow,!0),o.target&&o.hasOwnProperty("value")&&(r._lastValue=this.root.variable(o.target),this.root.variable(o.target,o.value))}}}},{key:"onmouseleave",value:function(t,e){if(this.app&&!this.app.isEditMode&&e){var n=e.origin;if(n.model.event&&n.model.event.hover){var r=n.model.event.hover;r&&(r.emphasize&&c.normalize(n),r.infoWindow&&!n.hidden&&u.default.hide(n,r.infoWindow),r.target&&r.hasOwnProperty("value")&&(this.root.variable(r.target,n._lastValue),delete n._lastValue))}}}},{key:"onclick",value:function(t,e){if(!this.app.isEditMode&&e){var n=e.origin;if(n.model.event&&n.model.event.tap){var r=n.model.event.tap;r.infoWindow&&!n.hidden&&u.default.show(n,r.infoWindow),r&&r.target&&(/^\$/.test(r.target)?this.root.variable(r.target.substring(1),n.substitute(r.value)):"popup"==r.target?s.show(n,r.value):this.trigger(r.target,n.substitute(r.value)))}}}},{key:"stuck",get:function(){return!0}},{key:"overlay",get:function(){if(!this._overlay){var t=document.createElement("div");t.style.position="absolute",t.style["user-select"]="none",t.style["transform-origin"]="top left",this.element&&this.element.appendChild(t),f.GESTURES.forEach(function(e){t.addEventListener(e,function(t){t.stopPropagation()})}),f.KEYEVENTS.forEach(function(e){t.addEventListener(e,function(t){t.stopPropagation()})}),this._overlay=t,this._repositionOverlay()}return this._overlay}},{key:"canvas",get:function(){return this._canvas}},{key:"MPP",get:function(){var t=this.model,e=t.scale,n=void 0===e?{x:1,y:1}:e;switch(t.unit){case"mm":case"cm":return 1/this.app.PPM/n.x;case"in":return 1/this.app.PPI/n.x;case"px":default:return 1/n.x}}},{key:"eventMap",get:function(){return{"(self)":{"(all)":{change:this.onchanged,mouseenter:this.onmouseenter,mouseleave:this.onmouseleave,click:this.onclick}}}}}]),e}();e.default=v,v.Popup=s,i.default.register("model-layer",v)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.emphasize=function(t){if(t.hasOwnProperty("_backupStrokeStyle"))return;if(t._backupStrokeStyle=t.model.strokeStyle,t.set("strokeStyle","#f26522"),t.hasOwnProperty("_backupLineWidth"))return;t._backupLineWidth=t.model.lineWidth,t.set("lineWidth",t.model.lineWidth+5)},e.normalize=function(t){if(!t.hasOwnProperty("_backupStrokeStyle"))return;if(t.set("strokeStyle",t._backupStrokeStyle),delete t._backupStrokeStyle,!t.hasOwnProperty("_backupLineWidth"))return;t.set("lineWidth",t._backupLineWidth),delete t._backupLineWidth}},function(t,e,n){"use strict";(function(t){var r=n(246),o=n(247),i=n(248);function a(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=s.prototype:(null===t&&(t=new s(e)),t.length=e),t}function s(t,e,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);s.TYPED_ARRAY_SUPPORT?(t=e).__proto__=s.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),o=(t=u(t,r)).write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(s.isBuffer(e)){var n=0|p(e.length);return 0===(t=u(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?u(t,0):h(t,e);if("Buffer"===e.type&&i(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=u(t,e<0?0:0|p(e)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|p(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(s.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(r)return N(t).length;e=(""+e).toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,o);if("number"==typeof e)return e&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,o){var i,a=1,u=t.length,s=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,u/=2,s/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var l=-1;for(i=n;i<u;i++)if(c(t,i)===c(e,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===s)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(n+s>u&&(n=u-s),i=n;i>=0;i--){for(var f=!0,h=0;h<s;h++)if(c(t,i+h)!==c(e,h)){f=!1;break}if(f)return i}return-1}function b(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var u=parseInt(e.substr(2*a,2),16);if(isNaN(u))return a;t[n+a]=u}return a}function m(t,e,n,r){return z(N(e,t.length-n),t,n,r)}function _(t,e,n,r){return z(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function w(t,e,n,r){return _(t,e,n,r)}function x(t,e,n,r){return z(U(e),t,n,r)}function k(t,e,n,r){return z(function(t,e){for(var n,r,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function O(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function P(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,a,u,s,c=t[o],l=null,f=c>239?4:c>223?3:c>191?2:1;if(o+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(i=t[o+1]))&&(s=(31&c)<<6|63&i)>127&&(l=s);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&(s=(15&c)<<12|(63&i)<<6|63&a)>2047&&(s<55296||s>57343)&&(l=s);break;case 4:i=t[o+1],a=t[o+2],u=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&u)&&(s=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&u)>65535&&s<1114112&&(l=s)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=f}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=A));return n}(r)}e.Buffer=s,e.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},e.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,e,n){return c(null,t,e,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?u(t,e):void 0!==n?"string"==typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}(null,t,e,n)},s.allocUnsafe=function(t){return f(null,t)},s.allocUnsafeSlow=function(t){return f(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=s.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},s.byteLength=d,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?P(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,n);case"utf8":case"utf-8":return P(this,e,n);case"ascii":return E(this,e,n);case"latin1":case"binary":return j(this,e,n);case"base64":return O(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,e,n,r,o){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,o>>>=0,this===t)return 0;for(var i=o-r,a=n-e,u=Math.min(i,a),c=this.slice(r,o),l=t.slice(e,n),f=0;f<u;++f)if(c[f]!==l[f]){i=c[f],a=l[f];break}return i<a?-1:a<i?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return m(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function E(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function j(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function M(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=Y(t[i]);return o}function S(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function T(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,n,r,o,i){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function R(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function I(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function B(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,i){return i||B(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function D(t,e,n,r,i){return i||B(t,0,n,8),o.write(t,e,n,r,52,8),n+8}s.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=s.prototype;else{var o=e-t;n=new s(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},s.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},s.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},s.prototype.readUInt8=function(t,e){return e||T(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||T(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||T(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},s.prototype.readInt8=function(t,e){return e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){e||T(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){e||T(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||T(t,4,this.length),o.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||T(t,4,this.length),o.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||T(t,8,this.length),o.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||T(t,8,this.length),o.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||C(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},s.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||C(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):I(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);C(this,t,e,n,o-1,-o)}var i=0,a=1,u=0;for(this[e]=255&t;++i<n&&(a*=256);)t<0&&0===u&&0!==this[e+i-1]&&(u=1),this[e+i]=(t/a>>0)-u&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);C(this,t,e,n,o-1,-o)}var i=n-1,a=1,u=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===u&&0!==this[e+i+1]&&(u=1),this[e+i]=(t/a>>0)-u&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):I(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(i<1e3||!s.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var a=s.isBuffer(t)?t:N(new s(t,r).toString()),u=a.length;for(i=0;i<n-e;++i)this[i+e]=a[i%u]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function Y(t){return t<16?"0"+t.toString(16):t.toString(16)}function N(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function U(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(e,n(30))},function(t,e,n){"use strict";e.byteLength=function(t){return 3*t.length/4-c(t)},e.toByteArray=function(t){var e,n,r,a,u,s=t.length;a=c(t),u=new i(3*s/4-a),n=a>0?s-4:s;var l=0;for(e=0;e<n;e+=4)r=o[t.charCodeAt(e)]<<18|o[t.charCodeAt(e+1)]<<12|o[t.charCodeAt(e+2)]<<6|o[t.charCodeAt(e+3)],u[l++]=r>>16&255,u[l++]=r>>8&255,u[l++]=255&r;2===a?(r=o[t.charCodeAt(e)]<<2|o[t.charCodeAt(e+1)]>>4,u[l++]=255&r):1===a&&(r=o[t.charCodeAt(e)]<<10|o[t.charCodeAt(e+1)]<<4|o[t.charCodeAt(e+2)]>>2,u[l++]=r>>8&255,u[l++]=255&r);return u},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i="",a=[],u=0,s=n-o;u<s;u+=16383)a.push(l(t,u,u+16383>s?s:u+16383));1===o?(e=t[n-1],i+=r[e>>2],i+=r[e<<4&63],i+="=="):2===o&&(e=(t[n-2]<<8)+t[n-1],i+=r[e>>10],i+=r[e>>4&63],i+=r[e<<2&63],i+="=");return a.push(i),a.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=a.length;u<s;++u)r[u]=a[u],o[a.charCodeAt(u)]=u;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function l(t,e,n){for(var o,i,a=[],u=e;u<n;u+=3)o=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e,n){"use strict";e.read=function(t,e,n,r,o){var i,a,u=8*o-r-1,s=(1<<u)-1,c=s>>1,l=-7,f=n?o-1:0,h=n?-1:1,p=t[e+f];for(f+=h,i=p&(1<<-l)-1,p>>=-l,l+=u;l>0;i=256*i+t[e+f],f+=h,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===i)i=1-c;else{if(i===s)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),i-=c}return(p?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,u,s,c=8*i-o-1,l=(1<<c)-1,f=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),(e+=a+f>=1?h/s:h*Math.pow(2,1-f))*s>=2&&(a++,s/=2),a+f>=l?(u=0,a=l):a+f>=1?(u=(e*s-1)*Math.pow(2,o),a+=f):(u=e*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;t[n+p]=255&u,p+=d,u/=256,o-=8);for(a=a<<o|u,c+=o;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*y}},function(t,e,n){"use strict";var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=c(n(0)),i=c(n(14)),a=c(n(83)),u=c(n(82)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2));function c(t){return t&&t.__esModule?t:{default:t}}var l=20,f=0,h=20,p=0,d=20,y=20,v=90*Math.PI/180,g="m",b=0,m="9px Verdana",_=20,w="#f4f4f4",x="#999";function k(t,e,n){return{left:-t.x,top:-t.y,width:l,height:_}}function O(t,e,n,r){return{left:l-t.x,top:f-t.y,origin:h-t.x,width:e-l,height:_}}function P(t,e,n,r){var i={x:-t.x+p+_/2,y:-t.y+d+(n-d)/2},a=o.default.transcoordRR(-t.x+p,-t.y+d,i,v);return{left:a.x-(n-d),top:a.y,origin:y-t.y,width:n-d,height:_}}function A(t){var e=t.get("translate");return{left:-e.x,top:-e.y,width:t.canvas.width/s.DPPX,height:t.canvas.height/s.DPPX}}var E=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.appScale={x:1,y:1},"disabled"!==t.ruler&&(r.hruler=new a.default({left:l,top:f,origin:h,margin:b,height:_,unit:g,rotation:0,font:m,fillStyle:w,strokeStyle:x,capturable:!1}),r.vruler=new a.default({left:0,top:0,origin:y,margin:b,height:_,unit:g,rotation:v,font:m,side:"top",fillStyle:w,strokeStyle:x,capturable:!1}),r.origin_rect=new u.default({left:-h,top:-y,width:h,height:y,fillStyle:w,strokeStyle:x,lineWidth:1}),r.addComponent(r.hruler),r.addComponent(r.vruler),r.addComponent(r.origin_rect)),r.invalidate(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"added",value:function(t){if(this.hruler){var e=this.rootModel,n=Object.assign({},e.get("translate"));n.x<l&&(n.x+=l),n.y<d&&(n.y+=d);var r=e.get("scale")||{x:1,y:1};this.appScale=r,this.hruler.set("scale",r.x),this.vruler.set("scale",r.y),e.set("translate",n),this.set("translate",n),this.screen_coord=A(this);var o=this.screen_coord,i=o.width,a=o.height;this.hruler.set(O(n,i,0,this.hruler)),this.vruler.set(P(n,0,a,this.vruler)),this.origin_rect.set(k(n))}else this.screen_coord=A(this)}},{key:"resize",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"resize",this).call(this),this.screen_coord=A(this);var t=this.screen_coord,n=t.width,r=t.height;this.hruler&&(this.hruler.set(O(this.model.translate,n,0,this.hruler)),this.vruler.set(P(this.model.translate,0,r,this.vruler)),this.origin_rect.set(k(this.model.translate)))}},{key:"render",value:function(t){if(this.guide){t.save();var e=this.guide,n=e.x,r=e.y,o=this.screen_coord,i=o.top,a=o.left,u=o.width,s=o.height;t.beginPath(),t.moveTo(n,i),t.lineTo(n,i+s),t.moveTo(a,r),t.lineTo(a+u,r),t.lineWidth=1,t.strokeStyle="tomato",t.setLineDash([2,3]),t.font="10px tahoma",t.fillStyle="#333";var c=this.transcoordS2C(n,r,this.rootModel);t.textBaseline=c.y>200?"bottom":"top",t.textAlign=c.x>200?"right":"left";var l=c.y>200?-5:5,f=c.x>200?-5:5,h=Math.round(n/this.appScale.x),p=Math.round(r/this.appScale.y);t.fillText(" "+h+", "+p+" ",n+f,r+l),t.stroke(),t.restore()}}},{key:"contains",value:function(t,e){return!0}},{key:"onmousedown_origin",value:function(t,e){this.rootModel.set("translate",{x:h,y:y})}},{key:"onchange_root_model",value:function(t,e,n){if(t.scale&&(this.appScale=t.scale,this.hruler&&(this.hruler.set("scale",t.scale.x),this.vruler.set("scale",t.scale.y))),t.translate&&this.set({translate:{x:t.translate.x,y:t.translate.y}}),t.scale||t.translate){if(this.screen_coord=A(this),this.hruler){var r=this.model.translate,o=this.screen_coord,i=o.width,a=o.height;this.hruler.set(O(r,i,0,this.hruler)),this.vruler.set(P(r,0,a,this.vruler)),this.origin_rect.set(k(r))}this._guide=null}this.invalidate()}},{key:"onmouseout_child",value:function(t){this._guide=null,this.invalidate()}},{key:"onmousemove_child",value:function(t,e){t.target&&"CANVAS"!==t.target.tagName?this.guide=null:this.guide=this.transcoordC2S(t.offsetX,t.offsetY)}},{key:"capturable",get:function(){return!1}},{key:"guide",get:function(){return this._guide},set:function(t){this._guide=t,this.invalidate()}},{key:"eventMap",get:function(){return{"(root)":{"(descendant)":{mousemove:this.onmousemove_child,mouseout:this.onmouseout_child,dragmove:this.onmousemove_child},"model-layer":{change:this.onchange_root_model}},"(self)":{"(descendant)":{mousedown:this.onmousedown_origin}}}}}]),e}();e.default=E,o.default.register("guide-layer",E)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=u(n(0)),i=u(n(14)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"added",value:function(t){var e=this.rootModel.get("translate");this.set("translate",e)}},{key:"render",value:function(t){}},{key:"contains",value:function(t,e){return!(this.app.mode!=a.MODE_SHIFT)}},{key:"onkeydown",value:function(t){32==t.keyCode&&void 0===this.before_mode&&(this.before_mode=this.app.mode,this.app.mode=a.MODE_SHIFT)}},{key:"onkeyup",value:function(t){32==t.keyCode&&(void 0!=this.before_mode&&(this.app.mode=this.before_mode),delete this.before_mode)}},{key:"ondragstart",value:function(t){this.last_position=this.transcoordC2S(t.offsetX,t.offsetY)}},{key:"ondragmove",value:function(t){var e=this.transcoordC2S(t.offsetX,t.offsetY),n=e.x,r=e.y;this.rootModel.move({x:n-this.last_position.x,y:r-this.last_position.y}),this.last_position=this.transcoordC2S(t.offsetX,t.offsetY)}},{key:"eventMap",get:function(){return{"(root)":{"(self)":{keydown:this.onkeydown,keyup:this.onkeyup}}}}}]),e}();e.default=s,o.default.register("shift-layer",s)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=u(n(0)),i=(u(n(8)),u(n(28)),u(n(14))),a=n(1);function u(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,r){var o=t.selected,i=r?o.slice(0):[];r&&i.length>0?e=i[0].parent:e.isContainer()||(e=e.parent);var u=e.layout.capturables(e),s=!!e.layout.joinType;if(r&&n.selected.forEach(function(t){i.splice(i.indexOf(t),1)}),n.selected=[],u.forEach(function(t){t.capturable&&function(t,e,n){var r,o,i,u,s=e.sx,c=e.sy,l=e.ex,f=e.ey;if(s>l?(r=l,o=s):(r=s,o=l),c>f?(i=f,u=c):(i=c,u=f),n){var h=t.bounds,p=t.transcoordS2TR(h.left,h.top),d=t.transcoordS2TR(h.left+h.width,h.top+h.height),y=p.x,v=d.x,g=p.y,b=d.y,m=Math.min(r,y,o,v),_=Math.max(r,y,o,v),w=Math.min(i,g,u,b),x=Math.max(i,g,u,b);return!(_-m>Math.abs(o-r)+Math.abs(v-y)||x-w>Math.abs(u-i)+Math.abs(b-g))}var k=t.path;if(!k)return(0,a.error)("컴포넌트에 get path가 잘못 구현되어있음.",t),!1;for(var O=0;O<k.length;O++){var P=t.transcoordS2TR(k[O].x,k[O].y);if(r>P.x||o<P.x||i>P.y||u<P.y)return!1}return!0}(t,n,s)&&-1==i.indexOf(t)&&n.selected.push(t)}),i=i.concat(n.selected),o.length!==i.length)t.selected=i;else for(var c=0;c<i.length;c++)if(o[c]!=i[c]){t.selected=i;break}}function c(t,e,n,r,o){o||s(t,e,n,r)}var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"added",value:function(t){var e=this.rootModel,n=e.get("translate"),r=e.get("scale");this.set("translate",n),this.set("scale",r)}},{key:"contains",value:function(t,e){return!1}},{key:"render",value:function(t){var e=this.selbox;if(e){var n=e.sx,r=e.sy,o=e.ex,i=e.ey,a=this.get("scale")||{x:1,y:1};t.beginPath(),t.rect(n,r,o-n,i-r),t.setLineDash([2/a.x,4/a.y]),t.lineWidth=1/a.x,t.strokeStyle="black",t.stroke()}}},{key:"onkeydown",value:function(t,e){e.origin;var n=e.deliverer,r=n.selected;if(1!=r.length)return!1;var o=r[0],i=o.parent;if(!i||i===n)return!1;if("Tab"==t.code){if("Tab"!=t.code)return!1;var u=i.layout.capturables(i),s=u.indexOf(o);if(-1==s){if(!i.indexOf(o))return(0,a.warn)("Container not contains [",o,"] as a component"),!1;s=0}var c=u.length;t.shiftKey?s--:s++,o=u[(s+c)%c]}else{if(!i.layout.keyNavigate)return!1;o=i.layout.keyNavigate(i,o,t)||o}n.selected=[o],t.preventDefault()}},{key:"onchange_root_model",value:function(t,e,n){t.translate&&this.set("translate",t.translate),t.scale&&this.set("scale",t.scale)}},{key:"_pendingDecision",value:function(t){this.downpoint={x:t.offsetX,y:t.offsetY}}},{key:"_selectGroupItem",value:function(t,e){for(var n=this.selected.indexOf(t),r=t.parent;r.parent.isGroup();)r=r.parent;var o=[],i=!1,a=!1;if(this.selected.forEach(function(t){var e=t.parent;if(t!==r){for(;e.parent.isGroup();)e=e.parent;e===r&&(o.push(t),i=!0)}else a=!0}),i)if(e.shiftKey){if(-1!=n)return void this._pendingDecision(e);o.push(t)}else{if(-1!=n)return void this._pendingDecision(e);o=[t]}else if(a)return void this._pendingDecision(e);this.selected=o}},{key:"onmousedown_comp",value:function(t,e){var n=e.origin;if(this.downpoint=null,t.shiftKey){if(n.parent.isGroup())return void this._selectGroupItem(n,t);if(-1!=this.selected.indexOf(n))return void this._pendingDecision(t);var r=this.selected.filter(function(t){return!t.isRootModel()&&!!t.parent}),o=r.length>0&&r[0].parent;if(o&&o!==n.parent)return void(n.parent.isGroup()&&this._pendingDecision(t));r.push(n),this.selected=r}else{if(-1!=this.selected.indexOf(n))return;this.selected=[n]}}},{key:"onmouseup_comp",value:function(t,e){if(this.downpoint&&this.downpoint.x===t.offsetX&&this.downpoint.y===t.offsetY){var n=e.origin,r=this.selected.indexOf(n);if(-1==r&&n.parent.isGroup()&&(r=this.selected.indexOf(n.parent)),-1!==r&&t.shiftKey){var o=this.selected.slice();return r>-1&&o.splice(r,1),void(this.selected=o)}n.parent.isGroup()&&(this.selected=[n])}}},{key:"ondragstart_selbox",value:function(t,e){if(e.origin.stuck){var n=this.transcoordC2S(t.offsetX,t.offsetY),r=n.x,o=n.y;this.selbox={sx:r,sy:o,selected:[]}}}},{key:"ondragmove_selbox",value:function(t,e){var n=e.origin;if(n.stuck){var r=this.transcoordC2S(t.offsetX,t.offsetY),o=r.x,i=r.y;e.deliverer;if(this.selbox){this.selbox.ex=o,this.selbox.ey=i;c(this,n,this.selbox,t.shiftKey),this.invalidate()}}}},{key:"ondragend_selbox",value:function(t,e){e.origin.stuck&&(this.last_pos=null,this.selbox=null,c(this,null,null,!1,!0),this.invalidate())}},{key:"eventMap",get:function(){return{"(root)":{"(self)":{keydown:this.onkeydown}},"model-layer":{"(self)":{change:this.onchange_root_model},"(all)":{dragstart:this.ondragstart_selbox,dragmove:this.ondragmove_selbox,dragend:this.ondragend_selbox,mousedown:this.onmousedown_comp,mouseup:this.onmouseup_comp}}}}}]),e}();e.default=l,o.default.register("selection-layer",l)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=h(n(0)),i=(h(n(28)),h(n(14))),a=f(n(17)),u=f(n(253)),s=h(n(7)),c=h(n(15)),l=f(n(2));function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function h(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=new u.PathHandler(r),i=new u.ControlHandler(r),a=new u.Resizer(r),s=new u.Rotator(r);return r._modelers=[o,i,a,s],r._control_mode_modelers=[i,o,a,s],r.focusOutline=new u.FocusOutline(r),r.groupOutline=new u.GroupOutline(r),r._reversed_modelers=r._modelers.slice().reverse(),r._control_mode_reverse_modelers=r._control_mode_modelers.slice().reverse(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"added",value:function(t){var e=this.rootModel,n=e.get("translate"),r=e.get("scale");this.set("translate",n),this.set("scale",r)}},{key:"contains",value:function(t,e){if(this._state_dragging)return!0;this.modelers.forEach(function(t){return t.reset()});for(var n=this.selected.filter(function(t){return!!t.parent}),r=this.get("scale")||{x:1,y:1},o=0;o<n.length;o++)for(var i=n[o],a=i.transcoordT2S(t,e),u=0;u<this.modelers.length;u++){var s=this.modelers[u];if(s.contains(a.x,a.y,i,r))return this.currentModeler=s,!0}return!1}},{key:"_componentDrawer",value:function(t,e,n,r){var o=[],i=e.parent;if(e.isRootModel())return t.save(),r(t,e,n),void t.restore();for(;i&&!i.isRootModel();)o.push(i),i=i.parent;t.save(),o.reverse().forEach(function(e){var n=e.rotatePoint;t.translate(n.x,n.y);var r=e.get("scale");r&&t.scale(r.x,r.y),t.rotate(e.get("rotation")),t.translate(-n.x,-n.y);var o=e.bounds;t.translate(o.left,o.top)});var a=e.rotatePoint;t.translate(a.x,a.y);var u=e.get("scale");u&&t.scale(u.x,u.y),t.rotate(e.get("rotation")),t.translate(-a.x,-a.y),r(t,e,n),t.restore()}},{key:"prerender",value:function(t){var e=this.model,n=e.translate,r=e.scale,o=void 0===r?{x:1,y:1}:r,i=e.rotation;t.save(),t.beginPath(),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.rect(0,0,t.canvas.width,t.canvas.height),t.fillStyle="black",t.globalAlpha=.5,t.fill(),t.restore(),n&&t.translate(n.x*l.DPPX,n.y*l.DPPX),t.scale(o.x*l.DPPX,o.y*l.DPPX),i&&t.rotate(i),t.clearRect(0,0,this.rootModel.get("width"),this.rootModel.get("height"))}},{key:"render",value:function(t){var e=this;t.beginPath();var n=this.get("scale")||{x:1,y:1},r=this.selected.filter(function(t){return!!t.parent});if(this.focused&&this._componentDrawer(t,this.focused,n,function(t,n,r){e.focusOutline.draw(t,n,r)}),r.length>0&&r[0].parent.isGroup()){for(var o=r[0].parent;o.parent.isGroup();)o=o.parent;this._componentDrawer(t,o,n,function(t,n,r){e.groupOutline.draw(t,n,r)})}r.forEach(function(r){e._componentDrawer(t,r,n,function(t,n,r){e.reversedModelers.forEach(function(e){return e.draw(t,n,r)})})})}},{key:"onkeydown",value:function(t){"Alt"==t.key&&(this._control_mode=!0,this.invalidate())}},{key:"onkeyup",value:function(t){"Alt"==t.key&&(this._control_mode=!1,this.invalidate())}},{key:"onselected",value:function(t,e){this.invalidate()}},{key:"onchange_model",value:function(t,e,n){n.origin===n.deliverer&&(t.translate&&this.set("translate",t.translate),void 0!==t.rotation&&this.set("rotation",t.rotation),t.scale&&this.set("scale",t.scale)),this.invalidate()}},{key:"ondblclick",value:function(t){"function"==typeof this.currentModeler.ondblclick&&this.currentModeler.ondblclick(t),this.invalidate()}},{key:"onmousedown",value:function(t){this.currentModeler.onmousedown(t),this.invalidate()}},{key:"onmouseup",value:function(t){"function"==typeof this.currentModeler.onmouseup&&this.currentModeler.onmouseup(t),this.invalidate()}},{key:"onmouseenter",value:function(t,e){this.invalidate()}},{key:"onmouseleave",value:function(t,e){this.invalidate()}},{key:"ondragstart",value:function(t){this.currentModeler.ondragstart(t),this._state_dragging=!0}},{key:"ondragmove",value:function(t){this.currentModeler.ondragmove(t),this.invalidate()}},{key:"ondragend",value:function(t){this._state_dragging=!1,this.currentModeler.ondragend(t),this.invalidate()}},{key:"ondrop",value:function(t,e){var n=this,r=e.origin,o=t.dataTransfer.files;if(!(o.length<1)){var i=this.rootModel.transcoordC2S(t.offsetX,t.offsetY),u=this.rootModel;Promise.all(Array.from(o).map(function(t){return new Promise(function(e,n){var r=new FileReader;r.addEventListener("loadend",function(t){e(r.result)}),["error","abort"].forEach(function(t){return r.addEventListener(t,function(t){n(t)})}),r.readAsDataURL(t)})})).then(function(e){if(t.altKey)return s.default.around(n.app.commander,function(){r.ondropfile(o,e)}),void(n.selected=[r]);var l=[],f=e.map(function(t,e){var n=void 0;return o[e].type.startsWith("image/")?(n=a.compile({type:"image-view",top:0,left:0,width:200,height:200,src:t},u.app),l.push(new Promise(function(e,r){var o=new Image;o.src=t,o.onload=function(){n.set({width:o.width,height:o.height}),e()},o.onerror=function(t){r(t)}}))):o[e].type.startsWith("audio/")&&(n=a.compile({type:"audio",top:0,left:0,width:20,height:20,src:t},u.app)),n&&(n.center=i,i.x+=50,i.y+=50),n}).filter(function(t){return t}).map(function(t){return{component:t,to_container:u}});f.length>0&&Promise.all(l).then(function(){n.app.commander.execute(new c.default({changes:f})),n.selected=f.map(function(t){return t.component})},function(t){console.error(t)})},function(t){console.error(t)})}}},{key:"onwheel_scale",value:function(t,e){if(0!=t.deltaY||0!=t.deltaX){var n=e.deliverer;if(t.shiftKey){if(-1!=navigator.userAgent.indexOf("Win"))var r=t.deltaY<0?1:-1;else r=t.deltaX<0?1:-1;s.default.around(this.app.commander,function(){n.selected.forEach(function(t){var e=t.get("fontSize")||l.DEFAULT.FONT_SIZE;e<1&&(e=1),e+=r,t.set("fontSize",e)})})}else{r=t.deltaY<0?1:-1;var o=n.get("scale")||{x:1,y:1},i=n.get("translate"),a=t.offsetX,u=t.offsetY,c=n.transcoordC2S(a,u),f=.1*r,h={x:o.x+f,y:o.y+f};if(r<0&&o.x<.2||r>0&&o.x>10)return;n.set("scale",h);var p=n.transcoordC2S(a,u);n.set("translate",{x:i.x+(p.x-c.x)*h.x,y:i.y+(p.y-c.y)*h.y})}}}},{key:"modelers",get:function(){return this._control_mode?this._control_mode_modelers:this._modelers}},{key:"reversedModelers",get:function(){return this._control_mode?this._control_mode_reverse_modelers:this._reversed_modelers}},{key:"eventMap",get:function(){return{"model-layer":{"(all)":{change:this.onchange_model,wheel:this.onwheel_scale,drop:this.ondrop}},"(root)":{"(self)":{selected:this.onselected,keydown:this.onkeydown,keyup:this.onkeyup}}}}}]),e}();e.default=p,o.default.register("modeling-layer",p)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(254);Object.defineProperty(e,"FocusOutline",{enumerable:!0,get:function(){return c(r).default}});var o=n(255);Object.defineProperty(e,"GroupOutline",{enumerable:!0,get:function(){return c(o).default}});var i=n(256);Object.defineProperty(e,"ControlHandler",{enumerable:!0,get:function(){return c(i).default}});var a=n(257);Object.defineProperty(e,"PathHandler",{enumerable:!0,get:function(){return c(a).default}});var u=n(258);Object.defineProperty(e,"Resizer",{enumerable:!0,get:function(){return c(u).default}});var s=n(259);function c(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"Rotator",{enumerable:!0,get:function(){return c(s).default}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layer=e}return r(t,[{key:"draw",value:function(t,e,n){var r=e.bounds;0!=r.width&&0!=r.height&&(t.beginPath(),t.rect(r.left,r.top,r.width,r.height),t.clip(),t.beginPath(),t.strokeStyle="#f26522",t.lineWidth=4,t.shadowBlur=10,t.shadowColor="black",t.shadowOffsetX=0,t.shadowOffsetY=0,t.rect(r.left,r.top,r.width,r.height),t.stroke(),t.closePath())}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layer=e}return r(t,[{key:"draw",value:function(t,e,n){var r=e.bounds;t.beginPath(),t.rect(r.left,r.top,r.width,r.height),t.setLineDash([3/n.x,4/n.y]),t.lineWidth=1/n.x,t.strokeStyle="black",t.stroke(),t.setLineDash([]),t.closePath()}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(7),a=(r=i)&&r.__esModule?r:{default:r};var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layer=e}return o(t,[{key:"reset",value:function(){this.active=null}},{key:"contains",value:function(t,e,n,r){var o=this,i=n.controls;return!!i&&(i.every(function(i,a){return Math.abs(t-i.x)<=4/r.x&&Math.abs(e-i.y)<=4/r.y&&(o.active={component:n,index:a,handler:i.handler}),!o.active}),!!this.active)}},{key:"draw",value:function(t,e,n){var r=e.controls;r&&r.forEach(function(e,r){t.beginPath(),t.lineWidth=1/n.x,t.ellipse(e.x,e.y,4/n.x,4/n.y,0,0,2*Math.PI,!0),t.fillStyle="#ff5d72",t.fill(),t.strokeStyle="#fff",t.stroke()})}},{key:"onevent",value:function(t,e){var n=this.active,r=n.handler,o=n.component,i=n.index,a=o.transcoordC2S(e.offsetX,e.offsetY);a=o.transcoordS2P(a.x,a.y),r&&"function"==typeof r[t]&&r[t](a,i,o)}},{key:"onmousedown",value:function(t){this.onevent("onmousedown",t)}},{key:"ondragstart",value:function(t){var e=this.active;e.changes=a.default.before([e.component]),this.onevent("ondragstart",t)}},{key:"ondragmove",value:function(t){this.onevent("ondragmove",t)}},{key:"ondragend",value:function(t){this.onevent("ondragend",t);var e=this.active,n=e.component,r=e.changes;a.default.after(r,n.app.commander),n.parent&&n.parent.calculateBounds&&n.parent.calculateBounds()}},{key:"selected",get:function(){return this.layer.selected}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(7),a=(r=i)&&r.__esModule?r:{default:r};function u(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}var s=15*Math.PI/180,c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layer=e}return o(t,[{key:"reset",value:function(){this.active=null}},{key:"contains",value:function(t,e,n,r){var o=this;return!!n.mutable&&(n.path.every(function(i,a){return Math.abs(t-i.x)<=4/r.x&&Math.abs(e-i.y)<=4/r.y&&(o.active={component:n,index:a}),!o.active}),!!this.active)}},{key:"draw",value:function(t,e,n){if(e.mutable&&!e.stuck){var r=e.path,o=this.active;r.forEach(function(r,i){t.beginPath(),t.ellipse(r.x,r.y,4/n.x,4/n.y,0,0,2*Math.PI,!0),t.lineWidth=1/n.x,t.strokeStyle="#656565",t.fillStyle="#fff",o&&o.component===e&&o.index===i&&(t.strokeStyle="#fa7703",o.toFill&&(t.fillStyle="#ffb80c")),t.fill(),t.stroke()})}}},{key:"ondblclick",value:function(t){var e=this.active.component;if(e.pathExtendable){var n=e.path.slice();n.length<4||(n.splice(this.active.index,1),e.path=n)}}},{key:"onmousedown",value:function(t){this.active.toFill=!0}},{key:"ondragstart",value:function(t){var e=this.active;e.changes=a.default.before([e.component])}},{key:"ondragmove",value:function(t){var e,n,r=this.active,o=r.component,i=r.index,a=o.transcoordC2S(t.offsetX,t.offsetY);if(a=o.transcoordS2P(a.x,a.y),t.shiftKey){var c=o.path.length,l=o.isLine()&&0==i?o.path[1]:o.path[(i-1+c)%c];l=o.transcoordS2P(l.x,l.y);var f,h=0;if(c>2)o.isLine()?0==i?f=o.path[2]:1!=i&&(f=o.path[i-2]):f=o.path[(i-2+c)%c],f&&(h=u(f=o.transcoordS2P(f.x,f.y),l));var p=Math.round((u(l,a)-h)/s)*s+h;a=function(t,e,n){return{x:Math.cos(e)*n+t.x,y:Math.sin(e)*n+t.y}}(l,p,(e=l,n=a,Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y))))}o.mutatePath(null,function(t){t[i]=a})}},{key:"ondragend",value:function(t){var e=this.active,n=e.component,r=e.changes;a.default.after(r,n.app.commander),n.parent&&n.parent.calculateBounds&&n.parent.calculateBounds()}},{key:"selected",get:function(){return this.layer.selected}}]),t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=0,i=1,a=2,u=3,s=4,c=5,l=6,f=7;function h(t,e,n){var r,h,p=t.bounds,d=p.left,y=p.top,v=p.width,g=p.height;switch(e){case o:r=d,h=y;break;case i:r=d+v/2,h=y;break;case a:r=d+v,h=y;break;case u:r=d+v,h=y+g/2;break;case s:r=d+v,h=y+g;break;case c:r=d+v/2,h=y+g;break;case l:r=d,h=y+g;break;case f:r=d,h=y+g/2}var b=r,m=h,_=t.transcoordT2S(n.x,n.y);return{dx:_.x-b,dy:_.y-m}}function p(t,e,n,r,h,p){var d=t.bounds,y=d.left,v=d.top,g=d.width,b=d.height,m={left:y,top:v,width:g,height:b};switch(e){case o:y+=r,v+=h,g-=r,b-=h;break;case i:v+=h,b-=h;break;case a:v+=h,g+=r,b-=h;break;case u:g+=r;break;case s:g+=r,b+=h;break;case c:b+=h;break;case l:y+=r,g-=r,b+=h;break;case f:y+=r,g-=r}if(t.mutateBounds(function(e){return Math.abs(g)<=.001&&(g=.001),Math.abs(b)<=.001&&(b=.001),t.adjustResize({left:y,top:v,width:g,height:b},m,n)},this),t.isContainer()&&t.layout.ABSOLUTE&&!t.isGroup()){var _=m.left-y,w=m.top-v;p?t.components.forEach(function(t){t.delta("tx",0),t.delta("ty",0),t.move({x:_,y:w})}):t.components.forEach(function(t){t.delta("tx",_),t.delta("ty",w)})}else{var x=p&&t.parent;x&&x.isGroup()&&group.calculateBounds()}}function d(t){var e=t.left,n=t.top,r=t.width,o=t.height,i=e+r/2,a=n+o/2,u=e+r,s=n+o;return[{x:e,y:n},{x:i,y:n},{x:u,y:n},{x:u,y:a},{x:u,y:s},{x:i,y:s},{x:e,y:s},{x:e,y:a}]}var y=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layer=e}return r(t,[{key:"reset",value:function(){this.active=null}},{key:"contains",value:function(t,e,n,r){var o=this;return!!n.resizable&&(d(n.bounds).every(function(i,a){return Math.abs(t-i.x)<=4/r.x&&Math.abs(e-i.y)<=4/r.y&&(o.active={component:n,index:a}),!o.active}),!!this.active)}},{key:"draw",value:function(t,e,n){if(!e.isLine()){var r=e.bounds;if(t.beginPath(),t.rect(r.left,r.top,r.width,r.height),t.setLineDash([3/n.x,4/n.y]),t.lineWidth=1/n.x,t.strokeStyle="black",t.stroke(),t.setLineDash([]),e.resizable){var o=this.active;d(r).forEach(function(r,i){t.beginPath(),t.rect(r.x-4/n.x,r.y-4/n.y,8/n.x,8/n.y),t.setLineDash([0,0]),t.strokeStyle="#656565",t.stroke(),t.fillStyle="#fff",o&&o.component===e&&o.index===i&&(t.strokeStyle="#fa7703",o.focus&&(t.fillStyle="#ffb80c")),t.fill(),t.stroke()})}}}},{key:"onmousedown",value:function(t){this.active.focus=!0}},{key:"ondragstart",value:function(t){var e=this.active.component;this.active.bounds=e.bounds,this.active.boundsList=this.layer.selected.filter(function(t){return t.resizable}).map(function(t){return t.bounds})}},{key:"ondragmove",value:function(t){var e=this.active,n=e.component,r=e.index,o=e.boundsList,i=e.bounds,a=this.layer.transcoordC2S(t.offsetX,t.offsetY);n.bounds=i;var u=h(n,r,a);this.layer.selected.filter(function(t){return t.resizable}).forEach(function(e,n){e.bounds=o[n],p(e,r,t.shiftKey,u.dx,u.dy,!1)})}},{key:"ondragend",value:function(t){var e=this.active,n=e.component,r=e.index,o=e.boundsList,i=e.bounds,a=this.layer.transcoordC2S(t.offsetX,t.offsetY);n.bounds=i;var u=h(n,r,a);this.layer.selected.filter(function(t){return t.resizable}).forEach(function(e,n){e.bounds=o[n],p(e,r,t.shiftKey,u.dx,u.dy,!0)}),this.active.component.app.commander.execute(null,!1)}},{key:"selected",get:function(){return this.layer.selected}}]),t}();e.default=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();o(n(0)),o(n(7));function o(t){return t&&t.__esModule?t:{default:t}}var i=20,a=2*Math.PI,u=Math.PI/2;function s(t,e){var n=t.bounds;return{x:n.left+n.width/2,y:n.top-i/e.y}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layer=e}return r(t,[{key:"reset",value:function(){this.active=null}},{key:"contains",value:function(t,e,n,r){if(!n.rotatable)return!1;var o=s(n,r);return Math.abs(t-o.x)<=4/r.x&&Math.abs(e-o.y)<=4/r.y&&(this.active={component:n},!0)}},{key:"draw",value:function(t,e,n){if(e.rotatable){t.beginPath();var r=s(e,n);t.lineWidth=1.5/n.x,t.moveTo(r.x,r.y+i/n.y),t.lineTo(r.x,r.y),t.strokeStyle="#656565",t.stroke(),t.beginPath(),t.ellipse(r.x,r.y,4/n.x,4/n.y,0,0,a,!0),t.stroke(),t.fillStyle="#fff",t.fill();var o=this.active;o&&o.component===e&&(t.strokeStyle="#fa7703",t.stroke(),o.toFill&&(t.fillStyle="#ffb80c",t.fill()))}}},{key:"onmousedown",value:function(t){this.active.toFill=!0}},{key:"ondragstart",value:function(t){var e=this.active;e.component;e.start_rotation=e.component.get("rotation"),e.rotations=this.layer.selected.filter(function(t){return t.rotatable}).map(function(t){return t.get("rotation")})}},{key:"ondragmove",value:function(t){var e=this.active.component,n=e.transcoordC2S(t.offsetX,t.offsetY);n=e.transcoordS2P(n.x,n.y);var r=e.rotatePoint,o=e.get("rotation")||0,i=Math.atan((r.y-n.y)/(r.x-n.x)),s=(i=r.x>=n.x?i-u:u+i)-o;this.layer.selected.filter(function(t){return t.rotatable}).forEach(function(e,n){var r=((e.get("rotation")||0)+s)%a;e.set("rotation",e.adjustRotation(r,t.shiftKey))})}},{key:"ondragend",value:function(t){var e=this.active,n=e.component;e.rotations;n.app.commander.execute(null,!1)}},{key:"selected",get:function(){return this.layer.selected}}]),t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=a(n(0)),i=a(n(14));!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(2));function a(t){return t&&t.__esModule?t:{default:t}}var u=225*Math.PI/180,s=135*Math.PI/180,c=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r._anim_alpha=1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"_drawArrow",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=n.x-e.x,i=n.y-e.y,a=Math.atan2(i,o),c=n.x+r*Math.cos(a+u),l=n.y+r*Math.sin(a+u),f=n.x+r*Math.cos(a+s),h=n.y+r*Math.sin(a+s);t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(n.x,n.y),t.moveTo(n.x,n.y),t.lineTo(c,l),t.moveTo(n.x,n.y),t.lineTo(f,h),t.stroke()}},{key:"animOnTargetChange",value:function(t){var e=this;t!==this._lastTargets&&(this._lastTargets=t,this._anim_alpha=1,this.animate({step:function(t){e._anim_alpha=1-t*t,e.invalidate()},duration:5e3,delta:"linear",options:{x:1},ease:"out"}).start())}},{key:"render",value:function(t){var e=this,n=this.targets&&this.targets.filter(function(t){return t.rootModel});if(!n||0==n.length)return this._animate&&this._animate.stop(),void delete this._animate;var r=!1;n.forEach(function(n){var o=n.get("id");if(t.globalAlpha*=e._anim_alpha,o){var i="#"+o,a=n.bounds,u=a.left,s=a.top,c=n.transcoordS2C(u,s,n.rootModel),l=c.x,f=c.y;l=Math.max(l,0),f=Math.max(f-18,0),t.font="12px Arial";var h=t.measureText(i);t.fillStyle="#FF0000",t.fillRect(l,f,h.width+6,16),t.fillStyle="white",t.fillText(i,l+3,f+13),r=!0}t.lineWidth=2,t.strokeStyle="orange",n.mappings&&n.mappings.forEach(function(o){var i=e.root.findAll(o.target,n);i&&i.forEach(function(r){var o=n.center,i=r.center;o=n.transcoordS2C(o.x,o.y,n.rootModel),i=r.transcoordS2C(i.x,i.y,r.rootModel),e._drawArrow(t,o,i)}),r=!0})}),r&&this.animOnTargetChange(this.targets)}},{key:"_ontag",value:function(t){this.targets&&-1!==this.targets.lastIndexOf(t)||(this.targets=(this.targets||[]).concat(t))}},{key:"_offtag",value:function(t){if(this.targets){var e=this.targets.slice();e.splice(this.targets.lastIndexOf(t),1),this.targets=e}}},{key:"_resettag",value:function(){this.targets=[]}},{key:"ontagreset",value:function(t,e){this._resettag()}},{key:"ontag",value:function(t,e){this._ontag(e.origin)}},{key:"offtag",value:function(t,e){this._offtag(e.origin)}},{key:"onmouseenter",value:function(t,e){this._resettag(),this._ontag(e.origin)}},{key:"onmouseleave",value:function(t,e){this._resettag()}},{key:"targets",get:function(){return this._targets},set:function(t){this._targets=t&&t.filter(function(t){return!t.isLayer()}),this.invalidate()}},{key:"eventMap",get:function(){return{"model-layer":{"(descendant)":{tag:this.ontag,tagreset:this.ontagreset,mouseenter:this.onmouseenter,mouseleave:this.onmouseleave}}}}}]),e}();e.default=c,o.default.register("tag-layer",c)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(262);Object.defineProperty(e,"compile",{enumerable:!0,get:function(){return(t=r,t&&t.__esModule?t:{default:t}).default;var t}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(264);Object.defineProperty(e,"Engine",{enumerable:!0,get:function(){return i(r).default}});var o=n(266);function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"UAEventHandler",{enumerable:!0,get:function(){return i(o).default}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(265),a=(r=i)&&r.__esModule?r:{default:r},u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(20));var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventMaps=[],this.root=e,e.eventMap&&this.add(e,e.eventMap)}return o(t,[{key:"stop",value:function(){this.eventMaps.forEach(function(t){return t.eventPump.stop()})}},{key:"add",value:function(t,e){var n=this;if(this.root){var r=function(r){var o=e[r];if("(self)"===r&&void 0===t.on)throw new Error("(self) selector not available when deliverer is not a event handlable object.");u.select(r,n.root,t).forEach(function(r){var i=new a.default(r);i.on(t,o),i.start(),n.eventMaps.push({eventPump:i,listener:t,handlerMap:e,deliverer:r})})};for(var o in e)r(o)}}},{key:"remove",value:function(t,e){for(var n=this.eventMaps.slice(0),r=0;r<n.length;r++){var o=n[r];o.listener!==t||e&&o.handlerMap!==e||(this.eventMaps.splice(r,1),o.eventPump.dispose())}}},{key:"clear",value:function(){this.eventMaps.slice(0).forEach(function(t){return t.eventPump.dispose()}),this.eventMaps=[]}},{key:"dispose",value:function(){this.stop(),this.clear()}},{key:"root",set:function(t){this._root=t},get:function(){return this._root}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(20)),i=n(1);function a(){var t=arguments,e=t[t.length-1],n=this.event_pump;n.listeners.forEach(function(r){!function(t,e,n,r,i){for(var a in n){var u=n[a];if(o.match(a,r.origin,e,t))for(var s in u){var c=u[s];s==r.name&&(r.listener=e,c.apply(e,i))}}}(n.deliverer,r.listener,r.cloned_handlers,e,t)})}var u=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),void 0===e.on)throw new Error("Deliverer should be a event handlable object.");this.deliverer=e,this.listeners=[]}return r(t,[{key:"start",value:function(){this.deliverer.on("(all)",a,{event_pump:this})}},{key:"stop",value:function(){this.deliverer.off("(all)",a)}},{key:"on",value:function(t,e){var n=Object.assign({},e);Object.keys(n).forEach(function(e){if(0==e.indexOf("?")){var r=n[e],o=e.substr(1),a=t.get(o);delete n[e],a?n[a]=r:(0,i.warn)("EventPump#on","variable #{selector} is not evaluated on listener")}}),this.listeners.push({listener:t,handlers:e,cloned_handlers:n})}},{key:"off",value:function(t,e){for(var n=0;n<this.listeners.length;n++){var r=this.listeners[n];r.listener!==t||e&&r.handlers!==e||this.listeners.splice(n,1)}}},{key:"clear",value:function(){this.listeners=[]}},{key:"dispose",value:function(){this.stop(),this.clear()}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=(i(n(0)),i(n(8)),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2)));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u={NORMAL:0,DRAGGABLE:1,DRAGGING:2},s=0,c=1,l=2,f={},h=0;var p=function(){function t(e,n){a(this,t),this._type=n.type,this._ctrlKey=n.ctrlKey,this._altKey=n.altKey,this._shiftKey=n.shiftKey,this._metaKey=n.metaKey;var r=function(t,e){if(e.touches){var n=e.touches[0];if(!n)return f;var r=e.target.getBoundingClientRect();return f={x:e.offsetX||n.clientX-(r.x||r.left),y:e.offsetY||n.clientY+(r.y||r.top)}}return{x:e.offsetX,y:e.offsetY}}(0,n);if(this._offsetX=r.x,this._offsetY=r.y,"wheel"==n.type)this.deltaX=n.deltaX,this.deltaY=n.deltaY,this.deltaZ=n.deltaZ;else if("drop"==n.type)this.dataTransfer=n.dataTransfer;else if(n.type.match(/^touch/)&&(this._scale=n.scale,this._touches=n.touches,this._changedTouches=n.changedTouches,void 0==this._scale)){var o=function(t){var e,n,r=0,o=0,i=0;if(1===t.touches.length)return i;Array.from(t.touches).forEach(function(t){e=void 0!=e?Math.min(t.screenX,e):t.screenX,r=Math.max(t.screenX,r),n=void 0!=n?Math.min(t.screenY,n):t.screenY,o=Math.max(t.screenY,o)});var a=r-e||0,u=o-n||0;return i=Math.sqrt(Math.pow(a,2)+Math.pow(u,2))||0}(n);h>0&&(this._scale=o/h),h=o}}return r(t,[{key:"stopPropagation",value:function(){this._stop_=!0}},{key:"isPropagationStopped",value:function(){return this._stop_}},{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"offsetX",get:function(){return this._offsetX}},{key:"offsetY",get:function(){return this._offsetY}},{key:"altKey",get:function(){return this._altKey}},{key:"ctrlKey",get:function(){return this._ctrlKey}},{key:"shiftKey",get:function(){return this._shiftKey}},{key:"metaKey",get:function(){return this._metaKey}},{key:"touches",get:function(){return this._touches}},{key:"changedTouches",get:function(){return this._changedTouches}},{key:"scale",get:function(){return this._scale}}]),t}();function d(t,e){return t.capture(e.offsetX,e.offsetY)}function y(t,e,n){if(t){n.type=e;var r="on"+e;t[r]&&t[r](n),n.isPropagationStopped()||t.trigger(e,n)}}var v=function(){function t(e,n){var r=this;a(this,t),this.container=e,this.html_element=n,this.status=u.NORMAL,this.last_target=null,this.gesture_handlers=o.GESTURES.map(function(t){return r.gestureHandlerBuilder(t)}),this.keyevent_handlers=o.KEYEVENTS.map(function(t){return r.keyeventHandlerBuilder(t)}),o.GESTURES.forEach(function(t,e){return n.addEventListener(t,r.gesture_handlers[e])}),o.KEYEVENTS.forEach(function(t,e){return n.addEventListener(t,r.keyevent_handlers[e])}),n.ondragover=this.gestureHandlerBuilder("dragover"),n.ondrop=this.gestureHandlerBuilder("drop"),n.tabIndex=1}return r(t,[{key:"dispose",value:function(){var t=this;o.GESTURES.forEach(function(e,n){return t.html_element.removeEventListener(e,t.gesture_handlers[n])}),o.KEYEVENTS.forEach(function(e,n){return t.html_element.removeEventListener(e,t.keyevent_handlers[n])}),delete this.gesture_handlers,delete this.keyevent_handlers,delete this.last_target}},{key:"gestureHandlerBuilder",value:function(t){var e=this["on"+t].bind(this),n=this.html_element;return function(t){return!e(new p(n,t))&&t.preventDefault(),!1}}},{key:"keyeventHandlerBuilder",value:function(t){return this["on"+t].bind(this)}},{key:"ondragover",value:function(t){return y(d(this.container,t),t.type,t),!1}},{key:"ondrop",value:function(t){return y(d(this.container,t),t.type,t),!1}},{key:"onclick",value:function(t){return this.html_element.focus(),y(d(this.container,t),t.type,t),this.last_target=null,!1}},{key:"ondblclick",value:function(t){return y(d(this.container,t),t.type,t),this.last_target=null,!1}},{key:"onkeydown",value:function(t){return this.container.trigger(t.type,t),!1}},{key:"onkeyup",value:function(t){return this.container.trigger(t.type,t),!1}},{key:"onmousemove",value:function(t){switch(this.status){case u.DRAGGABLE:var e=t.offsetX-this.__dragstart_e.offsetX,n=t.offsetY-this.__dragstart_e.offsetY;if(e*e+n*n<16)break;this.status=u.DRAGGING,y(this.last_target,"dragstart",this.__dragstart_e),this.__dragmove_e=t,y(this.last_target,"dragmove",t);break;case u.DRAGGING:this.__dragmove_e=t,y(this.last_target,"dragmove",t);break;default:var r=d(this.container,t);this.last_target!=r&&(this.last_target&&y(this.last_target,"mouseleave",t),r&&y(r,"mouseenter",t)),y(r,t.type,t),this.last_target=r}return!1}},{key:"onmousedown",value:function(t){switch(this.status){case u.DRAGGING:y(this.last_target,"dragend",t),this.last_target=null,this.status=u.NORMAL;break;default:var e=d(this.container,t);this.last_target=e,this.status=u.DRAGGABLE,this.__dragstart_e=t,y(e,t.type,t)}return!1}},{key:"onmouseup",value:function(t){switch(this.status){case u.DRAGGING:y(this.last_target,"dragend",t);break;default:y(d(this.container,t),t.type,t)}return this.last_target=null,this.status=u.NORMAL,!1}},{key:"onmouseout",value:function(t){var e=d(this.container,t);switch(this.status){case u.DRAGGING:y(this.last_target,"dragend",t);break;default:if(this.last_target&&this.last_target===e)return;this.last_target&&y(this.last_target,"mouseleave",t)}return this.last_target=null,this.status=u.NORMAL,!1}},{key:"ontouchstart",value:function(t){var e=this,n=d(this.container,t);return this.last_target=n,this.status=c,this.touchPoints||(this.touchPoints=[]),this.touchPoints.push(t.changedTouches[0]),this.holdTimer=setTimeout(function(){e.status=s,y(e.last_target,"hold",t),delete e.holdTimer},500),y(n,t.type,t),!1}},{key:"ontouchmove",value:function(t){var e=this;if(!t.touches||!t.changedTouches)return y(this.last_target,"dragstart",t),y(this.last_target,"dragmove",t),!1;var n=d(this.container,t);switch(this.status){case c:Array.from(t.changedTouches).forEach(function(t){var n=e.touchPoints.find(function(e){return e.identifier===t.identifier});if(n){var r=n.clientX-t.clientX,o=n.clientY-t.clientY;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))>=16?(e.status=l,void(e.holdTimer&&(clearTimeout(e.holdTimer),delete e.holdTimer))):void 0}});break;case l:if(this.holdTimer&&(clearTimeout(this.holdTimer),delete this.holdTimer),2===t.changedTouches.length&&void 0!=t.scale&&1!==t.scale&&(t.scale<.9||t.scale>1.1))return y(this.last_target,"pinch",t),!1;y(this.last_target,"pan",t),n=this.last_target;break;default:this.last_target!=n&&(this.last_target&&y(this.last_target,"mouseleave",t),n&&y(n,"mouseenter",t)),this.last_target=n}return y(n,"touchmove",t),!1}},{key:"ontouchend",value:function(t){var e=d(this.container,t);switch(this.status){case l:e=this.last_target;break;case c:var n=performance.now(),r=n-this.touchedAt;this.holdTimer&&(clearTimeout(this.holdTimer),delete this.holdTimer,y(e,r<500?"doubletap":"tap",t),this.touchedAt=n)}y(e,"touchend",t);var o=this.touchPoints.findIndex(function(e){return e.identifier===t.changedTouches[0].identifier});return this.touchPoints.splice(o,1),this.last_target=null,this.status=s,!1}},{key:"onwheel",value:function(t){return y(d(this.container,t),t.type,t),!0}}]),t}();e.default=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventMap=void 0;var r=n(29);Object.defineProperty(e,"EventMap",{enumerable:!0,get:function(){return o(r).default}});o(n(268)),o(n(269));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";var r=n(2),o=u(n(29)),i=u(n(7)),a=u(n(76));function u(t){return t&&t.__esModule?t:{default:t}}function s(t){if(t.hasTextProperty&&!t.textHidden){var e=t.model,n=e.text,o=void 0===n?"":n,u=e.rotation,s=void 0===u?0:u,c=e.bold,l=void 0===c?r.DEFAULT.BOLD:c,f=e.italic,h=void 0===f?r.DEFAULT.ITALIC:f,p=e.textWrap,d=void 0===p?r.DEFAULT.TEXT_WRAP:p,y=e.fontFamily,v=void 0===y?r.DEFAULT.FONT_FAMILY:y,g=e.fontColor,b=void 0===g?r.DEFAULT.FONT_COLOR:g,m=e.textAlign,_=void 0===m?r.DEFAULT.TEXT_ALIGN:m,w=e.textBaseline,x=void 0===w?r.DEFAULT.TEXT_BASELINE:w,k=e.paddingTop,O=void 0===k?0:k,P=e.paddingBottom,A=void 0===P?0:P,E=e.paddingLeft,j=void 0===E?0:E,M=e.paddingRight,S=void 0===M?0:M,T=e.fontSize,C=void 0===T?r.DEFAULT.FONT_SIZE:T,R=e.lineHeight,I=void 0===R?1.2*C:R,B=t.bounds,L=B.left,D=B.top,F=B.width,Y=B.height;t.textHidden=!0;var N=document.createElement("textarea");r.GESTURES.forEach(function(t){N.addEventListener(t,function(t){t.stopPropagation()},!0)}),r.KEYEVENTS.forEach(function(t){N.addEventListener(t,function(t){t.stopPropagation()},!0)});var U=t.transcoordS2C(L,D),z=function(t){for(var e=0,n=1,r=t;r;){e+=r.get("rotation")||0;var o=r.get("scale")||{x:1,y:1},i=o.x,a=o.y;n*=Math.max(i,a)||1,r=r.parent}return{rotation:e,scale:n}}(t),H=(s=z.rotation,z.scale),W=F-j-S,G=W,X=Y-O-A;switch(N.style.position="absolute",N.style.width=G+"px",N.style.height=X+"px",N.style.paddingLeft=Math.max(j,0)+"px",N.style.paddingRight=S+"px",N.style.paddingTop=Math.max(O,0)+"px",N.style.paddingBottom=A+"px",N.value=o,N.style.fontFamily=v,N.style.fontSize=C+"px",N.style.lineHeight=I+"px",N.style.overflow="hidden",N.style.resize="none",N.style.outline="none",N.style.border=0,N.style.backgroundColor="transparent",N.style.display="inline-block",N.style.color=b,l&&(N.style.fontWeight="bold"),h&&(N.style.fontStyle="italic"),_){case"right":case"end":N.style.textAlign="right";break;case"justify":N.style.textAlign="justify";break;case"left":case"start":N.style.textAlign="left";break;case"center":default:N.style.textAlign="center"}var V=[l,h,C+"px",v].filter(function(t){return!!t}).join(" ");Z(o);var q=t.root.target_element;q.appendChild(N),N.select();var Q,K=!1;N.onkeydown=function(t){"Escape"!=t.code&&(t.shiftKey||"Enter"!=t.code&&"NumpadEnter"!=t.code)?setTimeout(function(){Z(N.value)}):(K=Q.skipUpdate="Escape"==t.code,document.createEvent?N.dispatchEvent(Q):N.fireEvent(Q.eventType,Q))},document.createEvent?(Q=document.createEvent("HTMLEvents")).initEvent("blur",!0,!1):(Q=document.createEventObject()).eventType="blur";var J=t.root.selected;N.addEventListener("blur",function e(n){t.root.selected=J,t.textHidden=!1,N.removeEventListener("blur",e,!1),N.parentElement&&N.parentElement.removeChild(N),q.focus(),n.skipUpdate||K||t.app.commander.execute(new i.default({changes:[{component:t,before:{text:o},after:{text:N.value}}]}))},!1)}function Z(e){var n={left:0,top:0},r=I*function(t,e,n,r){var o,i=t.getContext();return i.save(),i.font=n,o=(0,a.default)(i,e,r,t.get("textWrap")).length,i.restore(),o}(t,e,V,W);switch(N.style.height=r+"px",x){case"top":case"hanging":break;case"bottom":case"alphabetic":n.top=X-r;break;case"middle":default:n.top=X/2-r/2}if(!d){var o=function(t,e,n,r){var o=e.split("\n"),i=r,a=t.getContext();return a.save(),a.font=n,o.forEach(function(t){var e=a.measureText(t).width;e>i&&(i=e)}),a.restore(),i}(t,e,V,W);switch(N.style.width=o+"px",_){case"right":case"end":n.left=W-o;break;case"left":case"start":break;case"center":case"justify":default:n.left=(W-o)/2}}N.style.marginLeft=n.left+"px",N.style.marginTop=n.top+"px";var i="translate("+U.x+"px, "+U.y+"px) scale("+H+") rotate("+s+"rad)";["-webkit-","-moz-","-ms-","-o-",""].forEach(function(t){N.style[t+"transform"]=i,N.style[t+"transform-origin"]=-n.left+"px "+-n.top+"px"})}}o.default.register("text-editor",{"(root)":{"(self)":{keydown:function(t,e){e.origin;var n=e.deliverer.selected;return!(1!==n.length||!n[0].hasTextProperty||"Enter"!=t.code&&"NumpadEnter"!=t.code||(s(n[0]),t.preventDefault(),0))}}},"model-layer":{"(descendant)":{dblclick:function(t,e){s(e.origin)}}}})},function(t,e,n){"use strict";!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(2));var r=u(n(29)),o=u(n(88)),i=(u(n(0)),u(n(8)),u(n(28)),u(n(7))),a=u(n(15));function u(t){return t&&t.__esModule?t:{default:t}}var s=0,c=2,l=3,f=4,h=(0,n(3).debounce)(function(t,e,n){if(n)t.focused=null;else{var r=[];e[0].parent.isGroup()?t.focused=e[0].parent:(e.forEach(function(t){t.path.forEach(function(e){r.push(t.transcoordS2T(e.x,e.y))})}),t.focused=t.capturePath(r,e))}},300);r.default.register("move-handler",{"model-layer":{"(descendant)":{dragstart:function(t,e){var n=e.origin,r=e.deliverer;if(!n.stuck){var a=r.selected,u=r.selected.filter(function(t){return!t.stuck});if(a.length!==u.length&&(a=r.selected=u),0!=a.length){var c=a[0].transcoordC2S(t.offsetX,t.offsetY);c=a[0].transcoordS2P(c.x,c.y),this.last_pos=c,this.direction=s,r.focused=a[0].parent,t.altKey?(r.selected=a.map(function(t){var e=(0,o.default)(t);return t.parent.addComponent(e),e}),this.duplicates=r.selected.map(function(t){return{component:t}})):this.changes=i.default.before(a)}}},dragmove:function(t,e){var n=e.origin,r=e.deliverer;if(!n.stuck){var o=r.selected;if(0!=o.length){var i=o[0].transcoordC2S(t.offsetX,t.offsetY),a=i.x,u=i.y,p=o[0].transcoordS2P(a,u);t.shiftKey?this.direction==c&&(this.direction=s):this.direction=c;var d=p.x-this.last_pos.x,y=p.y-this.last_pos.y;if(this.direction==s){if(d*d+y*y<25)return;Math.abs(d)>Math.abs(y)?this.direction=l:this.direction=f}this.direction==l?y=0:this.direction==f&&(d=0),o.forEach(function(t){t.move({x:d,y:y})}),this.last_pos=p,h(r,o)}}},dragend:function(t,e){var n=e.origin,r=e.deliverer;if(!n.stuck){var o=r.selected;if(0!=o.length){var u=n.parent,s=r.focused||e.deliverer;if(this.changes)if(s&&s!==u){var c=this.changes.map(function(t){var e=t.component;return t.before,{component:e,to_container:s}});r.app.commander.execute(new a.default({changes:c}))}else i.default.after(this.changes,r.app.commander);else if(this.duplicates){this.duplicates=this.duplicates.map(function(t){return t.to_container=s,t});var l=new a.default({changes:this.duplicates});r.app.commander.execute(l)}o.forEach(function(t){t.parent&&t.parent.calculateBounds&&t.parent.calculateBounds()}),this.last_pos=null,this.changes=null,h(r,o,!0)}}}}},"(root)":{"(self)":{keydown:function(t,e){var n=e.origin,r=e.deliverer,o={},a=t.shiftKey?n.rootModel.MPP:1;switch(t.which){case 37:o.x=-a,o.y=0;break;case 38:o.x=0,o.y=-a;break;case 39:o.x=a,o.y=0;break;case 40:o.x=0,o.y=a;break;default:return}var u=r.selected;i.default.around(r.app.commander,function(){u.forEach(function(t){!t.stuck&&t.move(o)})})}}}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=l(n(27)),a=n(41),u=(r=a)&&r.__esModule?r:{default:r},s=l(n(2)),c=n(38);function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var f=Math.PI/12,h=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._mode=e,this.screen=u.default.screen(),this._baseUrl="undefined"!=typeof window?window.location.origin:null,this._refProvider=n,this.isEditMode&&(this._rotateStep=f,this._rotateStepForced=!1)}return o(t,[{key:"dispose",value:function(){}},{key:"_calcScreen",value:function(){var t={width:screen.width,height:screen.height};this._PPI=function(t,e,n,r){t>0||(t=1),e>0||(e=1),r||(r="d");var o=("d"==r?Math.sqrt(t*t+e*e):"w"==r?t:e)/n;return o>0?Math.round(o):0}(t.width,t.height,this.screen),this._PPM=this._PPI/25.4}},{key:"url",value:function(t){return t.replace("$base_url",this.baseUrl)}},{key:"refProvider",get:function(){return this._refProvider}},{key:"commander",set:function(t){this._commander=t},get:function(){return this._commander}},{key:"screen",get:function(){return this._screen},set:function(t){this._screen=t,this._calcScreen()}},{key:"DPPX",get:function(){return s.DPPX}},{key:"PPI",get:function(){return this._PPI}},{key:"PPM",get:function(){return this._PPM}},{key:"mode",get:function(){return this._mode},set:function(t){var e=this._mode;e!==t&&(this._mode=t,this.trigger("mode",t,e))}},{key:"isViewMode",get:function(){return this._mode==s.MODE_VIEW}},{key:"isEditMode",get:function(){return this._mode==s.MODE_EDIT}},{key:"baseUrl",get:function(){return this._baseUrl},set:function(t){this._baseUrl=t,void 0!=t&&(c.License.baseUrl=t.replace(/^(?:http(s?)\:\/\/)?/,"").replace("/rest",""))}},{key:"rotateStep",get:function(){return this._rotateStep},set:function(t){this._rotateStep=Number(t)||f}},{key:"rotateStepForced",get:function(){return this._rotateStepForced},set:function(t){this._rotateStepForced=!!t}}]),t}();e.default=h,i.mixin(h.prototype,i.event.withEvent)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(272);Object.defineProperty(e,"align",{enumerable:!0,get:function(){return g(r).default}});var o=n(273);Object.defineProperty(e,"distribute",{enumerable:!0,get:function(){return g(o).default}});var i=n(274);Object.defineProperty(e,"zorder",{enumerable:!0,get:function(){return g(i).default}});var a=n(39);Object.defineProperty(e,"add",{enumerable:!0,get:function(){return g(a).default}});var u=n(275);Object.defineProperty(e,"duplicate",{enumerable:!0,get:function(){return g(u).default}});var s=n(40);Object.defineProperty(e,"remove",{enumerable:!0,get:function(){return g(s).default}});var c=n(276);Object.defineProperty(e,"on",{enumerable:!0,get:function(){return c.on}}),Object.defineProperty(e,"once",{enumerable:!0,get:function(){return c.once}}),Object.defineProperty(e,"off",{enumerable:!0,get:function(){return c.off}});var l=n(277);Object.defineProperty(e,"fullscreen",{enumerable:!0,get:function(){return g(l).default}});var f=n(278);Object.defineProperty(e,"cut",{enumerable:!0,get:function(){return f.cut}}),Object.defineProperty(e,"copy",{enumerable:!0,get:function(){return f.copy}}),Object.defineProperty(e,"paste",{enumerable:!0,get:function(){return f.paste}});var h=n(279);Object.defineProperty(e,"toDataURL",{enumerable:!0,get:function(){return h.toDataURL}}),Object.defineProperty(e,"toBlob",{enumerable:!0,get:function(){return h.toBlob}});var p=n(281);Object.defineProperty(e,"group",{enumerable:!0,get:function(){return p.group}}),Object.defineProperty(e,"ungroup",{enumerable:!0,get:function(){return p.ungroup}});var d=n(282);Object.defineProperty(e,"symmetryX",{enumerable:!0,get:function(){return d.symmetryX}}),Object.defineProperty(e,"symmetryY",{enumerable:!0,get:function(){return d.symmetryY}});var y=n(283);Object.defineProperty(e,"change",{enumerable:!0,get:function(){return y.change}}),Object.defineProperty(e,"undoableChange",{enumerable:!0,get:function(){return y.undoableChange}}),Object.defineProperty(e,"undoableChangeBefore",{enumerable:!0,get:function(){return y.undoableChangeBefore}}),Object.defineProperty(e,"undoableChangeAfter",{enumerable:!0,get:function(){return y.undoableChangeAfter}}),Object.defineProperty(e,"undoableChangeReset",{enumerable:!0,get:function(){return y.undoableChangeReset}});var v=n(284);function g(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"getIds",{enumerable:!0,get:function(){return v.getIds}}),Object.defineProperty(e,"getVariables",{enumerable:!0,get:function(){return v.getVariables}}),Object.defineProperty(e,"setVariables",{enumerable:!0,get:function(){return v.setVariables}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(-1==h.indexOf(t))return;var e=this.selected.filter(function(t){return!t.stuck});if(e.length<=1)return;var n=this.app.commander;i.default.around(n,function(){!function(t,e){for(var n=JSON.parse(JSON.stringify(e[0].bounds)),r=n.left+n.width,o=n.top+n.height,i=0;i<e.length;i++){var h=e[i].bounds;n.left=h.left>n.left?n.left:h.left,n.top=h.top>n.top?n.top:h.top,r=h.left+h.width>r?h.left+h.width:r,o=h.top+h.height>o?h.top+h.height:o}switch(n.width=r-n.left,n.height=o-n.top,t){case a:for(var p=0;p<e.length;p++){var d=e[p].bounds;e[p].bounds={left:n.left,top:d.top,width:d.width,height:d.height}}break;case s:for(var y=0;y<e.length;y++){var v=e[y].bounds;e[y].bounds={left:n.left+n.width/2-v.width/2,top:v.top,width:v.width,height:v.height}}break;case u:for(var g=0;g<e.length;g++){var b=e[g].bounds;e[g].bounds={left:r-b.width,top:b.top,width:b.width,height:b.height}}break;case c:for(var m=0;m<e.length;m++){var _=e[m].bounds;e[m].bounds={left:_.left,top:n.top,width:_.width,height:_.height}}break;case f:for(var w=0;w<e.length;w++){var x=e[w].bounds;e[w].bounds={left:x.left,top:n.top+n.height/2-x.height/2,width:x.width,height:x.height}}break;case l:for(var k=0;k<e.length;k++){var O=e[k].bounds;e[k].bounds={left:O.left,top:o-O.height,width:O.width,height:O.height}}break;default:;}}(t,e)})};var r,o=n(7),i=(r=o)&&r.__esModule?r:{default:r};var a="left",u="right",s="center",c="top",l="bottom",f="middle",h=[a,u,s,c,f,l]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(-1==u.indexOf(t))return;var e=this.selected;if(e.length<=1)return;var n=this.app.commander;i.default.around(n,function(){!function(t,e){var n=e.filter(function(t){return!t.stuck}).slice(0);n.sort(function(e,n){var r=e.center,o=n.center;return t===a?r.y-o.y:r.x-o.x});for(var r=n.reduce(function(e,n){return e+(t===a?n.bounds.height:n.bounds.width)},0),o=n[0].bounds,i=n[n.length-1].bounds,u=((t===a?i.top+i.height-o.top:i.left+i.width-o.left)-r)/(n.length-1),s=t===a?o.top+o.height:o.left+o.width,c=1;c<n.length-1;c++){var l=n[c],f=l.bounds;s+=u,t===a?(f.top=s,s+=f.height):(f.left=s,s+=f.width),l.bounds=f}}(t,e)})};var r,o=n(7),i=(r=o)&&r.__esModule?r:{default:r};var a="VERTICAL",u=[a,"HORIZONTAL"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=this.selected.filter(function(t){return!t.stuck});if(0==e.length||e[0].isRootModel())return;if(e.length>1&&("forward"==t||"backward"==t))return;var n,r=e[0].parent;if("forward"==t){var o=r.indexOf(e[0]);n=[{component:e[0],from_container:r,to_container:r,from_index:o,to_index:o+1}]}else if("backward"==t){var a=r.indexOf(e[0]);n=[{component:e[0],from_container:r,to_container:r,from_index:a,to_index:a-1}]}else n=e.filter(function(t){return t.parent===r}).sort(function(e,n){var o=r.indexOf(e)<r.indexOf(n);return"front"==t?o:!o}).map(function(e,n){r.indexOf(e);return{component:e,to_container:r,to_index:"front"==t?r.components.length-n-1:n}});var u=new i.default({changes:n});this.app.commander.execute(u)};var r,o=n(15),i=(r=o)&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=[];if(this.selected=this.selected.filter(function(t){return!t.isRootModel()}).map(function(e){var n=o.duplicate(e);return n.move({x:20,y:20}),t.push({component:n,to_container:e.parent}),n}),0==t.length)return;var e=new a.default({changes:t});this.app.commander.execute(e)};var r,o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(17)),i=n(15),a=(r=i)&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.on=function(t,e,n){switch(t){case"execute":case"redo":case"undo":case"command-reset":this.app.commander.on(t,e,n);break;case"selected":this.on(t,e,n);break;case"mode":this.app.on(t,e,n);break;default:this.on(t,e,n)}},e.once=function(t,e,n){switch(t){case"execute":case"redo":case"undo":case"command-reset":this.app.commander.once(t,e,n);break;case"selected":this.once(t,e,n);break;case"mode":this.app.once(t,e,n);break;default:this.once(t,e,n)}},e.off=function(t,e,n){switch(t){case"execute":case"redo":case"undo":case"command-reset":this.app?this.app.commander.off(t,e,n):this.off(t,e,n);break;case"selected":this.off(t,e,n);break;case"mode":this.app.off(t,e,n);break;default:this.off(t,e,n)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=this.target_element,n=t||"ratio",r=this;function o(t){r.fit(n),document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement||["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","MSFullscreenChange"].forEach(function(t){return document.removeEventListener(t,o)})}["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","MSFullscreenChange"].forEach(function(t){return document.addEventListener(t,o)}),e.requestFullScreen?e.requestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.copy=s,e.cut=function(){u=0;var t=s.call(this);return r.default.call(this),t},e.paste=function(t){if(!t)return;try{JSON.parse(t);u++,o.default.call(this,JSON.parse(t),{x:15*u,y:15*u})}catch(e){(0,i.error)(e,t)}};var r=a(n(40)),o=a(n(39)),i=n(1);function a(t){return t&&t.__esModule?t:{default:t}}var u=0;function s(){var t=this.selected.filter(function(t){return!t.isRootModel()}).map(function(t){return t.hierarchy});if(0!=t.length)return u=0,JSON.stringify(t,null,2)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toDataURL=function(t,e,n,u){var s=this.model_layer,c=s._overlay;return new Promise(function(l,f){if(s){var h=s.get("width"),p=s.get("height");n=n||h,u=u||p;var d=s.get("translate"),y=s.get("scale"),v=Math.min(n/h,u/p);n=h*v,u=p*v,s.set("translate",{x:0,y:0}),s.set("scale",{x:v/o.DPPX,y:v/o.DPPX});var g=r.default.createCanvas(n,u),b=g.getContext("2d");if(s.draw(b),s.set("translate",d),s.set("scale",y),!c)return l(g.toDataURL(t,e)),void(g=null);i.default.toPng(c,{sx:v,sy:v,width:n,height:u}).then(function(r){var o=new Image;o.onload=function(){b.drawImage(o,0,0,n,u),l(g.toDataURL(t,e)),g=null},o.src=r},function(n){(0,a.error)(n),l(g.toDataURL(t,e)),g=null})}else f("No target model")})};var r=u(n(0)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2)),i=u(n(280)),a=n(1);function u(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=function(){return{escape:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:e,mimeType:function(t){var n=e(t).toLowerCase();return(r="application/font-woff",{woff:r,woff2:r,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[n]||"";var r},dataAsUrl:function(t,e){return"data:"+e+";base64,"+t},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(t){return t.toBlob?new Promise(function(e){t.toBlob(e)}):function(t){return new Promise(function(e){for(var n=window.atob(t.toDataURL().split(",")[1]),r=n.length,o=new Uint8Array(r),i=0;i<r;i++)o[i]=n.charCodeAt(i);e(new Blob([o],{type:"image/png"}))})}(t)},resolveUrl:function(t,e){var n=document.implementation.createHTMLDocument(),r=n.createElement("base");n.head.appendChild(r);var o=n.createElement("a");return n.body.appendChild(o),r.href=e,o.href=t,o.href},getAndEncode:function(t){var e=3e4;p.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());return new Promise(function(n){var r,o=new XMLHttpRequest;if(o.onreadystatechange=function(){if(4!==o.readyState)return;if(200!==o.status)return void(r?n(r):a("cannot fetch resource: "+t+", status: "+o.status));var e=new FileReader;e.onloadend=function(){var t=e.result.split(/,/)[1];n(t)},e.readAsDataURL(o.response)},o.ontimeout=function(){r?n(r):a("timeout of "+e+"ms occured while fetching resource: "+t)},o.responseType="blob",o.timeout=e,o.open("GET",t,!0),o.send(),p.impl.options.imagePlaceholder){var i=p.impl.options.imagePlaceholder.split(/,/);i&&i[1]&&(r=i[1])}function a(t){console.error(t),n("")}})},uid:(t=0,function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+t++}),delay:function(t){return function(e){return new Promise(function(n){setTimeout(function(){n(e)},t)})}},asArray:function(t){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e},escapeXhtml:function(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src=t})},width:function(t){var e=n(t,"border-left-width"),r=n(t,"border-right-width");return t.scrollWidth+e+r},height:function(t){var e=n(t,"border-top-width"),r=n(t,"border-bottom-width");return t.scrollHeight+e+r}};var t;function e(t){var e=/\.([^\.\/]*?)$/g.exec(t);return e?e[1]:""}function n(t,e){var n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}}(),i=function(){var t=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(t,o,i){return e(t)?Promise.resolve(t).then(n).then(function(e){var n=Promise.resolve(t);return e.forEach(function(t){n=n.then(function(e){return r(e,t,o,i)})}),n}):Promise.resolve(t)},shouldProcess:e,impl:{readUrls:n,inline:r}};function e(e){return-1!==e.search(t)}function n(e){for(var n,r=[];null!==(n=t.exec(e));)r.push(n[1]);return r.filter(function(t){return!o.isDataUrl(t)})}function r(t,e,n,r){return Promise.resolve(e).then(function(t){return n?o.resolveUrl(t,n):t}).then(r||o.getAndEncode).then(function(t){return o.dataAsUrl(t,o.mimeType(e))}).then(function(n){return t.replace(function(t){return new RegExp("(url\\(['\"]?)("+o.escape(t)+")(['\"]?\\))","g")}(e),"$1"+n+"$3")})}}(),a=function(){return{resolveAll:function(){return t(document).then(function(t){return Promise.all(t.map(function(t){return t.resolve()}))}).then(function(t){return t.join("\n")})},impl:{readAll:t}};function t(){return Promise.resolve(o.asArray(document.styleSheets)).then(function(t){var e=[];return t.forEach(function(t){try{o.asArray(t.cssRules||[]).forEach(e.push.bind(e))}catch(e){console.log("Error while reading CSS rules from "+t.href,e.toString())}}),e}).then(function(t){return t.filter(function(t){return t.type===CSSRule.FONT_FACE_RULE}).filter(function(t){return i.shouldProcess(t.style.getPropertyValue("src"))})}).then(function(e){return e.map(t)});function t(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return i.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}}}(),u=function(){return{inlineAll:function e(n){if(!(n instanceof Element))return Promise.resolve(n);return function(t){var e=t.style.getPropertyValue("background");return e?i.inlineAll(e).then(function(e){t.style.setProperty("background",e,t.style.getPropertyPriority("background"))}).then(function(){return t}):Promise.resolve(t)}(n).then(function(){return n instanceof HTMLImageElement?t(n).inline():Promise.all(o.asArray(n.childNodes).map(function(t){return e(t)}))})},impl:{newImage:t}};function t(t){return{inline:function(e){return o.isDataUrl(t.src)?Promise.resolve():Promise.resolve(t.src).then(e||o.getAndEncode).then(function(e){return o.dataAsUrl(e,o.mimeType(t.src))}).then(function(e){return new Promise(function(n,r){t.onload=n,t.onerror=r,t.src=e})})}}}}(),s={imagePlaceholder:void 0,cacheBust:!1};function c(t,e){return function(t){void 0===t.imagePlaceholder?p.impl.options.imagePlaceholder=s.imagePlaceholder:p.impl.options.imagePlaceholder=t.imagePlaceholder;void 0===t.cacheBust?p.impl.options.cacheBust=s.cacheBust:p.impl.options.cacheBust=t.cacheBust}(e=e||{}),Promise.resolve(t).then(function(t){return function(t,e,n){if(!n&&e&&!e(t))return Promise.resolve();return Promise.resolve(t).then(function(t){if(t instanceof HTMLCanvasElement)try{return o.makeImage(t.toDataURL())}catch(t){(0,r.warn)(t)}return t.cloneNode(!1)}).then(function(n){return function(t,e,n){var r=t.childNodes;return 0===r.length?Promise.resolve(e):function(t,e,n){var r=Promise.resolve();return e.forEach(function(e){r=r.then(function(){return f(e,n)}).then(function(e){e&&t.appendChild(e)})}),r}(e,o.asArray(r),n).then(function(){return e})}(t,n,e)}).then(function(e){return function(t,e){return e instanceof Element?Promise.resolve().then(function(){var n,r;n=window.getComputedStyle(t),r=e.style,n.cssText?r.cssText=n.cssText:function(t,e){o.asArray(t).forEach(function(n){e.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))})}(n,r)}).then(function(){[":before",":after"].forEach(function(n){!function(n){var r=window.getComputedStyle(t,n),i=r.getPropertyValue("content");if(""!==i&&"none"!==i){var a=o.uid();e.className=e.className+" "+a;var u=document.createElement("style");u.appendChild(function(t,e,n){var r="."+t+":"+e,i=n.cssText?function(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}(n):function(t){return o.asArray(t).map(function(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}).join("; ")+";"}(n);return document.createTextNode(r+"{"+i+"}")}(a,n,r)),e.appendChild(u)}}(n)})}).then(function(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}).then(function(){e instanceof SVGElement&&(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e instanceof SVGRectElement&&["width","height"].forEach(function(t){var n=e.getAttribute(t);n&&e.style.setProperty(t,n)}))}).then(function(){return e}):e}(t,e)})}(t,e.filter,!0)}).then(h).then(function(t){var n=e,r=n.bgcolor,o=n.width,i=n.height,a=n.style,u=n.sx,s=void 0===u?1:u,c=n.sy,l=void 0===c?1:c,f=t.style;r&&(f.backgroundColor=r);o&&(f.width=o+"px");i&&(f.height=i+"px");f["margin-left"]="0px",f["margin-top"]="0px",["-webkit-","-moz-","-ms-","-o-",""].forEach(function(t){f[t+"transform"]="rotate(0rad) translate(0px, 0px) scale("+s+", "+l+")"}),a&&Object.keys(a).forEach(function(t){f[t]=a[t]});return t}).then(function(n){return function(t,e,n){return Promise.resolve(t).then(function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)}).then(o.escapeXhtml).then(function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"}).then(function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+n+'">'+t+"</svg>"}).then(function(t){return"data:image/svg+xml;charset=utf-8,"+t})}(n,e.width||o.width(t),e.height||o.height(t))})}function l(t,e){return c(t,e).then(o.makeImage).then(o.delay(100)).then(function(n){var r=function(t){var n=document.createElement("canvas");e.width,e.height;if(n.width=e.width||o.width(t),n.height=e.height||o.height(t),e.bgcolor){var r=n.getContext("2d");r.fillStyle=e.bgcolor,r.fillRect(0,0,n.width,n.height)}return n}(t);return r.getContext("2d").drawImage(n,0,0),r})}function f(t,e,n){if(!n&&e&&!e(t))return Promise.resolve();return Promise.resolve(t).then(i).then(function(n){return a(t,n,e)}).then(function(e){return u(t,e)});function i(t){if(t instanceof HTMLCanvasElement){try{return o.makeImage(t.toDataURL())}catch(t){(0,r.warn)(t)}}return t.cloneNode(false)}function a(t,e,n){var r=t.childNodes;return 0===r.length?Promise.resolve(e):function(t,e,n){var r=Promise.resolve();return e.forEach(function(e){r=r.then(function(){return f(e,n)}).then(function(e){e&&t.appendChild(e)})}),r}(e,o.asArray(r),n).then(function(){return e});function i(t,e,n){var r=Promise.resolve();return e.forEach(function(e){r=r.then(function(){return f(e,n)}).then(function(e){e&&t.appendChild(e)})}),r}}function u(t,e){return e instanceof Element?Promise.resolve().then(function(){!function(t,e){t.cssText?e.cssText=t.cssText:function(t,e){o.asArray(t).forEach(function(n){e.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))})}(t,e)}(window.getComputedStyle(t),e.style)}).then(function(){[":before",":after"].forEach(function(n){!function(n){var r=window.getComputedStyle(t,n),i=r.getPropertyValue("content");if(""===i||"none"===i)return;var a=o.uid();e.className=e.className+" "+a;var u=document.createElement("style");u.appendChild(function(t,e,n){var r="."+t+":"+e,i=n.cssText?function(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}(n):function(t){return o.asArray(t).map(function(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}).join("; ")+";"}(n);return document.createTextNode(r+"{"+i+"}")}(a,n,r)),e.appendChild(u)}(n)})}).then(function(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value);t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}).then(function(){if(!(e instanceof SVGElement))return;if(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),!(e instanceof SVGRectElement))return;["width","height"].forEach(function(t){var n=e.getAttribute(t);n&&e.style.setProperty(t,n)})}).then(function(){return e}):e;function n(){function n(t,e){if(t.cssText)e.cssText=t.cssText;else n(t,e);function n(t,e){o.asArray(t).forEach(function(n){e.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))})}}n(window.getComputedStyle(t),e.style)}function r(){function n(n){var r=window.getComputedStyle(t,n),i=r.getPropertyValue("content");if(i===""||i==="none")return;var a=o.uid();e.className=e.className+" "+a;var u=document.createElement("style");function s(t,e,n){var r="."+t+":"+e,i=n.cssText?a(n):u(n);return document.createTextNode(r+"{"+i+"}");function a(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}function u(t){return o.asArray(t).map(e).join("; ")+";";function e(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}}}u.appendChild(s(a,n,r)),e.appendChild(u)}[":before",":after"].forEach(function(t){n(t)})}function i(){if(t instanceof HTMLTextAreaElement)e.innerHTML=t.value;if(t instanceof HTMLInputElement)e.setAttribute("value",t.value)}function a(){if(!(e instanceof SVGElement))return;if(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),!(e instanceof SVGRectElement))return;["width","height"].forEach(function(t){var n=e.getAttribute(t);if(!n)return;e.style.setProperty(t,n)})}}}function h(t){return u.inlineAll(t).then(function(){return t})}var p={toSvg:c,toPng:function(t,e){return l(t,e||{}).then(function(t){return t.toDataURL()})},toJpeg:function(t,e){return l(t,e=e||{}).then(function(t){return t.toDataURL("image/jpeg",e.quality||1)})},toBlob:function(t,e){return l(t,e||{}).then(o.canvasToBlob)},toPixelData:function(t,e){return l(t,e||{}).then(function(e){return e.getContext("2d").getImageData(0,0,o.width(t),o.height(t)).data})},impl:{fontFaces:a,images:u,util:o,inliner:i,options:{}}};e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.group=function(){var t=this.selected.filter(function(t){return!!t.parent&&!t.stuck});if(t.length<2)return;var e=t[0].parent,n=[],a=t.sort(function(t,n){return e.components.indexOf(t)-e.components.indexOf(n)});a.forEach(function(t){n.push(t.bounds)});var u=r.default.union(n),s=t[0].transcoordP2S(u.left,u.top);s=t[0].transcoordS2T(s.x,s.y);var c=o.compile({type:"group",left:s.x,top:s.y,width:u.width,height:u.height}),l=[{component:c,to_container:e}];a.forEach(function(t){l.push({component:t,to_container:c})}),this.app.commander.execute(new i.default({changes:l})),this.selected=[c]},e.ungroup=function(){if(0===this.selected.length)return;var t=[],e=[];this.selected.forEach(function(n){if(n.isGroup()){var r=n.parent;n.components.forEach(function(n){t.push(n),e.push({component:n,to_container:r})}),e.push({component:n,to_container:null})}}),this.app.commander.execute(new i.default({changes:e})),this.selected=t};var r=a(n(0)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(17)),i=a(n(15));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.symmetryX=function(){o.default.around(this.app.commander,a,this)},e.symmetryY=function(){o.default.around(this.app.commander,u,this)};var r=i(n(0)),o=i(n(7));function i(t){return t&&t.__esModule?t:{default:t}}function a(){var t=this.selected;if(0!=t.length){var e=t.map(function(t){return t.bounds}),n=r.default.union(e),o=n.left+n.width/2;t.map(function(t){t.symmetryX(o)})}}function u(){var t=this.selected;if(0!=t.length){var e=t.map(function(t){return t.bounds}),n=r.default.union(e),o=n.top+n.height/2;t.map(function(t){t.symmetryY(o)})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.change=function(t,e,n){var r=this.findAll(t,n);return r.forEach(function(t){t.set(e)}),r},e.undoableChange=function(t){i.default.around(this.app.commander,t)};var r,o=n(7),i=(r=o)&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getIds=function(){return Object.values(this.indexMap).map(function(t){var e=t.model,n=e.id,r=e.data;return{key:n,value:r}}).sort(function(t,e){return t.key>e.key?1:-1})},e.getVariables=function(){return Object.values(this.indexMap).filter(function(t){return"variable"===t.get("type")}).map(function(t){var e=t.model,n=e.id,r=e.data;e.dataType;return{key:n,value:r}}).sort(function(t,e){return t.key>e.key?1:-1})},e.setVariables=function(t){var e=Object.values(this.indexMap).filter(function(t){return"variable"===t.get("type")}).reduce(function(t,e){return t[e.get("id")]=e,t},{}),n=[];t.forEach(function(t){var r=e[t.key];r?(r.set("data",t.value),delete e[t.key]):n.push({type:"variable",id:t.key,left:0,top:0,width:100,height:20,data:t.value})}),r.default.call(this,n,{x:-100,y:0}),this.selected=Object.values(e),o.default.call(this)};var r=i(n(39)),o=i(n(40));function i(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(27)),i=u(n(286)),a=u(n(287));function u(t){return t&&t.__esModule?t:{default:t}}function s(t,e){var n=e.model_layer.get("scale"),r=e.model_layer.get("translate");if(t){var o=JSON.parse(t);o.scale=n,o.translate=r,e.rebuildContentModel(o)}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.timecapsule=new i.default(20);var n=this;this.snapshot_taker=new a.default({get state(){var t=n.container.model_layer.hierarchy;return JSON.stringify(t)}},this.timecapsule),this.snapshot_taker.take(!0)}return r(t,[{key:"dispose",value:function(){this.reset(),this.timecapsule&&this.timecapsule.dispose(),this.snapshot_taker&&this.snapshot_taker.dispose(),delete this.container,delete this.timecapsule,delete this.snapshot_taker}},{key:"execute",value:function(t,e){!1!==e&&t&&t.execute(),this.snapshot_taker.touch(),this.trigger("execute",t,!0,!1)}},{key:"undo",value:function(){this.timecapsule.backwardable&&(s(this.timecapsule.backward(),this.container),this.trigger("undo",this.undoable(),this.redoable()))}},{key:"redo",value:function(){this.timecapsule.forwardable&&(s(this.timecapsule.forward(),this.container),this.trigger("redo",this.undoable(),this.redoable()))}},{key:"undoable",value:function(){return this.timecapsule.backwardable}},{key:"redoable",value:function(){return this.timecapsule.forwardable}},{key:"reset",value:function(){this.timecapsule&&this.timecapsule.reset(),this.trigger("command-reset")}}]),t}();e.default=c,o.mixin(c.prototype,o.event.withEvent)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1);var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(e=Number(e))||e<=0?((0,o.error)("TimeCapsule maxsize should be greater than 0.",e),this.maxsize=10):this.maxsize=e,this.reset(),n&&this.snapshot(n)}return r(t,[{key:"dispose",value:function(){this.reset()}},{key:"snapshot",value:function(t){this.q.splice(this.pos+1,this.q.length-this.pos+1,t),this.q.length>this.maxsize&&this.q.splice(0,this.q.length-this.maxsize),this.pos=this.q.length-1}},{key:"forward",value:function(){if(this.snapshot_taker&&this.snapshot_taker.take(),this.forwardable)return this.q[++this.pos];(0,o.warn)("Not forwardable.")}},{key:"backward",value:function(){if(this.snapshot_taker&&this.snapshot_taker.take(),this.backwardable)return this.q[--this.pos];(0,o.warn)("Not backwardable.")}},{key:"reset",value:function(){this.q=[],this.pos=-1}},{key:"current",get:function(){if(-1!==this.pos)return this.q[this.pos];(0,o.warn)("Non state has been recorded.")}},{key:"length",get:function(){return this.q.length}},{key:"forwardable",get:function(){return this.pos<this.q.length-1}},{key:"backwardable",get:function(){return this.pos>0}},{key:"snapshot_taker",get:function(){return this._snapshot_taker},set:function(t){this._snapshot_taker=t}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=(0,n(3).debounce)(function(t){t.brake||t.take()},1e3,{leading:!0,trailing:!1});function i(t){!t.brake&&t.dirty&&o(t)}var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.brake=!1,this.dirty=!1,this.state_holder=e,this.timecapsule=n,this.timecapsule.snapshot_taker=this}return r(t,[{key:"dispose",value:function(){delete this.state_holder,delete this.timecapsule}},{key:"touch",value:function(){this.dirty=!0,i(this)}},{key:"take",value:function(t){(this.dirty||t)&&(this.timecapsule.snapshot(this.state_holder.state),this.dirty=!1)}},{key:"brake",get:function(){return this._brake},set:function(t){this._brake=!!t,i(this)}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(1),a=n(70),u=(r=a)&&r.__esModule?r:{default:r};var s=new WeakSet,c=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.counters={},this.references={},this.creator=e,this.disposer=n,s.add(this)}return o(t,null,[{key:"residents",get:function(){return s}}]),o(t,[{key:"dispose",value:function(){if(this.disposer)for(var t in this.references)this.disposer.call(null,t,this.references[t]);delete this.references,delete this.counters}},{key:"add",value:function(t,e){var n=this;return new Promise(function(r,o){var i=n.references[t];if(i)i===e?o(Error("Reference ID and target duplicate")):e?o(Error("Reference ID duplicate")):r(i);else{var a=function(e){e=(0,u.default)(e,function(){var t=this;this.release=function(){return n.release(t)}}),n.references[t]=e,n.counters[t]=1,r(e)};if(e)a(e);else{if(!n.creator)return void o(Error("Reference id("+t+") is not allowed. Reference creator should be defined."));n.creator.call(null,t,function(t){a(t)},function(t){o(t)})}}})}},{key:"get",value:function(t,e){var n=this;return new Promise(function(r,o){var i=n.references[t];i?n.counters.hasOwnProperty(t)?(n.counters[t]++,r(i)):o(Error("No Reference Count")):e?n.add(t).then(function(t){r(t)},function(t){o(t)}):o(Error("No References for "+t))})}},{key:"_id",value:function(t){for(var e in this.references){if(this.references[e]===t)return e}return-1}},{key:"release",value:function(t){var e=this._id(t),n=this.references[e];n?(this.counters[e]--,0==this.counters[e]&&(this.disposer&&this.disposer.call(null,e,n),delete this.references[e],delete this.counters[e],(0,i.debug)("RELEASED",e))):(0,i.error)("No Referenced ID")}},{key:"ids",get:function(){return Object.keys(this.references)}}]),t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o={},i={},a=[];function u(t){var e="SCRIPT"==t.target.tagName?o:i,n=t.target.src||t.target.href;e[n]=!0,a.forEach(function(t,r){var u=t.resolve,s=t.scripts,l=t.styles;if(e==o){var f=s.indexOf(n);f>-1&&f<s.length-1&&c(s[f+1])}for(var h=0;h<s.length;h++)if(!o[s[h]])return;if(l)for(var p=0;p<l.length;p++)if(!i[l[p]])return;u(),a[r]=null}),a=a.filter(function(t){return t})}function s(t){var e=t.target.src,n="SCRIPT"==t.target.tagName?o:i;a.forEach(function(r,i){var u=r.reject,s=r.scripts,c=r.styles,l=!1;if(n===o){for(var f=0;f<s.length;f++)if(s[f]==e){l=!0;break}}else if(c)for(var h=0;h<c.length;h++)if(c[h]==e){l=!0;break}l&&(u(t),a[i]=null)}),a=a.filter(function(t){return t}),delete n[e],document.head.removeChild(t.target)}function c(t){o[t]=!1;var e=document.createElement("script");e.onload=u,e.onerror=s,e.type="text/javascript",e.src=t,document.head.appendChild(e)}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,null,[{key:"load",value:function(t,e){return"string"==typeof t&&(t=[t]),"string"==typeof e&&(e=[e]),new Promise(function(n,r){if((!t||t instanceof Array)&&(!e||e instanceof Array)){var l,f=!0;if(e&&e.forEach(function(t){i.hasOwnProperty(t)||function(t){i[t]=!1;var e=document.createElement("link");e.onload=u,e.onerror=s,e.type="text/css",e.rel="stylesheet",e.media="screen,print",e.href=t,document.head.appendChild(e)}(t),i[t]||(f=!1)}),t&&t.length>0&&t.forEach(function(t){o.hasOwnProperty(t)?o[t]||(f=!1):l=l||t}),l)c(l);else if(f)return void n();a.push({resolve:n,reject:r,scripts:t,styles:e})}else r("invalid sources for load")})}}]),t}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="0.0.0"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return r};var r=0,o=performance.now(),i=0;requestAnimationFrame(function t(){requestAnimationFrame(t),i++;var e=performance.now(),n=e-o;n<1e3||(r=Math.round(1e3*i/n),o=e,i=0)})}])});