!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.scene=t():e.scene=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=C(n(94)),i=C(n(153)),a=T(n(20)),u=T(n(27)),s=T(n(190)),c=C(n(198)),l=T(n(3)),f=n(1),h=T(n(73)),p=C(n(74)),d=n(72),y=C(n(200)),v=n(75),g=n(201),b=n(202),m=C(n(203)),_=C(n(204)),w=C(n(205)),x=C(n(206)),k=n(207),O=C(n(208)),P=C(n(209)),A=n(77),E=n(210),j=n(214),M=C(n(35)),S=C(n(216));function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I={},B={mutable:!1,resizable:!0,rotatable:!0,properties:[],"value-property":"text",sample:{xx:0}},L=[],D={theta:0,tx:0,ty:0,sx:1,sy:1,fade:0},F=new WeakMap,Y=0,N=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._app=n,this._model=t||{},this._state={},this._delta=l.clone(D),n&&this.animation&&(this.animation.started=!0),this.clearCache(),S.default.add(this),F.set(this,Y++)}return r(e,null,[{key:"buildSample",value:function(e,t){var n=this.register(e);if(n){var r=n.nature.sample||{};return Object.assign({type:e},r,t)}console.error("Class not registered.",e)}},{key:"register",value:function(e,t){if(!t)return I[e];I[e]=t}},{key:"nature",get:function(){return B}},{key:"residents",get:function(){return F}}]),r(e,[{key:"created",value:function(){}},{key:"added",value:function(e){}},{key:"removed",value:function(e){}},{key:"ready",value:function(){}},{key:"touch",value:function(){this.updatedAt=performance.now()}},{key:"clearCache",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];h.clear.apply(h,[this].concat(t))}},{key:"removeSelf",value:function(e){e?this.dispose():this.parent&&this.parent.removeComponent(this)}},{key:"dispose",value:function(){this._animation&&(this._animation.dispose(),delete this._animation),this.disposeMappings(),this.parent&&this.parent.removeComponent(this),delete this._text_substitutor,delete this._value_substitutor,this._disposed=!0,this.retention&&S.default.touch(),this.clearCache(),delete this._app}},{key:"isLayer",value:function(){return!1}},{key:"isGroup",value:function(){return!1}},{key:"isContainer",value:function(){return!1}},{key:"isLine",value:function(){return!1}},{key:"isRoot",value:function(){return!1}},{key:"isRootModel",value:function(){return!1}},{key:"is3dish",value:function(){return!1}},{key:"isTemplate",value:function(){return!!this.get("templatePrefix")}},{key:"isHTMLElement",value:function(){return!1}},{key:"get",value:function(e){return this._model[e]}},{key:"set",value:function(e,t){if("string"==typeof e)return this.set(R({},e,t));var n={},r={},i=!1,a=(e=l.clone(e),this);return Object.getOwnPropertyNames(e).forEach(function(t){var u=a._model[t],s=e[t];(0,o.default)(u,s)||(r[t]=u,n[t]=s,a._model[t]=s,delete a._state[t],i=!0)}),i&&(this.clearCache(),n.hasOwnProperty("text")&&delete this._text_substitutor,n.hasOwnProperty("retention")&&S.default.add(this),n.hasOwnProperty("fillStyle")&&this.onchangeFill(n,r),n.hasOwnProperty("mappings")&&this.onchangeMappings(n,r),n.hasOwnProperty("data")&&this.onchangeData(n,r),this.onchange&&this.onchange(n,r),this.trigger("change",n,r)),this}},{key:"getState",value:function(e){return this._state.hasOwnProperty(e)?this._state[e]:this.get(e)}},{key:"setState",value:function(e,t){if("string"==typeof e)return this.setState(R({},e,t));var n={},r={},i=!1,a=(e=l.clone(e),this);return Object.getOwnPropertyNames(e).forEach(function(t){var u=a.getState(t),s=e[t];(0,o.default)(u,s)||(r[t]=u,n[t]=s,a._state[t]=s,i=!0)}),i&&(this.clearCache(),n.hasOwnProperty("text")&&delete this._text_substitutor,n.hasOwnProperty("fillStyle")&&this.onchangeFill(n,r),n.hasOwnProperty("data")&&this.onchangeData(n,r),this.onchange&&this.onchange(n,r),this.trigger("change",n,r)),this}},{key:"isDescendible",value:function(e){return!0}},{key:"getContext",value:function(){return this._parent.getContext()}},{key:"outline",value:function(e){return(0,m.default)(this,e||0)}},{key:"contains",value:function(e,t){return!1}},{key:"adjustResize",value:function(e,t,n){if(n){var r=this.bounds,o=r.height/r.width,i=e.width-r.width,a=e.height-r.height;i*o>a?a=i*o:i=a/o;var u=e.left-r.left,s=e.top-r.top;return 0!=u&&0!=s?(s=-a,u=-i):0!=u?u=-i:0!=s&&(s=-a),{left:r.left+u,top:r.top+s,width:r.width+i,height:r.height+a}}return e}},{key:"adjustRotation",value:function(e,t){if(t||this.app.rotateStepForced){var n=this.app.rotateStep;return Math.floor((e+n/2)/n)*n}return e}},{key:"findFirst",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e.apply(void 0,[this].concat(n)))return this}},{key:"findAll",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"string"==typeof e?a.select(e,this,n[0]||this):"function"==typeof e&&e.apply(void 0,[this].concat(n))?[this]:void 0}},{key:"capture",value:function(e,t){if(!this.capturable)return!1;var n=this.transcoordP2S(e,t);return this.contains(n.x,n.y)?this:void 0}},{key:"prepare",value:function(e,t){e(this)}},{key:"prepareIf",value:function(e){var t=this;e&&this.prepare&&this.prepare(function(e){t.invalidate()},function(e){(0,f.error)(e)})}},{key:"draw",value:function(e){e.save(),this.__proto__.hasOwnProperty("_pre_draw")?this._pre_draw(e):this.prerender(e),this.__proto__.hasOwnProperty("_draw")?this._draw(e):this.render(e),this.__proto__.hasOwnProperty("_post_draw")?this._post_draw(e):this.postrender(e),e.restore()}},{key:"delta",value:function(e,t){if(void 0===t)return e?this._delta[e]:this._delta;this._delta[e]=t}},{key:"prerender",value:function(e){var t=this.rotatePoint,n=this.model,r=n.scale,o=n.rotation,i=n.shadow,a=n.alpha,u=(r&&r.x||1)*this._delta.sx,s=(r&&r.y||1)*this._delta.sy,c=(o||0)+this._delta.theta,l=this._delta,f=l.tx,h=void 0===f?0:f,p=l.ty,y=void 0===p?0:p,v=(a||1)-this._delta.fade;(h||y)&&e.translate(h,y),(1!=u||1!=s||c)&&(e.translate(t.x,t.y),1==u&&1==s||e.scale(u,s),c&&e.rotate(c),e.translate(-t.x,-t.y)),v&&(e.globalAlpha=v),i&&(0,d.setShadow)(e,i,this),this.hidden&&(e.globalAlpha*=.5)}},{key:"render",value:function(e){}},{key:"postrender",value:function(e){this.drawText(e)}},{key:"drawText",value:function(e){!this.textHidden&&this.text&&this.hasTextProperty&&(0,k.drawText)(e,this.textBounds,this.textLines(e),this.model)}},{key:"drawStroke",value:function(e){(0,_.default)(e,this.model,this)}},{key:"drawFill",value:function(e){this.fillStyle&&"transparent"!=this.fillStyle&&((0,g.drawFill)(e,this.bounds,this.center,this.model,this),(0,d.resetShadow)(e))}},{key:"animate",value:function(e){return this._animate&&this._animate.stop(),this._animate=(0,p.default)(e),this._animate}},{key:"move",value:function(e){var t=e.x,n=e.y,r=this.path,o=t,i=n;this.path=r.map(function(e){return{x:e.x+o,y:e.y+i}})}},{key:"symmetryX",value:function(e){"number"!=typeof e&&(e=this.center.x);var t=this.model.rotation,n=this.fillStyle;if(this.set("rotation",2*Math.PI-t),n&&"gradient"===n.type&&"linear"===n.gradientType){var r=l.clone(n);r.rotation=(Math.PI-parseFloat(n.rotation||0))%(2*Math.PI),this.set("fillStyle",r)}this.path=this.path.map(function(t){return{x:2*e-t.x,y:t.y}})}},{key:"symmetryY",value:function(e){this.symmetryX(),this.set("rotation",(Math.PI+this.model.rotation)%(2*Math.PI)),e&&this.move({x:0,y:2*(e-this.center.y)})}},{key:"effect",value:function(e,t){return(0,c.default)(this,e,t)}},{key:"invalidate",value:function(){this.parent&&this.parent.invalidate()}},{key:"defaultTextSubstitutor",value:function(){var e=this.getState("text");return void 0==e?"":String(e)}},{key:"textLines",value:function(e){return(0,k.textLines)(e||this.getContext(),this.textBounds.width,this.font,this.text,this.get("textWrap"))}},{key:"trim",value:function(){delete this._model[""],"chartjs"!==this._model.type&&delete this._model.chart}},{key:"serialize",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return JSON.stringify.apply(JSON,[this.hierarchy].concat(t))}},{key:"nature",get:function(){return this.constructor.nature}},{key:"disposed",get:function(){return!!this._disposed}},{key:"retention",get:function(){return Number(this.get("retention"))||0}},{key:"hasTextProperty",get:function(){return!0}},{key:"app",get:function(){return!this._app&&this.parent&&(this._app=this.parent.app),this._app}},{key:"model",get:function(){return this._model}},{key:"state",get:function(){return Object.assign({},this._model,this._state)}},{key:"hierarchy",get:function(){var e=l.clone(this._model);return this.volatile.forEach(function(t){delete e[t]}),e}},{key:"volatile",get:function(){return L}},{key:"textHidden",get:function(){return!!this._textHidden},set:function(e){this._textHidden=!!e,this.invalidate()}},{key:"root",get:function(){return this.isRoot()?this:this.parent&&this.parent.root}},{key:"rootModel",get:function(){return this.isRootModel()?this:this.parent&&this.parent.rootModel}},{key:"parent",get:function(){return this._parent},set:function(e){this._parent=e}},{key:"center",get:function(){var e=this.bounds;return{x:e.left+e.width/2,y:e.top+e.height/2}},set:function(e){if(e&&!isNaN(e.x)&&!isNaN(e.y)){var t=this.center;if(Math.round(100*e.x)/100!=Math.round(100*t.x)/100||Math.round(100*e.y)/100!=Math.round(100*t.y)/100){var n=e.x-t.x,r=e.y-t.y;this.path=this.path.map(function(e){return{x:e.x+n,y:e.y+r}})}}}},{key:"location",get:function(){return this.center},set:function(e){this.center=e}},{key:"dimension",get:function(){return this.get("dimension")},set:function(e){this.set("dimension",e)}},{key:"bounds",get:function(){var e,t,n,r,o=this.path;e=t=o[0].x,n=r=o[0].y;for(var i=1;i<o.length;i++){var a=o[i];a.x<e?e=a.x:a.x>t&&(t=a.x),a.y<n?n=a.y:a.y>r&&(r=a.y)}return{left:e,top:n,width:t-e,height:r-n}},set:function(e){var t=this.bounds;if(Math.round(100*e.width)/100!=Math.round(100*t.width)/100||Math.round(100*e.height)/100!=Math.round(100*t.height)/100||Math.round(100*e.left)/100!=Math.round(100*t.left)/100||Math.round(100*e.top)/100!=Math.round(100*t.top)/100){var n=0==t.width?1:e.width/t.width,r=0==t.height?1:e.height/t.height;this.path=this.path.map(function(o){return{x:e.left+(o.x-t.left)*n,y:e.top+(o.y-t.top)*r}})}}},{key:"path",get:function(){return(0,f.error)("이 컴포넌트에 get path 가 구현되어있지 않음.",this),[]},set:function(e){(0,f.error)("이 컴포넌트에 get path 가 구현되어있지 않음.",this)}},{key:"anchors",get:function(){return[]}},{key:"strokeStyle",get:function(){return this.get("strokeStyle")},set:function(e){this.set("strokeStyle",e)}},{key:"fillStyle",get:function(){return this.getState("fillStyle")},set:function(e){this.setState("fillStyle",e)}},{key:"fontColor",get:function(){return this.get("fontColor")},set:function(e){this.set("fontColor",String(l.objToVal(e)))}},{key:"rotation",get:function(){return this.getState("rotation")},set:function(e){this.setState("rotation",Number(l.objToVal(e)))}},{key:"mutable",get:function(){return B.mutable}},{key:"resizable",get:function(){return B.resizable&&!this.stuck}},{key:"rotatable",get:function(){return B.rotatable&&!this.stuck}},{key:"capturable",get:function(){return!1!==this.get("capturable")}},{key:"stuck",get:function(){return!!(this.parent&&this.parent.layout.isStuck(this)||this.get("locked"))}},{key:"hidden",get:function(){return this.app.isViewMode&&this.getState("hidden")},set:function(e){this.setState("hidden",e)}},{key:"animation",get:function(){if(this.app.isViewMode&&!this.isTemplate()){if(!this._animation){var e=this.model.animation;e&&e.oncreate&&(this._animation=s.compile(this,e.oncreate))}return this._animation}}},{key:"started",set:function(e){this.animation&&(this.animation.started=e)}},{key:"font",get:function(){return(0,k.font)(this.model)}},{key:"lineHeight",get:function(){var e=this.get("lineHeight");return e||1.2*this.fontSize}},{key:"textSubstitutor",get:function(){return this._text_substitutor||(this._text_substitutor=(0,A.buildSubstitutor)(this.getState("text"),this)||this.defaultTextSubstitutor),this._text_substitutor}},{key:"text",get:function(){var e=this.get("textFormat");return e?(0,x.default)(e,this.textSubstitutor()):this.textSubstitutor()},set:function(e){delete this._text_substitutor;var t=l.objToVal(e);this.setState("text",void 0==t?"":String(t))}},{key:"textBounds",get:function(){var e=this.model,t=e.paddingTop,n=void 0===t?0:t,r=e.paddingLeft,o=void 0===r?0:r,i=e.paddingRight,a=void 0===i?0:i,u=e.paddingBottom,s=void 0===u?0:u,c=this.bounds,l=c.left,f=c.top,h=c.width,p=c.height;return{left:l+o,top:f+n,width:Math.max(h-o-a,0),height:Math.max(p-n-s,0)}}},{key:"rotatePoint",get:function(){return this.center}},{key:"value",get:function(){var e=this.nature["value-property"]||"text";return"value"==e?this.getState("value"):this[e]},set:function(e){var t=this.nature["value-property"]||"text";"value"==t?this.setState("value",e):this[t]=e}},{key:"data",get:function(){return this.getState("data")},set:function(e){this.setState("data",e),this.touch()}},{key:"mappings",get:function(){return!this._mappings&&this.parent&&this.buildMappings(),this._mappings}},{key:"controls",get:function(){}}]),e}();t.default=N,N.union=y.default,N.transcoordR=j.transcoordR,N.transcoordRR=j.transcoordRR,N.createCanvas=v.createCanvas,N.memoize=h.intercept,N.mixin=u.mixin,N.drawText=k.drawText,N.font=k.font,N.textLines=k.textLines,N.drawStroke=_.default,N.drawFill=g.drawFill,N.reposition=M.default,N.RetentionManager=S.default,N.template=i.default,Object.assign(N.prototype,{drawEffect:w.default,prepareFill:g.prepareFill,prepareFillIf:g.prepareFillIf,onchangeFill:g.onchangeFill,mutateBounds:P.default,mutatePath:O.default,substitute:A.substitute,onchangeMappings:E.onchangeMappings,onchangeData:E.onchangeData,buildMappings:E.buildMappings,executeMappings:E.executeMappings,disposeMappings:E.disposeMappings,ondropfile:b.ondropfile,transcoordS2P:j.transcoordS2P,transcoordP2S:j.transcoordP2S,transcoordS2T:j.transcoordS2T,transcoordT2S:j.transcoordT2S,transcoordS2TR:j.transcoordS2TR,transcoordS2O:j.transcoordS2O,transcoordC2S:j.transcoordC2S,transcoordS2C:j.transcoordS2C,_pre_draw:N.prototype.prerender,_draw:N.prototype.render,_post_draw:N.prototype.postrender}),["rotatePoint","font","lineHeight","retention"].forEach(function(e){return N.memoize(N.prototype,e,!1)}),["bounds","center","textBounds"].forEach(function(e){return N.memoize(N.prototype,e,!0)}),N.mixin(N.prototype,u.event.withEvent)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});"undefined"==typeof window||window;var r="[ERROR]",o="[WARN]",i="[DEBUG]";t.error=function(){for(var e,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=[];n.forEach(function(e){return e&&e.stack&&i.push(e.stack)}),(e=console).error.apply(e,[r].concat(n,[i.join(" ")]))},t.warn=function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=[];n.forEach(function(e){return e&&e.stack&&i.push(e.stack)}),(e=console).warn.apply(e,[o].concat(n,[i.join(" ")]))},t.debug=function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).log.apply(e,[i].concat(n))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NOTHING={},t.MODE_VIEW=0,t.MODE_EDIT=1,t.MODE_SHIFT=2,t.MAX_UNDO_SIZE=30,t.DPPX="undefined"==typeof window?1:window.devicePixelRatio||(window.matchMedia&&window.matchMedia("(min-resolution: 2dppx), (-webkit-min-device-pixel-ratio: 1.5),(-moz-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5)").matches?2:1)||1,t.GESTURES=["mousemove","mouseup","mousedown","mouseout","wheel","click","touchstart","touchmove","touchend","dblclick"],t.KEYEVENTS=["keydown","keyup"],t.DEFAULT={ALPHA:1,FONT_SIZE:15,FONT_FAMILY:"serif",FONT_COLOR:"black",TEXT_ALIGN:"center",TEXT_BASELINE:"middle",TEXT_WRAP:!1,BOLD:!1,ITALIC:!1,STROKE_STYLE:"#999",LINE_DASH:"solid"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.clone=function(e){return JSON.parse(JSON.stringify(e))},t.merge=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"!=(void 0===t?"undefined":r(t))&&(t={});for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];o.forEach(function(n){var o=function(o){"object"!=r(n[o])?t[o]=n[o]:n[o].length>0?t[o]=n[o].map(function(t){return"object"!=r(n[o])?t:e({},t)}):t[o]=e(t[o],n[o])};for(var i in n)o(i)});return t},t.push=function e(t,n,o){if(!t||!n)return t;for(var i in n){if(t[i]&&o)throw new Error('utils.push attempted to overwrite "'+i+'" while running in protected mode');"object"==r(t[i])&&"object"==r(n[i])?e(t[i],n[i]):t[i]=n[i]}return t};var o=n(68);Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return s(o).default}});var i=n(181);Object.defineProperty(t,"throttle",{enumerable:!0,get:function(){return s(i).default}});var a=n(182);Object.defineProperty(t,"once",{enumerable:!0,get:function(){return s(a).default}}),t.uniqueId=function(e){return""+(e||"")+ ++c};var u=n(186);function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return s(u).default}}),t.objToVal=function(e){for(;e&&"object"===(void 0===e?"undefined":r(e));){var t=e;for(var n in e){e=e[n];break}if(e===t){e=void 0;break}}return e};var c=0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(73));t.default=function(e){var t=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),r(n,[{key:"contains",value:function(e,t){var n=this.model,r=n.left,o=n.top,i=n.width,a=n.height,u=n.lineWidth,s=(void 0===u?0:u)/2;return e<Math.max(r+i,r)+s&&e>Math.min(r+i,r)-s&&t<Math.max(o+a,o)+s&&t>Math.min(o+a,o)-s}},{key:"path",set:function(e){var t=e[0],n=e[2],r=this.model;r.width,r.height;this.set({left:t.x,top:t.y,width:n.x-t.x,height:n.y-t.y})},get:function(){var e=this.model,t=e.left,n=void 0===t?0:t,r=e.top,o=void 0===r?0:r,i=e.width,a=void 0===i?0:i,u=e.height,s=void 0===u?0:u;return[{x:n,y:o},{x:n+a,y:o},{x:n+a,y:o+s},{x:n,y:o+s}]}}]),n}();return o.intercept(t.prototype,"path",!1),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=(r=i)&&r.__esModule?r:{default:r};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),o(t,[{key:"postrender",value:function(e){this.drawFill(e),this.drawStroke(e),function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postrender",this).call(this,e)}},{key:"rotationX",set:function(e){this.setState("rotationX",e)},get:function(){return this.getState("rotationX")}},{key:"rotationY",set:function(e){this.setState("rotation",e)},get:function(){return this.getState("rotation")}},{key:"rotationZ",set:function(e){this.setState("rotationZ",e)},get:function(){return this.getState("rotationZ")}},{key:"zPos",set:function(e){this.setState("zPos",e)},get:function(){return this.getState("zPos")}},{key:"depth",set:function(e){this.setState("depth",e)},get:function(){return this.getState("depth")}}]),t}();t.default=u},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(44),i="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,a=o||i||Function("return this")();e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(87),a=(r=i)&&r.__esModule?r:{default:r};n(3);var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),o(t,[{key:"execute",value:function(){this.params.changes.forEach(function(e){return e.component.set(e.after)})}}],[{key:"before",value:function(e){return e.map(function(e){return{component:e}})}},{key:"after",value:function(e,t){t.execute(null,!1)}},{key:"around",value:function(e,t,n){t.call(n),e.execute(null,!1)}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=l(n(0)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(20)),u=n(36),s=l(n(4)),c=l(n(78));function l(e){return e&&e.__esModule?e:{default:e}}var f=[],h=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r._components=[],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,c.default)((0,s.default)(i.default))),r(t,[{key:"dispose",value:function(){this.components.slice().forEach(function(e){return e.dispose()}),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"isContainer",value:function(){return!0}},{key:"containable",value:function(e){return e.isDescendible(this)&&"variable"!==e.get("type")}},{key:"reflow",value:function(){this.layout.reflow(this),this.components&&this.components.forEach(function(e){e.isContainer()&&e.reflow()})}},{key:"addComponent",value:function(e){var t=e.parent;if(t){if(this===t)return;t.removeComponent(e)}var n=this._components.push(e)-1;e.parent=this,e.added(this),this.trigger("add",this,e,n),e.delegate_on(this),e.trigger("added",this,e,n),this.root&&this.root.isReady&&e.ready()}},{key:"removeComponent",value:function(e){var t=this._components.indexOf(e);-1!=t&&(this._components.splice(t,1),e.parent=null,e.removed(this),this.trigger("remove",this,e),e.trigger("removed",this,e),e.delegate_off(this))}},{key:"insertComponentAt",value:function(e,t){var n=e.parent;n&&n.removeComponent(e);var r=this._components.splice(0,t);this._components=r.concat(e,this._components),t=this._components.indexOf(e),e.parent=this,e.added(this),this.trigger("add",this,e,t),e.delegate_on(this),e.trigger("added",this,e,t)}},{key:"add",value:function(e){var t=this;return e instanceof Array?(e.forEach(function(e){-1==t._components.indexOf(e)&&t.addComponent(e)}),this):this.add.call(this,[e])}},{key:"remove",value:function(e){var t=this;return e instanceof Array?this._components?(e.forEach(function(e){t.removeComponent(e)}),this):this:this.remove.call(this,[e])}},{key:"getAt",value:function(e){if(this._components)return this._components[e]}},{key:"forEach",value:function(e,t){this._components&&this._components.forEach(e,t)}},{key:"traverse",value:function(e,t){e.call(t,this),this._components&&this._components.forEach(function(n){n.isContainer()?n.traverse(e,t):e.call(t,n)})}},{key:"indexOf",value:function(e){return(this._components||f).indexOf(e)}},{key:"size",value:function(){return(this._components||f).length}},{key:"moveChildAt",value:function(e,t){var n=this.indexOf(t);if(-1!=n){var r=this._components.splice(0,n),o=this._components.splice(1);this._components=r.concat(o),e=Math.max(0,e),e=Math.min(e,this._components.length),r=this._components.splice(0,e),this._components=r.concat(t,this._components)}}},{key:"moveChildForward",value:function(e){var t=this.indexOf(e);-1!=t&&t!=this.size()-1&&(this._components[t]=this._components[t+1],this._components[t+1]=e)}},{key:"moveChildBackward",value:function(e){var t=this.indexOf(e);-1!=t&&0!=t&&(this._components[t]=this._components[t-1],this._components[t-1]=e)}},{key:"moveChildToFront",value:function(e){var t=this.indexOf(e);if(-1!=t&&t!=this.size()-1){var n=this._components.splice(0,t),r=this._components.splice(1);this._components=n.concat(r,this._components)}}},{key:"moveChildToBack",value:function(e){var t=this.indexOf(e);if(-1!=t&&0!=t){var n=this._components.splice(0,t),r=this._components.splice(0);this._components=this._components.concat(n,r)}}},{key:"symmetryX",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"symmetryX",this).call(this,e),this.components.map(function(e){e.symmetryX(0)})}},{key:"findAll",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"==typeof e)return a.select(e,this,n[0]||this);if("function"==typeof e){for(var o=[],i=this.components.length-1;i>=0;i--){var u,s=(u=this.components[i]).findAll.apply(u,[e].concat(n));s&&(o=o.concat(s))}return e.apply(void 0,[this].concat(n))&&o.push(this),o}}},{key:"findFirst",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"==typeof e)return a.select(e,this,n[0])[0];if("function"==typeof e){for(var o=this.components.length-1;o>=0;o--){var i,u=(i=this.components[o]).findFirst.apply(i,[e].concat(n));if(null!=u)return u}return e.apply(void 0,[this].concat(n))?this:null}}},{key:"findById",value:function(e){return this.root.findById(e)}},{key:"contains",value:function(e,n){var r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"contains",this).call(this,e,n);if(!r){var i=this.model,a=i.left,u=i.top,s=i.width,c=i.height,l=i.lineWidth,f=void 0===l?0:l,h=this.stuck?0:10+f/2;r=e<Math.max(a+s,a)+h&&e>Math.min(a+s,a)-h&&n<Math.max(u+c,u)+h&&n>Math.min(u+c,u)-h}return r}},{key:"capture",value:function(e,t){var n=this.transcoordP2S(e,t);if(!this.contains(n.x,n.y))return!1;var r=this.bounds;n.x-=r.left,n.y-=r.top;for(var o=this.layout.capturables(this),i=o.length-1;i>=0;i--){var a=o[i].capture(n.x,n.y);if(a)return a}return this.capturable&&this}},{key:"capturePath",value:function(e,t){if(t){if(t.indexOf(this)>-1)return!1;for(var n=0;n<t.length;n++)if(!this.containable(t[n]))return!1}for(var r=[],o=this.bounds,i=o.left,a=o.top,u=o.width,s=o.height,c=0;c<e.length;c++){var l=this.transcoordP2S(e[c].x,e[c].y);if(l.x<i||l.x>i+u||l.y<a||l.y>a+s)return!1;l.x-=i,l.y-=a,r.push(l)}for(var f=this.layout.capturables(this),h=f.length-1;h>=0;h--){var p=f[h];if(p.isContainer()){var d=p.capturePath(r,t);if(d)return d}}return this.focusible&&this}},{key:"render",value:function(e){var t=this.bounds,n=t.left,r=void 0===n?0:n,o=t.top,i=void 0===o?0:o,a=t.width,u=t.height;e.beginPath(),e.rect(r,i,a,u),this.drawFill(e),this.drawStroke(e)}},{key:"postrender",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postrender",this).call(this,e);var n=this.model,r=n.top,i=n.left;n.scale;e.translate(i,r),this.layout.drawables(this).forEach(function(t){t.draw(e)}),e.translate(-i,-r),this.drawText(e)}},{key:"trim",value:function(){this.components.forEach(function(e){e.trim()}),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"trim",this).call(this)}},{key:"showMoveHandle",get:function(){return!0}},{key:"hasTextProperty",get:function(){return!1}},{key:"components",get:function(){return this._components}},{key:"focusible",get:function(){return!0}},{key:"layout",get:function(){return u.Layout.get(this.get("layout"))||u.AbsoluteLayout}},{key:"hierarchy",get:function(){var e=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hierarchy",this);return this.components&&(e.components=this.components.map(function(e){return e.hierarchy})),e}}]),t}();t.default=h,["layout"].forEach(function(e){return i.default.memoize(h.prototype,e,!1)}),i.default.register("container",h)},function(e,t,n){"use strict";var r=n(108),o=n(113);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},function(e,t,n){"use strict";var r=n(23),o=n(109),i=n(110),a="[object Null]",u="[object Undefined]",s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?u:a:s&&s in Object(e)?o(e):i(e)}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){var t=void 0===e?"undefined":r(e);return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return null!=e&&"object"==(void 0===e?"undefined":r(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o={};t.default={register:function(e,t){o[e]=t},unregister:function(e){delete o[e]},get:function(e){if(e){var t=o[e];return t||(0,r.error)("Layout Not Found - ",e),t}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=s(n(0)),a=s(n(8)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return e.translate=e.translate||{x:0,y:0},r._draw_reserved=!1,r.__draw__=function(){r._draw_reserved=!1,r.trigger("redraw"),r.reflow(),r.draw()},r.throttle_render=function(){r._draw_reserved||requestAnimationFrame(r.__draw__),r._draw_reserved=!0},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"fitSize",value:function(e){if(this.target){var t=getComputedStyle(this.target),n=t?parseFloat(t.getPropertyValue("width")):this.target.offsetWidth,r=t?parseFloat(t.getPropertyValue("height")):this.target.offsetHeight;e.setAttribute("width",n*u.DPPX),e.setAttribute("height",r*u.DPPX),e.style.width=n+"px",e.style.height=r+"px"}}},{key:"resize",value:function(){this.fitSize(this.element)}},{key:"isLayer",value:function(){return!0}},{key:"createElement",value:function(){var e=i.default.createCanvas(1,1);return e.style.position="absolute",e}},{key:"dispose",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),this.target=null,this.element=null}},{key:"getContext",value:function(){return this._context2D||(this._context2D=this.canvas&&this.canvas.getContext("2d")),this._context2D}},{key:"draw",value:function(e){this.canvas&&(e=e||this.getContext())&&o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this,e)}},{key:"prerender",value:function(e){var t=this.model,n=t.translate,r=t.scale,o=void 0===r?{x:1,y:1}:r,i=t.rotation;e.clearRect(0,0,e.canvas.width,e.canvas.height),n&&e.translate(n.x*u.DPPX,n.y*u.DPPX),e.scale(o.x*u.DPPX,o.y*u.DPPX),i&&e.rotate(i)}},{key:"contains",value:function(e,t){return!1}},{key:"invalidate",value:function(){this.throttle_render()}},{key:"move",value:function(e){var t=this.get("translate")||{x:0,y:0};this.set({translate:{x:t.x+e.x,y:t.y+e.y}})}},{key:"target",get:function(){return this._target},set:function(e){this._target&&this.element&&this._target.removeChild(this.element),this._target=e,e&&(this.element||(this.element=this.createElement()),this.resize(),e.appendChild(this.element))}},{key:"canvas",get:function(){return this.element}},{key:"selected",get:function(){return this.root.selected},set:function(e){this.root.selected=e}},{key:"focused",get:function(){return this.root.focused},set:function(e){this.root.focused=e}},{key:"rotatePoint",get:function(){return{x:0,y:0}}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=(i(n(0)),i(n(87)));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){for(var t=0;e&&!e.isRootModel();)t+=e.get("rotation")||0,e=e.parent;return t%(2*Math.PI)}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"execute",value:function(){this.params.changes.forEach(function(e){var t=e.component,n=e.to_container,r=e.to_index,o=e.to_left,i=e.to_top,u=(e.hint,function(e){if(e.isRootModel())return e.bounds;var t=e.bounds,n=e.rotatePoint,r=n;return{left:(r=e.transcoordS2T(r.x,r.y)).x-(n.x-t.left),top:r.y-(n.y-t.top),width:t.width,height:t.height}}(t)),s=a(t);if(t.removeSelf(!n),t.bounds=u,t.set("rotation",s),n){t.set("rotation",function(e,t){return((e.get("rotation")||0)-a(t))%(2*Math.PI)}(t,n));var c=function(e,t){if(t.isRootModel())return e.bounds;var n=e.bounds,r=e.rotatePoint,o=t.transcoordT2S(r.x,r.y),i=t.bounds;return{left:o.x-(r.x-n.left)-i.left,top:o.y-(r.y-n.top)-i.top,width:n.width,height:n.height}}(t,n);e.to_left=void 0!==o?o:c.left,e.to_top=void 0!==i?i:c.top,t.bounds={left:e.to_left,top:e.to_top,width:c.width,height:c.height},void 0===r?n.addComponent(t):n.insertComponentAt(t,r)}})}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(71),a=(r=i)&&r.__esModule?r:{default:r};var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=t,this.config=n,this._started=!1;var r=this.config,o=r.delta,i=void 0===o?"linear":o,u=r.options,s=r.ease;"string"==typeof i&&(i=a.default[i]),this.delta="out"==s?function(e,t){return function(n){return 1-e(1-n,t)}}(i,u):"inout"==s?function(e,t){return function(n){return n<.5?e(2*n,t)/2:(2-e(2*(1-n),t))/2}}(i,u):i,this.init()}return o(e,[{key:"dispose",value:function(){this.stop(),delete this.client}},{key:"init",value:function(){}},{key:"start",value:function(){var e=this;if(!this._started){var t=this.config,n=t.duration,r=void 0===n?2e3:n,o=t.delay,i=void 0===o?0:o,a=t.repeat,u=void 0!==a&&a;this._started=!0,setTimeout(function(){var t=0;e._raf=requestAnimationFrame(function n(){if(e._started){0==t&&(t=performance.now(),e.client.touch());var o=performance.now()-t,a=i/r,s=o/r,c=u?s%(1+a):Math.min(s,1);c=Math.max(c-a,0),e.step(e.delta(c)),e.client&&e.client.invalidate(),!(s>=1)||u&&e._started||(e.stop(),t=0),e._started&&(e._raf=requestAnimationFrame(n))}})},0)}}},{key:"stop",value:function(){this._raf&&cancelAnimationFrame(this._raf),this._raf=null,this._started=!1}},{key:"started",get:function(){return this._started},set:function(e){this.started!=!!e&&(e?this.start():this.stop())}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(79);Object.defineProperty(t,"compile",{enumerable:!0,get:function(){return a(r).default}});var o=n(88);Object.defineProperty(t,"duplicate",{enumerable:!0,get:function(){return a(o).default}});var i=n(20);function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"select",{enumerable:!0,get:function(){return i.select}}),Object.defineProperty(t,"match",{enumerable:!0,get:function(){return i.match}})},function(e,t,n){"use strict";e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){"use strict";var r=Array.isArray;e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){var o=t.get("class");return!!o&&(o.split(" ")||[]).indexOf(e.substr(1))>=0}function o(e,t,n,r){return e==t.get("type")}function i(e,t,n,r){switch(e){case"(all)":return!0;case"(parent)":return n&&n.parent===t;case"(child)":case"(children)":return n&&n===t.parent;case"(sibling)":case"(siblings)":return n&&n.parent===t.parent&&n!==t;default:return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.match=function(e,t,n,i){if("(all)"==e)return!0;switch(e.charAt(0)){case"#":return function(e,t,n,r){return e.substr(1)==t.get("id")}(e,t);case".":return r(e,t,n,i);case"(":return function(e,t,n,r){switch(e){case"(all)":return!0;case"(self)":return r===t;case"(root)":return!r.parent&&r===t;case"(descendant)":return r!==t;case"(child)":return r===t.parent;default:return!1}}(e,t,0,i);default:return o(e,t,n,i)}},t.select=function(e,t,n){if("(root)"==e)return[t];if("(self)"==e)return n?[n]:[];var a;switch(e.charAt(0)){case"#":var u=t.root.findById(e.substr(1));return u?[u]:[];case".":a=r;break;case"(":a=i;break;default:a=o}return function e(t,n,r,o,i,a){t(n,r,o,i)&&a.push(r);r.components&&r.components.forEach(function(r){e(t,n,r,o,i,a)});return a}(a,e,t,n,t,[])}},function(e,t,n){"use strict";var r=n(98),o=n(99),i=n(100),a=n(101),u=n(102);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,e.exports=s},function(e,t,n){"use strict";var r=n(18);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){"use strict";var r=n(6).Symbol;e.exports=r},function(e,t,n){"use strict";var r=n(9)(Object,"create");e.exports=r},function(e,t,n){"use strict";var r=n(122);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){"use strict";var r=n(43),o=n(53);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);Object.defineProperty(t,"logger",{enumerable:!0,get:function(){return a(r).default}});var o=n(179);Object.defineProperty(t,"event",{enumerable:!0,get:function(){return a(o).default}});var i=n(70);function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"mixin",{enumerable:!0,get:function(){return a(i).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=u(n(8)),a=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}var s=["left","top","width","height","rotation","animation"],c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"isGroup",value:function(){return!0}},{key:"get",value:function(e){return this._model[e]}},{key:"set",value:function(e,n){if("string"==typeof e)return this.set((a=n,(i=e)in(r={})?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,r));var r,i,a,u=s.reduce(function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t},{});return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"set",this).call(this,u)}},{key:"capture",value:function(e,n){var r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"capture",this).call(this,e,n);if(!this.app.isEditMode)return r;if(this.parent.isGroup())return r&&r!==this&&r;for(var i=0;i<this.root.selected.length;i++){for(var a=this.root.selected[i];a!==this&&(a.isGroup()||a.parent.isGroup());)a=a.parent;if(a===this)return r&&r!==this&&r}return r&&r!==this&&this}},{key:"calculateBounds",value:function(){this.clearCache(),this.__MUTATING__=!0,this.mutateBounds(function(e){var t=a.default.union(this.components.map(function(e){return e.bounds}));return this.components.forEach(function(e){var n=e.bounds;e.bounds={left:n.left-t.left,top:n.top-t.top,width:n.width,height:n.height}}),{left:e.left+t.left,top:e.top+t.top,width:t.width,height:t.height}},this),this.__MUTATING__=!1,this.parent.isGroup()&&this.parent.calculateBounds()}},{key:"render",value:function(e){}},{key:"postrender",value:function(e){var t=this.model,n=t.top,r=t.left;t.scale;e.translate(r,n),this.layout.drawables(this).forEach(function(t){t.draw(e)}),e.translate(-r,-n)}},{key:"bounds",set:function(e){if(this.__MUTATING__)(function e(t,n,r,o){var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);null!==a&&e(a,n,r,o)}else if("value"in i&&i.writable)i.value=r;else{var u=i.set;void 0!==u&&u.call(o,r)}return r})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bounds",e,this);else{var n=this.bounds,r=e.width/n.width,o=e.height/n.height;this.path=this.path.map(function(t){return{x:e.left+(t.x-n.left)*r,y:e.top+(t.y-n.top)*o}}),this.components&&this.components.forEach(function(e){if(e.mutable)e.mutatePath(null,function(e){return e.map(function(e){return{x:e.x*r,y:e.y*o}})});else{var t=e.bounds,n=e.center,i={x:n.x*(1-r),y:n.y*(1-o)},a=t.width*(1-r),u=t.height*(1-o),s=-(i.x-a/2),c=-(i.y-u/2);e.bounds={left:t.left+s,top:t.top+c,width:t.width*r,height:t.height*o}}})}},get:function(){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bounds",this)}},{key:"focusible",get:function(){return!1}}]),t}();t.default=c,a.default.register("group",c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default={register:function(e,t){r[e]=t},unregister:function(e){delete r[e]},get:function(e){return r[e]}}},function(e,t,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":o(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";var r=n(9)(n(6),"Map");e.exports=r},function(e,t,n){"use strict";(function(e){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(6),i=n(144),a="object"==r(t)&&t&&!t.nodeType&&t,u=a&&"object"==r(e)&&e&&!e.nodeType&&e,s=u&&u.exports===a?o.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;e.exports=c}).call(t,n(51)(e))},function(e,t,n){"use strict";var r=n(145),o=n(146),i=n(147),a=i&&i.isTypedArray,u=a?o(a):r;e.exports=u},function(e,t,n){"use strict";var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.state,n=t.id,r=t.scale,i=void 0===r?u:r,c=(t.translate,t.bold),l=t.italic,f=t.fontFamily,h=void 0===f?"":f,p=t.textAlign,d=t.textBaseline,y=t.paddingTop,v=void 0===y?0:y,g=t.paddingBottom,b=void 0===g?0:g,m=t.paddingLeft,_=void 0===m?0:m,w=t.paddingRight,x=void 0===w?0:w,k=t.fontSize,O=void 0===k?o.DEFAULT.FONT_SIZE:k,P=t.lineWidth,A=void 0===P?0:P,E=t.lineDash,j=e.state.class,M=(e.text,e.strokeStyle),S=(e.fillStyle,e.rotation),T=void 0===S?0:S,C=e.fontColor,R=e.hidden,I=e.bounds,B=I.left,L=I.top,D=I.width,F=I.height,Y=e.element;Y.hidden=R,n&&(Y.id=n);j&&(Y.className=j);Object.assign(Y.style,s,{fontFamily:h,fontSize:O+"px",left:B+"px",top:L+"px",width:D+"px",height:F+"px",paddingTop:v+"px",paddingRight:x+"px",paddingBottom:b+"px",paddingLeft:_+"px",border:A+"px",borderColor:M,borderStyle:A>0?E||o.DEFAULT.LINE_DASH:"",color:C,fontWeight:c?"bold":"",fontStyle:l?"italic":"",textAlign:"end"==p?"right":"start"==p?"left":"",verticalAlign:d}),(0,a.default)(e);var N=e.delta(),U=(i&&i.x||1)*N.sx,z=(i&&i.y||1)*N.sy,H=(T||0)+N.theta,W=N.tx||0,G=N.ty||0;["-webkit-","-moz-","-ms-","-o-",""].forEach(function(e){Y.style[e+"transform"]="rotate("+H+"rad) translate("+W+"px, "+G+"px) scale("+U+", "+z+")"})};var r,o=n(2),i=n(215),a=(r=i)&&r.__esModule?r:{default:r};var u={x:1,y:1},s={boxSizing:"border-box",margin:"0px",position:"absolute",outline:"none",display:"inline-block"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13);Object.defineProperty(t,"Layout",{enumerable:!0,get:function(){return l(r).default}});var o=n(217);Object.defineProperty(t,"AbsoluteLayout",{enumerable:!0,get:function(){return l(o).default}});var i=n(218);Object.defineProperty(t,"CardLayout",{enumerable:!0,get:function(){return l(i).default}});var a=n(219);Object.defineProperty(t,"LinearHorizontalLayout",{enumerable:!0,get:function(){return l(a).default}});var u=n(220);Object.defineProperty(t,"LinearVerticalLayout",{enumerable:!0,get:function(){return l(u).default}});var s=n(221);Object.defineProperty(t,"TableLayout",{enumerable:!0,get:function(){return l(s).default}});var c=n(222);function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"HTMLAbsoluteLayout",{enumerable:!0,get:function(){return l(c).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(0)),i=u(n(5)),a=u(n(225));function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"is3dish",value:function(){return!0}},{key:"render",value:function(e){var t=this.model,n=t.cx,r=t.cy,o=t.rx,i=t.ry,a=t.startAngle,u=t.endAngle,s=t.anticlockwise;e.beginPath(),e.ellipse(n,r,Math.abs(o),Math.abs(i),0,a||0,u||2*Math.PI,s)}},{key:"contains",value:function(e,t){var n=this.model,r=n.cx,o=n.cy,i=(e-r)/(2*n.rx-.5),a=(t-o)/(2*n.ry-.5);return i*i+a*a<.25}},{key:"outline",value:function(e){return(0,a.default)(this,e)}},{key:"path",get:function(){var e=this.model,t=e.cx,n=e.cy,r=e.rx,o=e.ry;return[{x:t-r,y:n-o},{x:t+r,y:n-o},{x:t+r,y:n+o},{x:t-r,y:n+o}]},set:function(e){var t=e[0],n=e[2];this.set({cx:t.x+(n.x-t.x)/2,cy:t.y+(n.y-t.y)/2,rx:(n.x-t.x)/2,ry:(n.y-t.y)/2})}}]),t}();t.default=s,o.default.memoize(s.prototype,"path",!1),o.default.register("ellipse",s)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.license=function(e){a.key=e};var r={},o=!1,i=!1,a=t.License=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"isHostnameValid",value:function(){var t=location.hostname;if(""===t)return!0;for(var n=e.hostname.split(","),r=0;r<n.length;r++){if(e.matchLicenseHost(n[r].trim(),e.baseUrl))return!0;if(e.matchLicenseHost(n[r].trim(),t))return!0}return!1}},{key:"matchLicenseHost",value:function(t,n){if((n="127.0.0.1"==n?"localhost":n)==(t="127.0.0.1"==t?"localhost":t))return"localhost"!=t||"Production"!=e.licenseType;var r=t.split("."),o=n.split(".");if(r.length==o.length){for(var i=0;i<r.length;i++){var a=r[i],u=o[i];if(!("*"==a||a==u))return!1}return!0}return!1}},{key:"isUnlimited",value:function(){return"UNLIMITED"==e.expirationDate}},{key:"isUnexpired",value:function(){if(e.isUnlimited())return!0;var t=new Date;return e.expirationDate>t}},{key:"isKeyValid",value:function(){JSON.stringify(r,null," ");return r.Key==function(e,t){var n=JSON.parse(JSON.stringify(e));delete n.Key;var r=[];return u(JSON.stringify(n)).split("").forEach(function(e,n){r.push(String.fromCharCode(Math.abs(e.charCodeAt()-t[n%t.length].charCodeAt())))}),u(r.join(""))}(r,"hatio lab.")}},{key:"certified",get:function(){if(i)return i;if(!e.key)return!1;try{for(var t=Number(e.key.charAt(0)),n=Number(e.key.substring(e.key.length-t)),o=e.key.substring(1,e.key.length-t),a=0,u=0;u<o.length;u++)a+=o.charCodeAt(u);return a===n&&(r=JSON.parse(atob(o)),i=!0)}catch(e){return console.error("license invalid"),!1}}},{key:"key",get:function(){return e._key},set:function(t){e._key=t,o=!1,i=!1}},{key:"licenseType",get:function(){return r["License Type"]}},{key:"expirationDate",get:function(){var e=r["Expiration Date"]||"";if("UNLIMITED"==e)return e;var t=e.split(".");return e&&3==t.length&&(e=new Date(t[0],t[1],t[2])),e}},{key:"hostname",get:function(){return r.Hostname}},{key:"licenseKey",get:function(){return r.Key}},{key:"baseUrl",get:function(){return e._baseUrl||""},set:function(t){e._baseUrl=t}},{key:"valid",get:function(){return!!e.certified&&(o||(o=e.isKeyValid()&&e.isHostnameValid()&&e.isUnexpired()),o)}}]),e}();function u(t){return new e(t).toString("base64")}}).call(t,n(245).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){e instanceof Array||(e=[e]);n||(n=this.model_layer);var r=[];this.selected=e.map(function(e){try{return o.compile(e,n.app)}catch(e){return console.warn(e),!1}}).filter(function(e){return!!e}).map(function(e){var o=t.left,i=t.top,a=t.width,u=t.height,s=t.x,c=t.y,l=t.cx,f=t.cy;return isNaN(o)||isNaN(i)||isNaN(a)||isNaN(u)||(e.bounds={left:o,top:i,width:a,height:u}),isNaN(s)||isNaN(c)||e.move({x:s,y:c}),isNaN(l)||isNaN(f)||(e.center={x:l,y:f}),r.push({component:e,to_container:n}),e}),this.app.commander.execute(new a.default({changes:r}))};var r,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(17)),i=n(15),a=(r=i)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this.selected;this.selected=[];var t=null,n=e.filter(function(e){return!e.isRootModel()&&(e.parent.focusible||e.parent.isGroup())}).map(function(e){return t||(t=e.parent),{component:e,to_container:null}}),r=function(){var e=[];if(t.components.filter(function(e){return!n.find(function(t){return t.component===e})}).forEach(function(t){return e.push(t)}),e.length>1)return"break";var r=t.parent;e.forEach(function(e){return n.push({component:e,to_container:r})}),n.push({component:t,to_container:null}),t=r};for(;t&&t.isGroup();){var o=r();if("break"===o)break}n.length>0&&this.app.commander.execute(new i.default({changes:n}));t&&t.calculateBounds&&t.calculateBounds()};var r,o=n(15),i=(r=o)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=13.3;t.default={screen:function(e){return void 0!==e&&(r=e),r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=y(n(0)),i=y(n(8)),a=y(n(223)),u=d(n(17)),s=d(n(261)),c=d(n(263)),l=d(n(267)),f=d(n(3)),h=d(n(86)),p=n(1);function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}var v=[];"undefined"!=typeof window&&window.addEventListener("resize",function(){v.forEach(function(e){e.resize()})});var g=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({type:"root",scale:{x:1,y:1}},e||{}),n));return e=e||{},r._app=n,r.target_element=e.target_element,r.rebuildContentModel(r.model.model),v.push(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"dispose",value:function(){this._app&&this._app.dispose(),function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),this._disposeAllResources(),this.target_element=null,delete this._refresh_mapping_debouncer,h.hide(this);var e=v.indexOf(this);e>=0&&v.splice(e,1)}},{key:"isRoot",value:function(){return!0}},{key:"variable",value:function(e,t){var n=this.findById(e);if(!n){var r=this.findTemplateFor(e);if(!r)return;var o=Object.assign(f.clone(r.hierarchy),{id:e,templatePrefix:""});n=u.compile(o,this.app),this.model_layer.addComponent(n)}if(void 0===t)return n.data;n.data=t,n.touch()}},{key:"buildVariables",value:function(e){var t=this;!e||e instanceof Array||(e=Object.keys(e).map(function(t){var n=e[t];return n.key=t,n})),e&&e.forEach(function(e,n){var r=t.indexMap[e.key];if(r)r.set({data:e.value,mappings:e.mappings&&e.mappings.slice(),dataType:e.dataType});else{var o=u.compile({type:"variable",id:e.key,left:-120,top:0+20*n,strokeStyle:"black",width:100,height:20,dataType:e.type,data:e.value,mappings:e.mappings&&e.mappings.slice()},t.app);t.model_layer.addComponent(o)}})}},{key:"addTemplate",value:function(e,t){var n=this.templateMap[e];n&&(0,p.error)("Template replaced (duplicated)",e,t,n),this.templateMap[e]=t,delete this.templatePrefixes}},{key:"removeTemplate",value:function(e,t){var n=this.templateMap[e];n!==t?(0,p.warn)("Removing template failed (different)",e,t,n):delete this.templateMap[e],delete this.templatePrefixes}},{key:"findTemplateFor",value:function(e){this.templatePrefixes||(this.templatePrefixes=Object.keys(this.templateMap).sort().reverse());var t=this.templatePrefixes.find(function(t){return e.startsWith(t)});if(t)return this.templateMap[t]}},{key:"addIndex",value:function(e,t){var n=this.indexMap[e];n&&(0,p.error)("Index replaced (duplicated)",e,t,n),this.indexMap[e]=t}},{key:"removeIndex",value:function(e,t){var n=this.indexMap[e];n!==t?(0,p.warn)("Removing index failed (different)",e,t,n):delete this.indexMap[e]}},{key:"findById",value:function(e){return this.indexMap[e]}},{key:"findOrCreate",value:function(e){var t=this.indexMap[e];if(!t){var n=this.findTemplateFor(e);if(n){var r=Object.assign(f.clone(n.hierarchy),{id:e,templatePrefix:""});t=u.compile(r,this.app),this.model_layer.addComponent(t)}}return t}},{key:"resize",value:function(){this.components.forEach(function(e){e.resize&&e.resize()}),this.invalidate()}},{key:"_disposeAllResources",value:function(){var e=this;this.selected=[],this._focused=null,this._ready=!1,this.eventEngine&&(this.assist_handlers&&this.assist_handlers.forEach(function(t){e.eventEngine.remove(t)}),this.eventEngine.dispose(),delete this.eventEngine),this.assist_layers&&this.assist_layers.forEach(function(t){t.dispose(),e.removeComponent(t)}),delete this.assist_layers,this.model_layer&&this.model_layer.dispose(),this.model_layer&&this.removeComponent(this.model_layer),delete this.model_layer,this.indexMap={},this.templateMap={}}},{key:"rebuildContentModel",value:function(e){var t=this;this._disposeAllResources(),this.eventEngine=new c.Engine(this),(e=e||{}).type="model-layer";var n=e.variables;delete e.variables,this.model_layer=u.compile(e,this.app),this.model_layer.target=this.target_element,this.addComponent(this.model_layer),n&&this.buildVariables(n),this.assist_layers=(this.model.layers||[]).map(function(e){var n=u.compile(e,t.app);return n.target=t.target_element,t.addComponent(n),n}),this.assist_handlers=(this.model.handlers||[]).map(function(e){var n={};return t.eventEngine.add(n,l.EventMap.get(e)),n}),this._ready=!0,this.traverse(function(e){return e.ready()})}},{key:"render",value:function(){this.components.forEach(function(e){return e.draw()})}},{key:"contains",value:function(e,t){return!0}},{key:"capturePath",value:function(e,t){return this.model_layer.capturePath(e,t)}},{key:"invalidate",value:function(){this.components.forEach(function(e){return e.invalidate()})}},{key:"refreshMappings",value:function(){if(!this._refresh_mapping_debouncer){if(this.disposed)return;this._refresh_mapping_debouncer=f.debounce(function e(t){t.executeMappings(),t.components&&t.components.forEach(function(t){return e(t)})},1e3)}this._refresh_mapping_debouncer(this.model_layer)}},{key:"_addTraverse",value:function(e){var t=this;e.components&&e.components.forEach(function(e){return t._addTraverse(e)});var n=e.model,r=n.id,o=n.templatePrefix;r&&this.addIndex(r,e),o&&this.addTemplate(o,e);var i=f.merge({},e.eventMap,e.model.eventMap);this.eventEngine.add(e,i)}},{key:"_removeTraverse",value:function(e){var t=this;e.components&&e.components.forEach(function(e){return t._removeTraverse(e)});var n=e.model,r=n.id,o=n.templatePrefix;r&&this.removeIndex(r,e),o&&this.removeTemplate(o,e),this.eventEngine.remove(e)}},{key:"onadded",value:function(e,t){this._addTraverse(t),this.refreshMappings(),this.invalidate()}},{key:"onremoved",value:function(e,t){this._removeTraverse(t),this.invalidate()}},{key:"onchanged",value:function(e,t,n){t.templatePrefix&&this.removeTemplate(t.templatePrefix,n.origin),e.templatePrefix&&this.addTemplate(e.templatePrefix,n.origin),t.id&&this.removeIndex(t.id,n.origin),e.id&&this.addIndex(e.id,n.origin),t.id==e.id&&t.class==e.class||this.refreshMappings()}},{key:"app",get:function(){return this._app}},{key:"target_element",get:function(){return this._target_element},set:function(e){this._ua_event_handler&&(this._ua_event_handler.dispose(),delete this._ua_event_handler),e&&(this._ua_event_handler=new c.UAEventHandler(this,e)),this.forEach(function(t){return t.target=e}),this._target_element=e}},{key:"unitScale",get:function(){switch(this.model_layer.get("unit")){case"mm":case"cm":case"in":return this.app.PPM/10;case"px":default:return 1}}},{key:"root",get:function(){return this}},{key:"isReady",get:function(){return this._ready}},{key:"rootModel",get:function(){return this.model_layer}},{key:"stuck",get:function(){return!0}},{key:"data",get:function(){return Object.values(this.indexMap).reduce(function(e,t){return e[t.model.id]=t.data,e},{})},set:function(e){for(var t in e){var n=this.findOrCreate(t);n&&(n.data=e[t])}}},{key:"selected",get:function(){return(this._selected||[]).filter(function(e){return e.parent})},set:function(e){var t=this._selected;this._selected=e,this.trigger("selected",e,t)}},{key:"focused",get:function(){return this._focused},set:function(e){this._focused!==e&&(this._focused=e,this.invalidate())}},{key:"style",get:function(){return this._style},set:function(e){this._style=e,this._compiled_style=s.compile(e)}},{key:"hasTextProperty",get:function(){return!1}},{key:"eventMap",get:function(){return{"(root)":{"(descendant)":{added:this.onadded,removed:this.onremoved,change:this.onchanged}}}}}]),t}();t.default=g,Object.assign(g.prototype,{fit:a.default}),o.default.memoize(g.prototype,"unitScale",!1)},function(e,t,n){"use strict";var r=n(10),o=n(11),i="[object AsyncFunction]",a="[object Function]",u="[object GeneratorFunction]",s="[object Proxy]";e.exports=function(e){if(!o(e))return!1;var t=r(e);return t==a||t==u||t==i||t==s}},function(e,t,n){"use strict";(function(t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r="object"==(void 0===t?"undefined":n(t))&&t&&t.Object===Object&&t;e.exports=r}).call(t,n(30))},function(e,t,n){"use strict";var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){"use strict";var r=n(114),o=n(121),i=n(123),a=n(124),u=n(125);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,e.exports=s},function(e,t,n){"use strict";var r=n(126),o=n(129),i=n(130),a=1,u=2;e.exports=function(e,t,n,s,c,l){var f=n&a,h=e.length,p=t.length;if(h!=p&&!(f&&p>h))return!1;var d=l.get(e);if(d&&l.get(t))return d==t;var y=-1,v=!0,g=n&u?new r:void 0;for(l.set(e,t),l.set(t,e);++y<h;){var b=e[y],m=t[y];if(s)var _=f?s(m,b,y,t,e,l):s(b,m,y,e,t,l);if(void 0!==_){if(_)continue;v=!1;break}if(g){if(!o(t,function(e,t){if(!i(g,t)&&(b===e||c(b,e,n,s,l)))return g.push(t)})){v=!1;break}}else if(b!==m&&!c(b,m,n,s,l)){v=!1;break}}return l.delete(e),l.delete(t),v}},function(e,t,n){"use strict";var r=n(49),o=n(54),i=n(26);e.exports=function(e){return i(e)?r(e):o(e)}},function(e,t,n){"use strict";var r=n(142),o=n(50),i=n(19),a=n(32),u=n(52),s=n(33),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),l=!n&&o(e),f=!n&&!l&&a(e),h=!n&&!l&&!f&&s(e),p=n||l||f||h,d=p?r(e.length,String):[],y=d.length;for(var v in e)!t&&!c.call(e,v)||p&&("length"==v||f&&("offset"==v||"parent"==v)||h&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||u(v,y))||d.push(v);return d}},function(e,t,n){"use strict";var r=n(143),o=n(12),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!u.call(e,"callee")};e.exports=s},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){"use strict";var r=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}},function(e,t,n){"use strict";var r=n(34),o=n(148),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){"use strict";e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){"use strict";var r=n(149),o=n(31),i=n(150),a=n(151),u=n(152),s=n(10),c=n(45),l=c(r),f=c(o),h=c(i),p=c(a),d=c(u),y=s;(r&&"[object DataView]"!=y(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=y(new o)||i&&"[object Promise]"!=y(i.resolve())||a&&"[object Set]"!=y(new a)||u&&"[object WeakMap]"!=y(new u))&&(y=function(e){var t=s(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case l:return"[object DataView]";case f:return"[object Map]";case h:return"[object Promise]";case p:return"[object Set]";case d:return"[object WeakMap]"}return t}),e.exports=y},function(e,t,n){"use strict";var r=n(58);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){"use strict";var r=n(9),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){"use strict";var r=n(60),o=n(158),i=n(159);e.exports=function(e,t){return i(o(e,t,r),e+"")}},function(e,t,n){"use strict";e.exports=function(e){return e}},function(e,t,n){"use strict";e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(18),i=n(26),a=n(52),u=n(11);e.exports=function(e,t,n){if(!u(n))return!1;var s=void 0===t?"undefined":r(t);return!!("number"==s?i(n)&&a(t,n.length):"string"==s&&t in n)&&o(n[t],e)}},function(e,t,n){"use strict";var r=n(10),o=n(12),i=n(167),a="[object DOMException]",u="[object Error]";e.exports=function(e){if(!o(e))return!1;var t=r(e);return t==u||t==a||"string"==typeof e.message&&"string"==typeof e.name&&!i(e)}},function(e,t,n){"use strict";e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},function(e,t,n){"use strict";e.exports=/<%=([\s\S]+?)%>/g},function(e,t,n){"use strict";var r=n(176);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(10),i=n(12),a="[object Symbol]";e.exports=function(e){return"symbol"==(void 0===e?"undefined":r(e))||i(e)&&o(e)==a}},function(e,t,n){"use strict";var r=n(11),o=n(180),i=n(69),a="Expected a function",u=Math.max,s=Math.min;e.exports=function(e,t,n){var c,l,f,h,p,d,y=0,v=!1,g=!1,b=!0;if("function"!=typeof e)throw new TypeError(a);function m(t){var n=c,r=l;return c=l=void 0,y=t,h=e.apply(r,n)}function _(e){var n=e-d;return void 0===d||n>=t||n<0||g&&e-y>=f}function w(){var e=o();if(_(e))return x(e);p=setTimeout(w,function(e){var n=t-(e-d);return g?s(n,f-(e-y)):n}(e))}function x(e){return p=void 0,b&&c?m(e):(c=l=void 0,h)}function k(){var e=o(),n=_(e);if(c=arguments,l=this,d=e,n){if(void 0===p)return function(e){return y=e,p=setTimeout(w,t),v?m(e):h}(d);if(g)return p=setTimeout(w,t),m(d)}return void 0===p&&(p=setTimeout(w,t)),h}return t=i(t)||0,r(n)&&(v=!!n.leading,f=(g="maxWait"in n)?u(i(n.maxWait)||0,t):f,b="trailing"in n?!!n.trailing:b),k.cancel=function(){void 0!==p&&clearTimeout(p),y=0,c=d=l=p=void 0},k.flush=function(){return void 0===p?h:x(o())},k}},function(e,t,n){"use strict";var r=n(11),o=n(67),i=NaN,a=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return i;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=s.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):u.test(e)?i:+e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n){if(n instanceof Array)n.forEach(function(n){return e(t,n)});else{if(t.mixedIn=t.hasOwnProperty("mixedIn")?t.mixedIn:[],t.mixingIn=t.hasOwnProperty("mixingIn")?t.mixingIn:[],t.mixedIn.indexOf(n)>=0)return t;if(t.mixingIn.indexOf(n)>=0)throw new Error("found cyclic dependencies between "+t.mixingIn);t.mixingIn.push(n),n.call(t),t.mixingIn.pop(),t.mixedIn.push(n)}return t}},function(e,t,n){"use strict";function r(e){return e}function o(e){return Math.pow(e,2)}function i(e){return 1-Math.sin(Math.acos(e))}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:1.5};return Math.pow(e,2)*((t.x+1)*e-t.x)}function u(e){for(var t=0,n=1;;t+=n,n/=2)if(e>=(7-4*t)/11)return-Math.pow((11-6*t-11*e)/4,2)+Math.pow(n,2)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:1.5};return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t.x/3*e)}Object.defineProperty(t,"__esModule",{value:!0}),t.linear=r,t.quad=o,t.circ=i,t.back=a,t.bounce=u,t.elastic=s,t.default={linear:r,quad:o,circ:i,back:a,bounce:u,elastic:s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setShadow=function(e,t,n){var o=t.left,i=void 0===o?0:o,a=t.top,u=void 0===a?0:a,s=t.blurSize,c=void 0===s?0:s,l=t.color,f=void 0===l?"transparent":l,h=n.rootModel.get("scale")||r;e.shadowOffsetX=i*h.x,e.shadowOffsetY=u*h.y,e.shadowBlur=c*h.x,e.shadowColor=f},t.resetShadow=function(e){e.shadowColor="transparent"};var r={x:1,y:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.intercept=function(e,t,n){var i=e.__lookupGetter__(t);if(!i)return void(0,o.error)(t+" is not defined in "+e.constructor.name);n?e.__defineGetter__(t,function(){return void 0===this.__cache__[t]&&(this.__cache__[t]=i.call(this)),r.clone(this.__cache__[t])}):e.__defineGetter__(t,function(){return void 0===this.__cache__[t]&&(this.__cache__[t]=i.call(this)),this.__cache__[t]})},t.reset=function(e){e.__cache__={}},t.clear=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];0==n.length?e.__cache__={}:n.forEach(function(t){return delete e.__cache__[t]})};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3)),o=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.duration,n=void 0===t?1e3:t,r=(e.delay,e.step),o=e.delta,a=e.ease,u=e.options,s=e.repeat,c=void 0!==s&&s;"string"==typeof o&&(o=i.default[o]);"out"==a?o=function(e,t){return function(n){return 1-e(1-n,t)}}(o,u):"inout"==a&&(o=function(e,t){return function(n){return n<.5?e(2*n,t)/2:(2-e(2*(1-n),t))/2}}(o,u));var l=!1;return{start:function(){var e=this;if(l)return this;l=!0;var t=0;return requestAnimationFrame(function i(){if(!l)return;0==t&&(t=performance.now());var a=(performance.now()-t)/n,s=c?a%1:Math.min(a,1);r(o(s,u)),!(a>=1)||c&&l||(e.stop(),t=0);l&&requestAnimationFrame(i)}),this},stop:function(){return l=!1,this}}};var r,o=n(71),i=(r=o)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createCanvas=void 0,t.createElement=void 0;"undefined"==typeof document?t.createCanvas=function(e,t){return new Canvas(e,t)}:t.createCanvas=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n}},function(e,t,n){"use strict";function r(e,t,n){if(t.length<2)return t;for(var r=2;r<t.length;r++){var o=t.substring(0,r);if(!(e.measureText(o).width<n))break}return t.substring(0,r-1)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o){var i=String(t).split("\n");return o?[].concat.apply([],i.map(function(t){return function(e,t,n){var o,i,a=t.split(" "),u=[],s=[];for(o=0,i=1;i<=a.length;i++)if(s=a.slice(o,i),e.measureText(s.join(" ")).width>n){if(i-o==1){var c=r(e,s[0],n);u.push([c]),a.splice(o,1,c,s[0].substring(c.length))}else{for(;""==a[i-1];)i++;u.push(a.slice(o,--i))}o=i}i-o>1&&u.push(s);0==u.length&&u.push([""]);return u}(e,t,n)})):i.map(function(e){return e.split(" ")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.substitute=function(e){var t=this;if(!e)return;var n=String(e),o=(n.match(/#{(\S*)}/gi)||[]).map(function(e){return i(e)}),a=(n.match(/\${[^}]*}/gi)||[]).map(function(e){return i(e)});if(0==o.length&&0==a.length)return n;var u=n;return o.forEach(function(e){var n=(0,r.objToVal)(e.accessor(t.getState(e.target)));u=u.replace(e.match,void 0===n?"":n)}),a.forEach(function(e){var n=t.root.findById(e.target),o=(0,r.objToVal)(e.accessor(n&&n.data));u=u.replace(e.match,void 0===o?"":o)}),u},t.buildSubstitutor=function(e,t){if(!e)return;var n=String(e),o=(n.match(/#{(\S*)}/gi)||[]).map(function(e){return i(e)}),a=(n.match(/\${[^}]*}/gi)||[]).map(function(e){return i(e)});if(0==o.length&&0==a.length)return;return function(){var e=n;return o.forEach(function(n){var o=(0,r.objToVal)(n.accessor(t.getState(n.target)));e=e.replace(n.match,void 0===o?"":o)}),a.forEach(function(n){var o=t.root.findById(n.target),i=(0,r.objToVal)(n.accessor(o&&o.data));e=e.replace(n.match,void 0===i?"":i)}),e}};var r=n(3),o=function(e){return e};function i(e){var t=e.substr(2,e.length-3).trim().replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split(".").filter(function(e){return!!e.trim()}),n=t.slice(1);return{match:e,target:t[0],accessor:n.length>0?function(e){return n.reduce(function(e,t){return e?e[t]:void 0},e)}:o}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0};var i=new Image;i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAclBMVEVHcEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC0BbqFAAAAJXRSTlMAgAP3VSI6/g9fBk5FavJsMrariSjzPnO1enRRL5SMhmOOWB9keFTE0wAAANxJREFUOMutk9kWgyAMRLFuiLjUtdp9yf//YglVsQXz1HniMPcEMgHGvpX2O0Ypi+EgCL+IAShC+wB7QfubRDT7AFcnUPoLMLiP4PyJbsb55i05AgnR5iaQDsICgtH0cotBWoAP1c7kC6kFxEseCfZfB6gEgbNeBrira2QmH1uVYCXlA3is8UmgUCPIyQJKEmu8QtQJN0e9DPXVpzG2G216c1CqRmcBOdxXk07sWUSPv07zo0amCNQycv+NzmR6cRcwmfbuI7p2nZ/z4be0P83Foz6vIkhfZXr82XgDlZsspIq4peUAAAAASUVORK5CYII=",t.default=function(e){return function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),r(n,[{key:"postrender",value:function(e){o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"postrender",this).call(this,e),this.app.isEditMode&&this._focused&&this.showMoveHandle&&this._draw_move_handle(e)}},{key:"_draw_move_handle",value:function(e){var t=this.bounds,n=t.left,r=t.top,o=t.width;e.save(),e.beginPath(),e.rect(n+o,r,25,25);e.fillStyle="rgba(235, 235, 235, 1)",e.strokeStyle="#333",e.fill(),e.stroke(),e.drawImage(i,n+o+3.75,r+3.75,17.5,17.5),e.closePath(),e.restore()}},{key:"contains",value:function(e,t){var r=o(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"contains",this).call(this,e,t);if(this.app.isViewMode)return r;var i=this.bounds,a=i.left,u=i.top,s=i.width,c=(i.height,a+s);return this.showMoveHandle&&(r=r||e<Math.max(c+25,c)&&e>Math.min(c+25,c)&&t<Math.max(u+25,u)&&t>Math.min(u+25,u)),this._focused=!!r,this.invalidate(),r}}]),n}()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n){var i=r.Component.register(t.type);if(!i)return(0,o.warn)("Class not found",t.type),null;var a=new i(t,n);t.components&&a.isContainer()&&(t.components.forEach(function(t){var r=e(t,n);r&&a.addComponent(r)}),delete t.components);a.created();return a};var r=i(n(80)),o=(i(n(242)),n(1));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);Object.defineProperty(t,"Component",{enumerable:!0,get:function(){return T(r).default}});var o=n(8);Object.defineProperty(t,"Container",{enumerable:!0,get:function(){return T(o).default}});var i=n(42);Object.defineProperty(t,"RootContainer",{enumerable:!0,get:function(){return T(i).default}});var a=n(5);Object.defineProperty(t,"Shape",{enumerable:!0,get:function(){return T(a).default}});var u=n(81);Object.defineProperty(t,"Line",{enumerable:!0,get:function(){return T(u).default}});var s=n(37);Object.defineProperty(t,"Ellipse",{enumerable:!0,get:function(){return T(s).default}});var c=n(82);Object.defineProperty(t,"Rect",{enumerable:!0,get:function(){return T(c).default}});var l=n(226);Object.defineProperty(t,"Polygon",{enumerable:!0,get:function(){return T(l).default}});var f=n(227);Object.defineProperty(t,"Polyline",{enumerable:!0,get:function(){return T(f).default}});var h=n(83);Object.defineProperty(t,"Ruler",{enumerable:!0,get:function(){return T(h).default}});var p=n(228);Object.defineProperty(t,"ImageView",{enumerable:!0,get:function(){return T(p).default}});var d=n(229);Object.defineProperty(t,"AudioPlayer",{enumerable:!0,get:function(){return T(d).default}});var y=n(230);Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return T(y).default}});var v=n(28);Object.defineProperty(t,"Group",{enumerable:!0,get:function(){return T(v).default}});var g=n(231);Object.defineProperty(t,"LocalRef",{enumerable:!0,get:function(){return T(g).default}});var b=n(232);Object.defineProperty(t,"GlobalRef",{enumerable:!0,get:function(){return T(b).default}});var m=n(84);Object.defineProperty(t,"InfoWindow",{enumerable:!0,get:function(){return T(m).default}});var _=n(233);Object.defineProperty(t,"HTMLOverlayElement",{enumerable:!0,get:function(){return T(_).default}});var w=n(234);Object.defineProperty(t,"HTMLOverlayContainer",{enumerable:!0,get:function(){return T(w).default}});var x=n(235);Object.defineProperty(t,"Path",{enumerable:!0,get:function(){return T(x).default}});var k=n(236);Object.defineProperty(t,"Triangle",{enumerable:!0,get:function(){return T(k).default}});var O=n(237);Object.defineProperty(t,"Donut",{enumerable:!0,get:function(){return T(O).default}});var P=n(238);Object.defineProperty(t,"Star",{enumerable:!0,get:function(){return T(P).default}});var A=n(239);Object.defineProperty(t,"Variable",{enumerable:!0,get:function(){return T(A).default}});var E=n(4);Object.defineProperty(t,"RectPath",{enumerable:!0,get:function(){return T(E).default}});var j=n(240);Object.defineProperty(t,"ValueHolder",{enumerable:!0,get:function(){return T(j).default}});var M=n(241);Object.defineProperty(t,"DataSource",{enumerable:!0,get:function(){return T(M).default}});var S=n(78);function T(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"MoveHandle",{enumerable:!0,get:function(){return T(S).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=(r=i)&&r.__esModule?r:{default:r},u=n(224);var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),o(t,[{key:"isLine",value:function(){return!0}},{key:"render",value:function(e){var t=this.model,n=t.begin,r=void 0===n?"none":n,o=t.end,i=void 0===o?"none":o,a=t.lineWidth,s=this.drawPath;(0,u.drawEndTips)(e,s,this.model),e.beginPath();var c=(0,u.getTipNeckPos)(r,a,s[0],s[1]),l=(0,u.getTipNeckPos)(i,a,s[s.length-1],s[s.length-2]);e.moveTo(c.x,c.y);for(var f=1;f<s.length-1;f++)e.lineTo(s[f].x,s[f].y);e.lineTo(l.x,l.y),this.drawStroke(e)}},{key:"contains",value:function(e,t){var n=this.model.lineWidth;return(0,u.containedInPath)(e,t,this.drawPath,n)}},{key:"drawPath",get:function(){return this.path}},{key:"resizable",get:function(){return!1}},{key:"mutable",get:function(){return!0}},{key:"rotatable",get:function(){return!1}},{key:"path",get:function(){var e=this.model;return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2}]},set:function(e){var t=e[0],n=e[1];this.set({x1:t.x,y1:t.y,x2:n.x,y2:n.y})}}]),t}();t.default=s,s.getTipNeckPos=u.getTipNeckPos,s.containedInPath=u.containedInPath,s.drawEndTips=u.drawEndTips,a.default.memoize(s.prototype,"path",!1),a.default.register("line",s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(0)),i=u(n(5)),a=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}var s={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"round",name:"round",property:"round"}]},c={ondragmove:function(e,t,n){var r=n.model,o=r.left,i=(r.top,r.width),a=r.height,u=(n.transcoordP2S(e.x,e.y).x-o)/(i/2)*100;u=l(u,i,a),n.set({round:u})}};function l(e,t,n){var r=Math.min(t,n)/2;return e>=r?e=r:e<=0&&(e=0),e}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,a.default)(i.default)),r(t,[{key:"is3dish",value:function(){return!0}},{key:"render",value:function(e){var t=this.model.round,n=void 0===t?0:t,r=this.bounds,o=r.left,i=r.top,a=r.width,u=r.height;e.translate(o,i),e.beginPath(),n=l(n,a,u),e.moveTo(n,0),e.arcTo(a,0,a,u,n),e.arcTo(a,u,0,u,n),e.arcTo(0,u,0,0,n),e.arcTo(0,0,a,0,n),e.translate(-o,-i)}},{key:"controls",get:function(){var e=this.model,t=e.left,n=e.top,r=e.width,o=e.round,i=e.height;return[{x:t+r/2*((o=void 0==o?0:l(o,r,i))/100),y:n,handler:c}]}},{key:"nature",get:function(){return s}}]),t}();t.default=f,o.default.register("rect",f)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(0)),i=u(n(5)),a=u(n(4));!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(2));function u(e){return e&&e.__esModule?e:{default:e}}var s=[1,2,10,20,50,50,50,50,50,50],c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,a.default)(i.default)),r(t,[{key:"render",value:function(e){var t=this.model,n=t.lineWidth,r=void 0===n?1:n,o=t.fillStyle,i=void 0===o?"lightgray":o,a=t.font,u=void 0===a?"15px Arial":a,c=t.left,l=t.top,f=(t.rotation,t.origin),h=(t.margin,t.width),p=t.height,d=t.side,y=void 0===d?"bottom":d,v=t.strokeStyle,g=void 0===v?"#000000":v,b=t.scale,m=void 0===b?1:b;e.translate(c,l),e.beginPath();var _=Math.round(r/2);e.rect(-_,-_,h+2*_,p+2*_),e.clip(),e.beginPath(),e.rect(0,0,h,p),i&&(e.fillStyle=i,e.fill()),e.lineWidth=r,e.strokeStyle=g,e.stroke(),e.beginPath(),e.font=u;var w="bottom"!==y,x=w?0:p,k=4*p/5,O=2*p/3,P=1*p/2,A=3*p/5;w&&(k=p-k,O=p-O,P=p-P,A=p-1.5*p/5);var E=m*this.app.PPM/this.root.unitScale,j=Math.ceil(f/E),M=this.app.PPM/E,S=M<=1.1?1:s[Math.round(M)]||100;1!=S&&(j+=(S-j%S)%S);var T=Math.ceil(j*E),C=f+h;for(e.fillStyle=g;T<C;){if(j%10==0){e.moveTo(T-f,P),e.lineTo(T-f,x);var R=(j/10).toString(),I=e.measureText(R);e.fillText(R,T-f-I.width-6,A)}else j%5==0?(e.moveTo(T-f,O),e.lineTo(T-f,x)):(e.moveTo(T-f,k),e.lineTo(T-f,x));j+=S,T=Math.ceil(j*E)}}}]),t}();t.default=c,o.default.register("ruler",c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(0)),i=s(n(5)),a=s(n(4)),u=n(2);function s(e){return e&&e.__esModule?e:{default:e}}var c={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"textarea",label:"front-side-template",name:"frontSideTemplate",property:{language:"html"}},{type:"textarea",label:"back-side-template",name:"backSideTemplate",property:{language:"html"}},{type:"textarea",label:"style",name:"style",property:{language:"css"}}]};function l(e,t){var n=e.split(/\s+/),r=n.indexOf(t);return-1!=r?n.splice(r,1):n.splice(-1,0,t),n.join(" ")}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,a.default)(i.default)),r(t,[{key:"dispose",value:function(){var e=this;this.infoWindows.map(function(e){return e.component}).forEach(function(t){return e._removeInfoWindow(t)}),function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_findInfoWindowByComponent",value:function(e){return this.infoWindows.find(function(t){return t.component===e})}},{key:"_addInfoWindow",value:function(e,t,n){this._findInfoWindowByComponent(e)||this._windows.push({component:e,window:t,styleElement:n})}},{key:"_removeInfoWindow",value:function(e){var t=this._findInfoWindowByComponent(e);if(t){var n=t.window;n&&n.parentNode.removeChild(n);var r=this.infoWindows.lastIndexOf(t);this.infoWindows.splice(r,1)}}},{key:"render",value:function(e){var n=this.bounds,r=n.left,o=n.top,i=n.width,a=n.height;e.beginPath(),e.drawImage(t.image,r,o,i,a)}},{key:"infoWindows",get:function(){return this._windows||(this._windows=[]),this._windows}},{key:"hasTextProperty",get:function(){return!1}},{key:"nature",get:function(){return c}}],[{key:"hide",value:function(e,t){if(t){var n=e.root.findById(t);n?n._removeInfoWindow(e):console.warn("InfoWindow Not Found.",t)}}},{key:"show",value:function(e,n,r){if(n){var i=e.root.findById(n);if(i){if(!i._findInfoWindowByComponent(e)){var a=i.model,s=a.frontSideTemplate,c=void 0===s?"":s,f=a.backSideTemplate,h=[c,void 0===f?"":f].filter(function(e){return String(e).trim()});if(0!=(h=h.map(function(e){return o.default.template(function(e,t,n){return(t||n?['<div class="info-window-btns">',t?'<button class="closable">&#88</button>':"",n?'<button class="flipable">&#8652</button>':"","</div>"]:[]).concat(['<div class="info-window-content">',e,"</div>"]).join("")}(e,!r,2==h.length))})).length){var p='\n.flip {\n  backface-visibility:             hidden;\n      -moz-backface-visibility:    hidden;\n      -ms-backface-visibility:     hidden;\n      -o-backface-visibility:      hidden;\n      -webkit-backface-visibility: hidden;\n  border-radius: 7px;\n  height: auto;\n  font: normal 14px helvetica, arial, san serif;\n  position: absolute;\n  opacity:.9;\n  transform-origin:             50% 50% 0px;\n      -moz-transform-origin:    50% 50% 0px;\n      -ms-transform-origin:     50% 50% 0px;\n      -o-transform-origin:      50% 50% 0px;\n      -webkit-transform-origin: 50% 50% 0px;\n  transition: all 2s;\n      -moz-transition:    all 2s;\n      -ms-transition:     all 2s;\n      -o-transition:      all 2s;\n      -webkit-transition: all 2s;\n  min-width: 100px;min-height:50px;\n  background-color:#3e424e;\n  box-shadow: 2px 3px 2px 0px rgba(0,0,0,0.15);\n}\n\n#side-1 {\n  transform:             rotateY( 0deg );\n      -moz-transform:    rotateY( 0deg );\n      -ms-transform:     rotateY( 0deg );\n      -o-transform:      rotateY( 0deg );\n      -webkit-transform: rotateY( 0deg );\n}\n.flip:after{\n   content:"";\n   display:block;\n   position: absolute;\n   opacity:.9;\n   width: 0;\n   height: 0;\n}\n.flip.arrow-top:after{\n   left:45%;\n   top:-17px;\n   border-left:10px solid transparent;\n   border-bottom:18px solid #323b44;\n   border-right:10px solid transparent;\n}\n.flip.arrow-right:after{\n   left:100%;\n   top:48%;\n   border-top:10px solid transparent;\n   border-left:18px solid #323b44;\n   border-bottom:10px solid transparent;\n}\n.flip.arrow-bottom:after{\n   left:45%;\n   top:100%;\n   border-left:10px solid transparent;\n   border-top:18px solid #323b44;\n   border-right:10px solid transparent;\n}\n.flip.arrow-left:after{\n   right:100%;\n   top:48%;\n   border-top:10px solid transparent;\n   border-right:18px solid #323b44;\n   border-bottom:10px solid transparent;\n}\n\n#side-2 {\n  transform:             rotateY( 180deg );\n      -moz-transform:    rotateY( 180deg );\n      -ms-transform:     rotateY( 180deg );\n      -o-transform:      rotateY( 180deg );\n      -webkit-transform: rotateY( 180deg );\n}\n\n.flip-side-1 {\n  transform:             rotateY( 0deg ) !important;\n      -moz-transform:    rotateY( 0deg ) !important;\n      -ms-transform:     rotateY( 0deg ) !important;\n      -o-transform:      rotateY( 0deg ) !important;\n      -webkit-transform: rotateY( 0deg ) !important;\n}\n\n.flip-side-2 {\n  transform:             rotateY( 180deg ) !important;\n      -moz-transform:    rotateY( 180deg ) !important;\n      -ms-transform:     rotateY( 180deg ) !important;\n      -o-transform:      rotateY( 180deg ) !important;\n      -webkit-transform: rotateY( 180deg ) !important;\n}\n\n.info-window-btns{\n  position:absolute;\n  top:-7px;\n  right:5px;\n  overflow:hidden;\n}\n.info-window-content{\n  padding:10px;\n  color:#efefef;\n  font-size:13px;\n  line-height:1.4;\n}\n.info-window-btns button{\n  width:20px;height:20px;\n  float:right;\n  border:0;\n  border-radius:12px;\n  background-color:#2a7da1;\n  margin-right:3px;padding:2px 4px;\n  text-align:center;\n  cursor:pointer;\n  font-size:12px;\n  color:#fff\n}\n.info-window-btns button:hover{\n  background-color:#60bb23;\n}\n'+i.get("style"),d=e.bounds,y=d.left,v=d.top,g=d.width,b=d.height,m=document.createElement("span");m.style.position="absolute";var _=document.createElement("style");if(_.type="text/css",_.styleSheet?_.styleSheet.cssText=p:_.appendChild(document.createTextNode(p)),m.appendChild(_),h[0]){var w=document.createElement("div");w.id="side-1",w.className="flip",w.style.display="inline-block",w.innerHTML=h[0](e)}if(h[1]){var x=document.createElement("div");x.id="side-2",x.className="flip",x.style.display="inline-block",x.innerHTML=h[1](e)}u.GESTURES.forEach(function(e){m.addEventListener(e,function(e){e.stopPropagation()})}),u.KEYEVENTS.forEach(function(e){m.addEventListener(e,function(e){e.stopPropagation()})});var k=e.root.model_layer.overlay;if(w&&m.appendChild(w),x&&m.appendChild(x),k.appendChild(m),i._addInfoWindow(e,m,_),w){var O=w.querySelector(".info-window-btns > .flipable");O&&O.addEventListener("click",function(e){e.preventDefault(),x.className=l(x.className,"flip-side-1"),w.className=l(w.className,"flip-side-2")},!1);var P=w.querySelector(".info-window-btns > .closable");P&&P.addEventListener("click",function(r){r.preventDefault(),t.hide(e,n)},!1)}if(x){var A=x.querySelector(".info-window-btns > .flipable");A&&A.addEventListener("click",function(e){e.preventDefault(),x.className=l(x.className,"flip-side-1"),w.className=l(w.className,"flip-side-2")},!1);var E=x.querySelector(".info-window-btns > .closable");E&&E.addEventListener("click",function(r){r.preventDefault(),t.hide(e,n)},!1)}var j=w.offsetWidth,M=w.offsetHeight,S=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e.rootModel.target.getBoundingClientRect()),T=[];w&&T.push(w),x&&T.push(x);var C={x:y+g/2,y:v},R=e.transcoordS2C(C.x+j/2,C.y);if(R.x+S.left<S.right){if(M+20<R.y)return m.style.marginLeft=C.x-j/2+"px",m.style.marginTop=C.y-M-20+"px",void T.forEach(function(e){return e.className+=" arrow-bottom"});if(C={x:y+g/2,y:v+b},R=e.transcoordS2C(C.x+j/2,C.y+M+20),S.bottom>R.y+S.top)return m.style.marginLeft=C.x-j/2+"px",m.style.marginTop=C.y+20+"px",void T.forEach(function(e){return e.className+=" arrow-top"})}if(C={x:y,y:v+b/2},(R=e.transcoordS2C(C.x-j-20,C.y+M)).x>S.left)return m.style.marginLeft=C.x-j-20+"px",m.style.marginTop=C.y-M/2+"px",void T.forEach(function(e){return e.className+=" arrow-right"});C={x:y+g,y:v+b/2},m.style.marginLeft=C.x+20+"px",m.style.marginTop=C.y-M/2+"px",T.forEach(function(e){return e.className+=" arrow-left"})}}}else console.warn("InfoWindow Not Found.",n)}else console.warn("InfoWindow not defined.")}},{key:"image",get:function(){return t._image||(t._image=new Image,t._image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAY1BMVEVHcEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADIAbxiAAAAIHRSTlMA+gPshCwwWFzYCeLRm7QRG6rLeDZI9JOJJDtjb1HAf1sAT80AAAQQSURBVHhe7MCBAAAAAMKw/KkzOMG2BAAAAKeu3lUohIEggO7jQi5qHqpgwML5/6+0F0y02z31FlvMMLKt86QMQ1ined2Evih1hFFjLfRWjgzDOGZ6JSiM00B9EuHALtQxJLiQBmqSBCeSUEuEGzs1BDjSaHxWOKK5Eyz/4SoMV/hp4+vtcPkdwZD/udwevNg7t1xXYRiKmkB7C+ENlPLq8fxHeX+RGjWQ1D45ldcIulBIvCvYJGBEadyTzxAcfY57NBjpLScOO/bzugcTHe7IMwiSLMcdHZhocMcMgTLjjgZM7F1bCJZ2v27ARGzYDwIk2Z+JYGJ/iiwQLMv+JAEThjkmRG64Q0Q+gIiIiIiIiIiIyFy0KRFt0bOJZAWSUigmkQaJaXhENiRnYBEpkZySRSRGcmIWEaQnYhHRSI5mESmQnIJFZIqQmGhiEYEbEnPjGlEGjYTogW/WUkOXENENSqZfEXmDiIiIiIiIiIiIiIiIiIiImq5ETIpRpBpjJCMeKy6Ri0ZS9MQjkmkkJs1YRDokp2MRyZGclkUkQnIiEQltaX3Lzb6yiGTpl2y/avqSAxGgelCOKI+Kc2isL0TUSsZ4EREREREREREREREREREREfnIQzXrNWSRTeNxnlOwIgueIr6AAyE+CpiqMEUK71IDO4E+LluEKYKnKcMUifEsTZgiJZ5lDVNkwJPcqzBFoPF/HplfxL/w6b4EPGv1h18Weya1TL8iIiIeiIiIiIiIiEjkPefxV+5YA9PPHylB+u5aqgZ39H+jKOxrqtu+pkzvr9YbzoZ6w2OFkzcrA3yE4WZlSSyFk54VoA/wR43+FaD+r9w32QdWvgvjp2ty2xq8qHPHmtyPFxfrK3hw1ejERlAlfR/Ame2OTow05d4rOLLSlHtDVhI0uRO01JeZ405op6zgNNXT+bIRfpIgn+AkU4pOxBscohojdCHu4RRzjC5EYwVHqRONDkSnEvK/CB3QSU32IRW3ZPnj9iEVoGCNTLVrh8ia1x+6wq8xvB5mz8pxu7oPwIn9lcR0AiuX1+1KX+BXqdvXzWsAC0NsGjzZsS/2Bd6yRA5RgIHkXNhSD3whASZ8rrB9mItuEAizac0fDlHxDMEwpQfD1tW4y3Hjfy5s9nOHH3uwWA+EqEJBWCjoTL/S5toBB/7hu6zer74NgqSP39zJU+qQX3ix763mHTqvIVRUVprCljlElRkEjBqNYevH8veBJ2xhiyhE8YctmhDFH7ZoQhR/2KIJUfxhiyRE8YctmhDFH7ZoQhR/2OIJUfxhC9Ppf/t1jgJACERRsHGyYRZB0Ujvf0xD8w6kP7y6RZmgf/oTFTtbbzJVxZWo2Nlqw6TVy5GowNl6ssm7v50obamfSxQAAAAAAAsKLM15fb3vpQAAAABJRU5ErkJggg=="),t._image}}]),t}();t.default=f,o.default.register("info-window",f)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(35),a=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){return function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),o(n,[{key:"isHTMLElement",value:function(){return!0}},{key:"setElementProperties",value:function(e){throw new Error("Not Implemented Yet")}},{key:"createElement",value:function(){this.element=document.createElement(this.tagName),this.element&&(this.parent.isHTMLElement()?this.parent.element.appendChild(this.element):this.root.model_layer.overlay.appendChild(this.element),this.oncreate_element&&this.oncreate_element(this.element))}},{key:"reposition",value:function(){this.element&&(0,a.default)(this)}},{key:"disposeElement",value:function(){var e=this.element;e&&e.parentElement&&e.parentElement.removeChild(e),delete this.element}},{key:"ready",value:function(){!this.element&&this.createElement(),this.setElementProperties(this.element),this.reposition()}},{key:"added",value:function(){this.element&&(this.parent.isHTMLElement()?this.parent.element.appendChild(this.element):this.root.model_layer.overlay.appendChild(this.element),this.reposition())}},{key:"dispose",value:function(){this.disposeElement(this),function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0}(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"onchange",value:function(e,t){this.element&&this.setElementProperties(this.element),this.reposition()}},{key:"isDescendible",value:function(e){return e.isHTMLElement()}},{key:"element",get:function(){return this._element},set:function(e){this._element=e}},{key:"tagName",get:function(){return this.get("type")}},{key:"hasTextProperty",get:function(){return!0}},{key:"textHidden",get:function(){return!0}}]),n}()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hide=y,t.show=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},v=n.data,g=n.location,b=void 0===g?o:g,m=e.app.refProvider;m&&m.get(t,!0).then(function(t){var n=document.createElement("div");n.style.position="absolute",n.style.display="inline-block",n.innerHTML=l;var g=n.querySelector(".popup-content"),m=t.root.model,_=m.width,w=m.height;g.style.width=_+"px",g.style.height=w+"px";var x=document.createElement("style");x.type="text/css",x.styleSheet?x.styleSheet.cssText=f:x.appendChild(document.createTextNode(f)),n.appendChild(x),r.GESTURES.forEach(function(e){n.addEventListener(e,function(e){e.stopPropagation()})}),r.KEYEVENTS.forEach(function(e){n.addEventListener(e,function(e){e.stopPropagation()})});var k=e.root.model_layer.overlay;k.appendChild(n),function(e,t,n){d(e),p.set(e,{div:t,scene:n})}(e.root,n,t),n.querySelector(".closable").addEventListener("click",function(t){t.preventDefault(),y(e.root)},!1),t.target=g,t.data=v||e.data,t.fit("both");var O=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o,l=e.bounds,f=t.bounds,p=Math.max(l.width/4-f.width/2,h),d=Math.min(3*l.width/4+f.width/2,l.width-h)-f.width,y=Math.max(l.height/4-f.height/2,h),v=Math.min(3*l.height/4+f.height/2,l.height-h)-f.height;switch(r){case c:return{x:n.x<l.width/2?d:p,y:n.y<l.height/2?v:y};case i:return{x:p,y:y};case a:return{x:d,y:y};case u:return{x:p,y:v};case s:return{x:d,y:v};case o:default:return{x:(l.width-f.width)/2,y:(l.height-f.height)/2}}}(e.rootModel,t.root,e.center,b);n.style.left=O.x+"px",n.style.top=O.y+"px"},function(e){console.error("cannot fetch board: "+t,e)})};var r=n(2),o="center",i="left-top",a="right-top",u="left-bottom",s="right-bottom",c="auto",l='\n<div class="popup-content">\n</div>\n<button class="closable">&#88</button>\n',f="\nbutton.closable {\n  width: 20px;\n  height: 20px;\n  right: 0px;\n  top: 0px;\n  padding: 0;\n  margin: 0;\n  border: 0px;\n  text-align: center;\n  cursor: pointer;\n  font-size: 12px;\n  color: black;\n  position: absolute;\n  background-color: transparent;\n}\n\nbutton.closable:hover {\n  background-color:#60bb23;\n}\n",h=20,p=new WeakMap;function d(e){var t=p.get(e);if(t){var n=t.div.parentNode;n&&n.removeChild(t.div);var r=t.scene;r.target=null,r.release(),p.delete(e)}}function y(e){d(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params=Object.assign({},t)}return r(e,[{key:"excute",value:function(){}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,a.clone)(e.hierarchy);void 0!==t.id&&delete t.id;return(0,i.default)(t,e.app)};var r,o=n(79),i=(r=o)&&r.__esModule?r:{default:r},a=n(3)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(271)),i=u(n(74)),a=u(n(285));function u(e){return e&&e.__esModule?e:{default:e}}var s=new WeakSet,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._container=t,this.app=t.app,this._commander=new a.default(this._container),this.app.commander=this._commander,s.add(this)}return r(e,null,[{key:"residents",get:function(){return s}}]),r(e,[{key:"play",value:function(){o.play.apply(this._container,arguments)}},{key:"add",value:function(){return o.add.apply(this._container,arguments)}},{key:"duplicate",value:function(){return o.duplicate.apply(this._container,arguments)}},{key:"remove",value:function(){return o.remove.apply(this._container,arguments)}},{key:"animate",value:function(){return i.default.apply(this,arguments)}},{key:"fullscreen",value:function(){return o.fullscreen.apply(this._container,arguments)}},{key:"variable",value:function(e,t){return this._container.variable.apply(this._container,arguments)}},{key:"resize",value:function(){this._container.resize()}},{key:"dispose",value:function(){this._commander&&this._commander.dispose(),this._container&&this._container.dispose()}},{key:"select",value:function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return this._container.selected=(t=this.root).findAll.apply(t,[e].concat(r)),this.selected}},{key:"undo",value:function(){this.commander.undo()}},{key:"redo",value:function(){this.commander.redo()}},{key:"cut",value:function(){return o.cut.apply(this._container,arguments)}},{key:"copy",value:function(){return o.copy.apply(this._container,arguments)}},{key:"paste",value:function(){return o.paste.apply(this._container,arguments)}},{key:"undoableChange",value:function(){return o.undoableChange.apply(this._container,arguments)}},{key:"change",value:function(){return o.change.apply(this.root,arguments)}},{key:"findAll",value:function(){return this.root.findAll.apply(this.root,arguments)}},{key:"findFirst",value:function(){return this.root.findFirst.apply(this.root,arguments)}},{key:"findById",value:function(){return this._container.findById.apply(this._container,arguments)}},{key:"serialize",value:function(){return this.root.trim(),this.root.serialize.apply(this.root,arguments)}},{key:"align",value:function(){return o.align.apply(this._container,arguments)}},{key:"distribute",value:function(){return o.distribute.apply(this._container,arguments)}},{key:"zorder",value:function(){return o.zorder.apply(this._container,arguments)}},{key:"symmetryX",value:function(){return o.symmetryX.apply(this._container,arguments)}},{key:"symmetryY",value:function(){return o.symmetryY.apply(this._container,arguments)}},{key:"on",value:function(){return o.on.apply(this._container,arguments)}},{key:"once",value:function(){return o.once.apply(this._container,arguments)}},{key:"off",value:function(){return o.off.apply(this._container,arguments)}},{key:"toDataURL",value:function(){return o.toDataURL.apply(this._container,arguments)}},{key:"group",value:function(){return o.group.apply(this._container,arguments)}},{key:"ungroup",value:function(){return o.ungroup.apply(this._container,arguments)}},{key:"fit",value:function(e){var t=this;this._container.once("redraw",function(){return t._container.fit(e)}),this._container.invalidate()}},{key:"target",get:function(){return this._container.target_element},set:function(e){var t;if("string"==typeof e){if(!(t=document.getElementById(e)))throw"target element '"+e+"' is not exist";if(t.firstChild)throw"target element '"+e+"' already has children"}else t=e;t&&t.style&&(t.style.cursor="default"),this._container.target_element=t,this._container.invalidate()}},{key:"scale",get:function(){return this.root.get("scale")},set:function(e){this.root.set("scale",e)}},{key:"translate",get:function(){return this.root.get("translate")},set:function(e){this.root.set("translate",e)}},{key:"unit",get:function(){return this.root.get("unit")||"px"}},{key:"PPM",get:function(){return this.app.PPM}},{key:"PPI",get:function(){return this.app.PPI}},{key:"DPPX",get:function(){return this.app.DPPX}},{key:"unitScale",get:function(){return this._container.unitScale}},{key:"screen",get:function(){return this.app.screen},set:function(e){this.app.screen=e,this._container.resize()}},{key:"selected",get:function(){return this._container.selected.slice()}},{key:"commander",get:function(){return this._commander}},{key:"model",get:function(){return this.root.hierarchy},set:function(e){this._container.rebuildContentModel(e)}},{key:"root",get:function(){return this._container.model_layer}},{key:"mode",get:function(){return this.app.mode},set:function(e){void 0!==e&&(this.app.mode=e)}},{key:"ids",get:function(){return o.getIds.apply(this._container)}},{key:"data",set:function(e){this._container.data=e},get:function(){return this._container.data}},{key:"variables",get:function(){return o.getVariables.apply(this._container)},set:function(e){o.setVariables.apply(this._container,[e])}}]),e}();t.default=c},function(e,t,n){"use strict";(function(r){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(91));t.default=o,"undefined"!=typeof window&&(window.scene=o),void 0!==r&&(r.scene=o),t.default=o,e.exports=t.default}).call(t,n(30))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FPS=t.version=t.license=t.Scene=t.ScriptLoader=t.ReferenceMap=t.EventMap=t.Layer=t.Model=t.create=t.config=t.polyfill=void 0;var r=n(92);Object.defineProperty(t,"polyfill",{enumerable:!0,get:function(){return m(r).default}});var o=n(41);Object.defineProperty(t,"config",{enumerable:!0,get:function(){return o.config}});var i=n(93);Object.defineProperty(t,"create",{enumerable:!0,get:function(){return m(i).default}});var a=n(14);Object.defineProperty(t,"Layer",{enumerable:!0,get:function(){return m(a).default}});var u=n(29);Object.defineProperty(t,"EventMap",{enumerable:!0,get:function(){return m(u).default}});var s=n(2);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var c=n(80);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})});var l=n(36);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})});var f=n(288);Object.defineProperty(t,"ReferenceMap",{enumerable:!0,get:function(){return m(f).default}});var h=n(289);Object.defineProperty(t,"ScriptLoader",{enumerable:!0,get:function(){return m(h).default}});var p=n(1);Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}})});var d=n(89);Object.defineProperty(t,"Scene",{enumerable:!0,get:function(){return m(d).default}});var y=n(38);Object.defineProperty(t,"license",{enumerable:!0,get:function(){return y.license}});var v=n(290);Object.defineProperty(t,"version",{enumerable:!0,get:function(){return m(v).default}});var g=n(291);Object.defineProperty(t,"FPS",{enumerable:!0,get:function(){return m(g).default}});var b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(17));function m(e){return e&&e.__esModule?e:{default:e}}t.Model=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.default="done","function"!=typeof Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t}),"function"!=typeof Object.values&&(Object.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t}),"function"!=typeof Object.keys&&(Object.values=function(e){var t=[];for(var n in e)t.push(n);return t}),"undefined"!=typeof CanvasRenderingContext2D&&void 0==CanvasRenderingContext2D.prototype.ellipse&&(CanvasRenderingContext2D.prototype.ellipse=function(e,t,n,r,o,i,a,u){this.save(),this.translate(e,t),this.rotate(o),this.translate(-n,-r),this.scale(n,r),this.arc(1,1,1,i,a,u),this.restore()}),function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(console.warn("requestAnimationFrame not supported"),window.requestAnimationFrame=function(t,n){var r=performance.now(),o=Math.max(0,33-(r-e)),i=window.setTimeout(function(){t(r+o)},o);return e=r+o,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e});var i=i||function(){function e(){o(this,e)}return r(e,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"has",value:function(){}},{key:"delete",value:function(){}}]),e}(),a=a||function(){function e(){o(this,e)}return r(e,[{key:"add",value:function(){}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.target,n=e.model,u=e.style,s=e.layers,c=void 0===s?[]:s,l=e.handlers,f=void 0===l?[]:l,h=e.mode,p=void 0===h?i.MODE_VIEW:h,d=e.refProvider,y=null;if("string"==typeof t){if(!(y=document.getElementById(t)))throw"target element '"+t+"' is not exist";if(y.firstChild)throw"target element '"+t+"' is not empty"}else y=t;y&&y.style&&(y.style.cursor="default",y.style.overflow="hidden");return new a.default(new r.default({target_element:y,model:n,style:u,layers:c,handlers:f},new o.default(p,d)))};var r=u(n(42)),o=u(n(270)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2)),a=u(n(89));function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";var r=n(95);e.exports=function(e,t){return r(e,t)}},function(e,t,n){"use strict";var r=n(96),o=n(12);e.exports=function e(t,n,i,a,u){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,i,a,e,u))}},function(e,t,n){"use strict";var r=n(97),o=n(47),i=n(131),a=n(135),u=n(56),s=n(19),c=n(32),l=n(33),f=1,h="[object Arguments]",p="[object Array]",d="[object Object]",y=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,g,b){var m=s(e),_=s(t),w=m?p:u(e),x=_?p:u(t),k=(w=w==h?d:w)==d,O=(x=x==h?d:x)==d,P=w==x;if(P&&c(e)){if(!c(t))return!1;m=!0,k=!1}if(P&&!k)return b||(b=new r),m||l(e)?o(e,t,n,v,g,b):i(e,t,w,n,v,g,b);if(!(n&f)){var A=k&&y.call(e,"__wrapped__"),E=O&&y.call(t,"__wrapped__");if(A||E){var j=A?e.value():e,M=E?t.value():t;return b||(b=new r),g(j,M,n,v,b)}}return!!P&&(b||(b=new r),a(e,t,n,v,g,b))}},function(e,t,n){"use strict";var r=n(21),o=n(103),i=n(104),a=n(105),u=n(106),s=n(107);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=u,c.prototype.set=s,e.exports=c},function(e,t,n){"use strict";e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){"use strict";var r=n(22),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))}},function(e,t,n){"use strict";var r=n(22);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){"use strict";var r=n(22);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){"use strict";var r=n(22);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},function(e,t,n){"use strict";var r=n(21);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t,n){"use strict";e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t,n){"use strict";e.exports=function(e){return this.__data__.get(e)}},function(e,t,n){"use strict";e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){"use strict";var r=n(21),o=n(31),i=n(46),a=200;e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var u=n.__data__;if(!o||u.length<a-1)return u.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(u)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){"use strict";var r=n(43),o=n(111),i=n(11),a=n(45),u=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,l=s.toString,f=c.hasOwnProperty,h=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(r(e)?h:u).test(a(e))}},function(e,t,n){"use strict";var r=n(23),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[u]=n:delete e[u]),o}},function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t,n){"use strict";var r,o=n(112),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!i&&i in e}},function(e,t,n){"use strict";var r=n(6)["__core-js_shared__"];e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){"use strict";var r=n(115),o=n(21),i=n(31);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(e,t,n){"use strict";var r=n(116),o=n(117),i=n(118),a=n(119),u=n(120);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,e.exports=s},function(e,t,n){"use strict";var r=n(24);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t,n){"use strict";e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){"use strict";var r=n(24),o="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return n===o?void 0:n}return i.call(t,e)?t[e]:void 0}},function(e,t,n){"use strict";var r=n(24),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},function(e,t,n){"use strict";var r=n(24),o="__lodash_hash_undefined__";e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?o:t,this}},function(e,t,n){"use strict";var r=n(25);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){var t=void 0===e?"undefined":r(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){"use strict";var r=n(25);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){"use strict";var r=n(25);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){"use strict";var r=n(25);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},function(e,t,n){"use strict";var r=n(46),o=n(127),i=n(128);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},function(e,t,n){"use strict";var r="__lodash_hash_undefined__";e.exports=function(e){return this.__data__.set(e,r),this}},function(e,t,n){"use strict";e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){"use strict";e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t,n){"use strict";e.exports=function(e,t){return e.has(t)}},function(e,t,n){"use strict";var r=n(23),o=n(132),i=n(18),a=n(47),u=n(133),s=n(134),c=1,l=2,f="[object Boolean]",h="[object Date]",p="[object Error]",d="[object Map]",y="[object Number]",v="[object RegExp]",g="[object Set]",b="[object String]",m="[object Symbol]",_="[object ArrayBuffer]",w="[object DataView]",x=r?r.prototype:void 0,k=x?x.valueOf:void 0;e.exports=function(e,t,n,r,x,O,P){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _:return!(e.byteLength!=t.byteLength||!O(new o(e),new o(t)));case f:case h:case y:return i(+e,+t);case p:return e.name==t.name&&e.message==t.message;case v:case b:return e==t+"";case d:var A=u;case g:var E=r&c;if(A||(A=s),e.size!=t.size&&!E)return!1;var j=P.get(e);if(j)return j==t;r|=l,P.set(e,t);var M=a(A(e),A(t),r,x,O,P);return P.delete(e),M;case m:if(k)return k.call(e)==k.call(t)}return!1}},function(e,t,n){"use strict";var r=n(6).Uint8Array;e.exports=r},function(e,t,n){"use strict";e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},function(e,t,n){"use strict";e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},function(e,t,n){"use strict";var r=n(136),o=1,i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,u,s){var c=n&o,l=r(e),f=l.length;if(f!=r(t).length&&!c)return!1;for(var h=f;h--;){var p=l[h];if(!(c?p in t:i.call(t,p)))return!1}var d=s.get(e);if(d&&s.get(t))return d==t;var y=!0;s.set(e,t),s.set(t,e);for(var v=c;++h<f;){var g=e[p=l[h]],b=t[p];if(a)var m=c?a(b,g,p,t,e,s):a(g,b,p,e,t,s);if(!(void 0===m?g===b||u(g,b,n,a,s):m)){y=!1;break}v||(v="constructor"==p)}if(y&&!v){var _=e.constructor,w=t.constructor;_!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w)&&(y=!1)}return s.delete(e),s.delete(t),y}},function(e,t,n){"use strict";var r=n(137),o=n(139),i=n(48);e.exports=function(e){return r(e,i,o)}},function(e,t,n){"use strict";var r=n(138),o=n(19);e.exports=function(e,t,n){var i=t(e);return o(e)?i:r(i,n(e))}},function(e,t,n){"use strict";e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},function(e,t,n){"use strict";var r=n(140),o=n(141),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(e){return null==e?[]:(e=Object(e),r(a(e),function(t){return i.call(e,t)}))}:o;e.exports=u},function(e,t,n){"use strict";e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}},function(e,t,n){"use strict";e.exports=function(){return[]}},function(e,t,n){"use strict";e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){"use strict";var r=n(10),o=n(12),i="[object Arguments]";e.exports=function(e){return o(e)&&r(e)==i}},function(e,t,n){"use strict";e.exports=function(){return!1}},function(e,t,n){"use strict";var r=n(10),o=n(53),i=n(12),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[r(e)]}},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){"use strict";(function(e){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(44),i="object"==r(t)&&t&&!t.nodeType&&t,a=i&&"object"==r(e)&&e&&!e.nodeType&&e,u=a&&a.exports===i&&o.process,s=function(){try{return u&&u.binding&&u.binding("util")}catch(e){}}();e.exports=s}).call(t,n(51)(e))},function(e,t,n){"use strict";var r=n(55)(Object.keys,Object);e.exports=r},function(e,t,n){"use strict";var r=n(9)(n(6),"DataView");e.exports=r},function(e,t,n){"use strict";var r=n(9)(n(6),"Promise");e.exports=r},function(e,t,n){"use strict";var r=n(9)(n(6),"Set");e.exports=r},function(e,t,n){"use strict";var r=n(9)(n(6),"WeakMap");e.exports=r},function(e,t,n){"use strict";var r=n(154),o=n(166),i=n(169),a=n(170),u=n(171),s=n(63),c=n(62),l=n(48),f=n(65),h=n(172),p=n(66),d=/\b__p \+= '';/g,y=/\b(__p \+=) '' \+/g,v=/(__e\(.*?\)|\b__t\)) \+\n'';/g,g=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,b=/($^)/,m=/['\n\r\u2028\u2029\\]/g;e.exports=function(e,t,n){var _=h.imports._.templateSettings||h;n&&c(e,t,n)&&(t=void 0),e=p(e),t=r({},t,_,a);var w,x,k=r({},t.imports,_.imports,a),O=l(k),P=i(k,O),A=0,E=t.interpolate||b,j="__p += '",M=RegExp((t.escape||b).source+"|"+E.source+"|"+(E===f?g:b).source+"|"+(t.evaluate||b).source+"|$","g"),S="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";e.replace(M,function(t,n,r,o,i,a){return r||(r=o),j+=e.slice(A,a).replace(m,u),n&&(w=!0,j+="' +\n__e("+n+") +\n'"),i&&(x=!0,j+="';\n"+i+";\n__p += '"),r&&(j+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),A=a+t.length,t}),j+="';\n";var T=t.variable;T||(j="with (obj) {\n"+j+"\n}\n"),j=(x?j.replace(d,""):j).replace(y,"$1").replace(v,"$1;"),j="function("+(T||"obj")+") {\n"+(T?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(w?", __e = _.escape":"")+(x?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+j+"return __p\n}";var C=o(function(){return Function(O,S+"return "+j).apply(void 0,P)});if(C.source=j,s(C))throw C;return C}},function(e,t,n){"use strict";var r=n(155),o=n(157),i=n(163),a=o(function(e,t,n,o){r(t,i(t),e,o)});e.exports=a},function(e,t,n){"use strict";var r=n(156),o=n(57);e.exports=function(e,t,n,i){var a=!n;n||(n={});for(var u=-1,s=t.length;++u<s;){var c=t[u],l=i?i(n[c],e[c],c,n,e):void 0;void 0===l&&(l=e[c]),a?o(n,c,l):r(n,c,l)}return n}},function(e,t,n){"use strict";var r=n(57),o=n(18),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];i.call(e,t)&&o(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){"use strict";var r=n(59),o=n(62);e.exports=function(e){return r(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,u=i>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,u&&o(n[0],n[1],u)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t})}},function(e,t,n){"use strict";var r=n(61),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,u=o(i.length-t,0),s=Array(u);++a<u;)s[a]=i[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=i[a];return c[t]=n(s),r(e,this,c)}}},function(e,t,n){"use strict";var r=n(160),o=n(162)(r);e.exports=o},function(e,t,n){"use strict";var r=n(161),o=n(58),i=n(60),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=a},function(e,t,n){"use strict";e.exports=function(e){return function(){return e}}},function(e,t,n){"use strict";var r=800,o=16,i=Date.now;e.exports=function(e){var t=0,n=0;return function(){var a=i(),u=o-(a-n);if(n=a,u>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){"use strict";var r=n(49),o=n(164),i=n(26);e.exports=function(e){return i(e)?r(e,!0):o(e)}},function(e,t,n){"use strict";var r=n(11),o=n(34),i=n(165),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=o(e),n=[];for(var u in e)("constructor"!=u||!t&&a.call(e,u))&&n.push(u);return n}},function(e,t,n){"use strict";e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){"use strict";var r=n(61),o=n(59),i=n(63),a=o(function(e,t){try{return r(e,void 0,t)}catch(e){return i(e)?e:new Error(e)}});e.exports=a},function(e,t,n){"use strict";var r=n(10),o=n(168),i=n(12),a="[object Object]",u=Function.prototype,s=Object.prototype,c=u.toString,l=s.hasOwnProperty,f=c.call(Object);e.exports=function(e){if(!i(e)||r(e)!=a)return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}},function(e,t,n){"use strict";var r=n(55)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){"use strict";var r=n(64);e.exports=function(e,t){return r(t,function(t){return e[t]})}},function(e,t,n){"use strict";var r=n(18),o=Object.prototype,i=o.hasOwnProperty;e.exports=function(e,t,n,a){return void 0===e||r(e,o[n])&&!i.call(a,n)?t:e}},function(e,t,n){"use strict";var r={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};e.exports=function(e){return"\\"+r[e]}},function(e,t,n){"use strict";var r=n(173),o={escape:n(177),evaluate:n(178),interpolate:n(65),variable:"",imports:{_:{escape:r}}};e.exports=o},function(e,t,n){"use strict";var r=n(174),o=n(66),i=/[&<>"']/g,a=RegExp(i.source);e.exports=function(e){return(e=o(e))&&a.test(e)?e.replace(i,r):e}},function(e,t,n){"use strict";var r=n(175)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},function(e,t,n){"use strict";var r=n(23),o=n(64),i=n(19),a=n(67),u=1/0,s=r?r.prototype:void 0,c=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(a(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-u?"-0":n}},function(e,t,n){"use strict";e.exports=/<%-([\s\S]+?)%>/g},function(e,t,n){"use strict";e.exports=/<%([\s\S]+?)%>/g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(3)),i=n(187);var a=/\s+/;function u(e,t,n,o){if(!n)return!0;if("object"==(void 0===n?"undefined":r(n))){for(var i in n){var u=n[i];e[t].apply(e,[i,u])}return!1}return!a.test(n)||(n.split(a).forEach(function(n){return e[t].apply(e,[n].concat(o))}),!1)}var s=["on","off","once","delegate_on","delegate_off","trigger","listenTo"],c={withEvent:function(){var e=this;s.forEach(function(t){return e[t]=c[t]})},on:function(e,t,n){return u(this,"on",e,[t,n])&&t?(this._listeners||(this._listeners={}),(this._listeners[e]||(this._listeners[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,n){if(!u(this,"once",e,[t,n])||!t)return this;var r=this,i=o.once(function(){r.off(e,i),t.apply(r,arguments)});i._callback=t,this.on(e,i,n)},off:function(e,t,n){if(!this._listeners||!u(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._listeners=void 0,this;var r;r=e?[e]:Object.keys(this._listeners);for(var o=0;o<r.length;o++){var i=r[o],a=this._listeners[i];if(a){var s=[];if(this._listeners[i]=s,t||n)for(var c=0;c<a.length;c++){var l=a[c];(t&&t!==l.callback&&t!==l.callback._callback||n&&n!==l.context)&&s.push(l)}s.length||delete this._listeners[i]}}return this},delegate_on:function(e){return this._delegators||(this._delegators=new i.List),this._delegators.append(e),this},delegate_off:function(e){return this._delegators?(this._delegators.remove(e),this):this},delegate:function(){if(this._delegators&&this._delegators.size()>0&&f(this._delegators,arguments),!this._listeners)return this;var e=arguments.length-1,t=arguments[e];arguments[e]={origin:t.origin,name:t.name,deliverer:this};var n=this._listeners[t.name],r=this._listeners["(all)"];return n&&l(n,arguments),r&&l(r,arguments),this},trigger:function(e){var t=[].slice.call(arguments,1);if(t.push({origin:this,name:e,deliverer:this}),this._delegators&&this._delegators.size()>0&&f(this._delegators,t),!this._listeners)return this;if(!u(this,"trigger",e,t))return this;var n=this._listeners[e],r=this._listeners["(all)"];return n&&l(n,t),r&&l(r,t),this},stopListening:function(e,t,n){var i=this._listeningTo;if(!i)return this;var a=!t&&!n;for(var u in n||"object"!=(void 0===t?"undefined":r(t))||(n=this),e&&((i={})[e._listenId]=e),i){var s=i[u];s.off(t,n,this),(a||o.isEmpty(s._events))&&delete this._listeningTo[u]}return this}};function l(e,t){e.forEach(function(e){return e.callback.apply(e.ctx,t)})}function f(e,t){e.forEach(function(e){return c.delegate.apply(e,t)})}var h={listenTo:"on",listenToOnce:"once"};for(var p in h){var d=h[p];c[p]=function(e,t,n){this._listeningTo||(this._listeningTo={});var i=this._listeningTo;return e._listenId||(e._listenId=o.uniqueId("l")),i[e._listenId]=e,n||"object"!=(void 0===t?"undefined":r(t))||(n=this),e[d](t,n,this),this}}t.default=c},function(e,t,n){"use strict";var r=n(6);e.exports=function(){return r.Date.now()}},function(e,t,n){"use strict";var r=n(68),o=n(11),i="Expected a function";e.exports=function(e,t,n){var a=!0,u=!0;if("function"!=typeof e)throw new TypeError(i);return o(n)&&(a="leading"in n?!!n.leading:a,u="trailing"in n?!!n.trailing:u),r(e,t,{leading:a,maxWait:t,trailing:u})}},function(e,t,n){"use strict";var r=n(183);e.exports=function(e){return r(2,e)}},function(e,t,n){"use strict";var r=n(184),o="Expected a function";e.exports=function(e,t){var n;if("function"!=typeof t)throw new TypeError(o);return e=r(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}},function(e,t,n){"use strict";var r=n(185);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},function(e,t,n){"use strict";var r=n(69),o=1/0,i=1.7976931348623157e308;e.exports=function(e){return e?(e=r(e))===o||e===-o?(e<0?-1:1)*i:e==e?e:0:0===e?e:0}},function(e,t,n){"use strict";var r=n(54),o=n(56),i=n(50),a=n(19),u=n(26),s=n(32),c=n(34),l=n(33),f="[object Map]",h="[object Set]",p=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(u(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||s(e)||l(e)||i(e)))return!e.length;var t=o(e);if(t==f||t==h)return!e.size;if(c(e))return!r(e).length;for(var n in e)if(p.call(e,n))return!1;return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Stack=t.List=void 0,t.withList=function(){for(var e in r)this[e]=r[e]},t.withStack=function(){for(var e in r)this[e]=r[e]};var r=i(n(188)),o=i(n(189));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=t.List=function e(){a(this,e)},s=t.Stack=function e(){a(this,e)};u.prototype=r,s.prototype=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.insertAt=function(e,t){if(!this.__collection__)return this;-1==(e=this.__collection__.indexOf(t))&&this.__collection__.splice(e,0,t);return this},t.append=function(e){this.__collection__||(this.__collection__=[]);-1==this.__collection__.indexOf(e)&&this.__collection__.push(e);return this},t.prepend=function(e){this.__collection__||(this.__collection__=[]);-1==this.__collection__.indexOf(e)&&this.__collection__.unshift(e);return this},t.remove=function(e){if(!this.__collection__)return this;var t=this.__collection__.indexOf(e);t>=0&&this.__collection__.splice(t,1);return this},t.getAt=function(e){if(this.__collection__)return this.__collection__[e]},t.forEach=function(e,t){this.__collection__&&this.__collection__.forEach(e,t)},t.indexOf=function(e){if(this.__collection__)return this.__collection__.indexOf(e)},t.size=function(){return this.__collection__?this.__collection__.length:0},t.clear=function(){this.__collection__=[]},t.moveForward=function(e){var t=this.indexOf(e);if(-1==t||0==t)return;this.__collection__[t]=this.__collection__[t-1],this.__collection__[t-1]=e},t.moveBackward=function(e){var t=this.indexOf(e);if(-1==t||t==this.size()-1)return;this.__collection__[t]=this.__collection__[t+1],this.__collection__[t+1]=e},t.moveToHead=function(e){var t=this.indexOf(e);if(-1==t||0==t)return;var n=this.__collection__.splice(0,t),r=this.__collection__.splice(1);this.__collection__=this.__collection__.concat(n,r)},t.moveToTail=function(e){var t=this.indexOf(e);if(-1==t||t==this.size()-1)return;var n=this.__collection__.splice(0,t),r=this.__collection__.splice(1);this.__collection__=n.concat(r,this.__collection__)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.push=function(e){throw new Error("Not Implemented Yet")},t.pop=function(e){throw new Error("Not Implemented Yet")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(191);Object.defineProperty(t,"compile",{enumerable:!0,get:function(){return(e=r,e&&e.__esModule?e:{default:e}).default;var e}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=l[t.type];return n?new n(e,t):null};var r=c(n(192)),o=c(n(193)),i=c(n(194)),a=c(n(195)),u=c(n(196)),s=c(n(197));function c(e){return e&&e.__esModule?e:{default:e}}var l={rotation:r.default,vibration:o.default,heartbeat:i.default,moving:a.default,outline:u.default,fade:s.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(16),a=(r=i)&&r.__esModule?r:{default:r};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),o(t,[{key:"step",value:function(e){var t=this.config.theta,n=void 0===t?6.28:t;this.client.delta("theta",e*n)}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(16),a=(r=i)&&r.__esModule?r:{default:r};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),o(t,[{key:"step",value:function(e){var t=this.config.theta,n=void 0===t?.2617993877991494:t,r=4*n,o=e*r;e<.25?o*=-1:e<.75?o-=2*n:o=r-o,this.client.delta("theta",o)}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(16),a=(r=i)&&r.__esModule?r:{default:r};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),o(t,[{key:"step",value:function(e){var t,n=this.config.scale,r=2*((void 0===n?1.3:n)-1);t=e<.5?1+r*e:1+(1-e)*r,this.client.delta("sx",t),this.client.delta("sy",t)}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(16),a=(r=i)&&r.__esModule?r:{default:r};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),o(t,[{key:"step",value:function(e){var t=this.config,n=t.x,r=void 0===n?0:n,o=t.y,i=void 0===o?0:o;this.client.delta("tx",e*r),this.client.delta("ty",e*i)}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(16),a=(r=i)&&r.__esModule?r:{default:r};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),o(t,[{key:"step",value:function(e){var t=this.config.rideOn,n=this.client;if(t&&n&&n.root){var r=n.center,o=n.root.findById(t);if(o){var i=o.outline(e);r=n.transcoordS2T(r.x,r.y);o&&(n.delta("tx",i.x-r.x),n.delta("ty",i.y-r.y))}}}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(16),a=(r=i)&&r.__esModule?r:{default:r};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),o(t,[{key:"step",value:function(e){var t,n=this.config,r=n.startAlpha,o=void 0===r?1:r,i=n.endAlpha,a=void 0===i?0:i,u=o>a?a:o,s=2*((o<a?a:o)-u);t=e<.5?1-(u+e*s):1-(u+(1-e)*s),this.client.delta("fade",t)}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=a[n.type];if(!r)return;r(e,t,n)};var r=i(n(199)),o=i(n(72));function i(e){return e&&e.__esModule?e:{default:e}}var a={gradation:r.default,shadow:o.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){n.type;var r=n.subType,o=n.from,i=n.to,a=n.colors;switch(r){case"linear":var u=t.createLinearGradient(o.x,o.y,i.x,i.y);break;case"radial":var u=t.createRadialGradient(o.x,o.y,o.r,i.x,i.y,i.r);break;default:var u=t.createLinearGradient(o.x,o.y,i.x,i.y)}a&&(a.forEach(function(e){u.addColorStop(e.endPoint,e.color)}),t.fillStyle=u,t.fill())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,r,o;return e.forEach(function(e){void 0===t?(t=e.left,n=e.top,r=e.left+e.width,o=e.top+e.height):(t=Math.min(e.left,t),n=Math.min(e.top,n),r=Math.max(e.left+e.width,r),o=Math.max(e.top+e.height,o))}),{left:t,top:n,width:r-t,height:o-n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.drawFill=function(e,t,n,o,a){var u=o.alpha,s=void 0===u?1:u,c=a.fillStyle;if(e.globalAlpha*=s,!c)return;if("string"==typeof c)e.fillStyle=c,e.fill();else if("object"==(void 0===c?"undefined":r(c)))if("gradient"==c.type){e.translate(n.x,n.y);var l=void 0,f=t.width,h=t.height;if("linear"==c.gradientType){var p=3.141592653589793,d=c.rotation;if(d>=.436332&&d<=1.13446||d>=2.00713&&d<=2.70526||d>=3.57792&&d<=4.27606||d>=5.14872&&d<=5.84685){var y=Math.sqrt(Math.pow((f-4)/2,2)+Math.pow((h-4)/2,2));y-=y-(f+h)/3,l=e.createLinearGradient(y*Math.cos(d+p),y*Math.sin(d+p),y*Math.cos(d),y*Math.sin(d))}else l=e.createLinearGradient((f-4)/2*Math.cos(d+p),(h-4)/2*Math.sin(d+p),(f-4)/2*Math.cos(d),(h-4)/2*Math.sin(d))}else if("radial"==c.gradientType){var v=.95*Math.sqrt(Math.pow((f-4)/2,2)+Math.pow((h-4)/2,2));switch(c.center){case"center":l=e.createRadialGradient(0,0,0,0,0,v);break;case"left-top":l=e.createRadialGradient(-f/2,-h/2,0,-f/2,-h/2,2*v);break;case"right-top":l=e.createRadialGradient(f/2,-h/2,0,f/2,-h/2,2*v);break;case"left-bottom":l=e.createRadialGradient(-f/2,h/2,0,-f/2,h/2,2*v);break;case"right-bottom":l=e.createRadialGradient(f/2,h/2,0,f/2,h/2,2*v);break;default:l=e.createRadialGradient(0,0,0,0,0,v)}}c.colorStops.forEach(function(e){if(e.position>=0&&e.position<=1)try{l.addColorStop(e.position,e.color)}catch(t){(0,i.warn)("Invalid Color for colorstop : ",e.color),l.addColorStop(e.position,"#fff")}}),e.fillStyle=l,e.fill(),e.translate(-n.x,-n.y)}else if("pattern"==c.type&&c.image){a.prepareFillIf(!a._pattern_image_origin);var g=a._pattern_image;if(!g)return;var b=0,m=0,_=0,w=0,x=t.left,k=t.top;if(!c.fitPattern){switch(b=c.offsetX,m=c.offsetY,c.align){case"center":_=t.width/2-(c.width?c.width/2:0),w=t.height/2+(c.height?c.height/2:0);break;case"left-top":break;case"left-bottom":w=c.height?t.height%c.height:t.height;break;case"right-top":_=c.width?t.width%c.width:t.width;break;case"right-bottom":_=c.width?t.width%c.width:t.width,w=c.height?t.height%c.height:t.height;break;case"left":w=t.height/2+(c.height?c.height/2:0);break;case"right":_=c.width?t.width%c.width:t.width,w=t.height/2+(c.height?c.height/2:0);break;case"top":_=t.width/2-(c.width?c.width/2:0);break;case"bottom":_=t.width/2-(c.width?c.width/2:0),w=c.height?t.height%c.height:t.height}x+=b+_,k+=m+w}e.translate(x,k),c.fitPattern?Math.abs((g.width-t.width)*(g.height-t.height))>1?(delete a._pattern_image,delete a._pattern_image_origin):e.fillStyle=e.createPattern(g,"no-repeat"):e.fillStyle=e.createPattern(g,"repeat"),e.fill(),e.translate(-x,-k)}},t.prepareFill=function(e,t){var n=this.fillStyle;if(!n||"pattern"!=n.type||!n.image)return void e(this);if("string"!=typeof n.image)return this._pattern_image_origin=this._pattern_image=n.image,void e(this);this._pattern_image=null,this._pattern_image_origin=new Image;var r=this;this._pattern_image_origin.onload=function(){if(!n.fitPattern&&!n.width&&!n.height)return r._pattern_image=r._pattern_image_origin,void e(this);var t=n.width||this.width,i=n.height||this.height;n.fitPattern&&(t=r.bounds.width,i=r.bounds.height);var a=(0,o.createCanvas)(t,i),u=a.getContext("2d");u.drawImage(this,0,0,this.width,this.height,0,0,t,i),r._pattern_image=a,e(this)},this._pattern_image_origin.onerror=function(e){t(e)};try{"data"!==String(n.image).substring(0,4)?this._pattern_image_origin.crossOrigin="use-credentials":this._pattern_image_origin.crossOrigin=null,this._pattern_image_origin.src=this.app.url(n.image)}catch(e){t(e)}},t.prepareFillIf=function(e){var t=this;if(!e)return;this.prepareFill(function(e){t.invalidate()},function(e){(0,i.error)(e)})},t.onchangeFill=function(e,t){var n=this.fillStyle;if("pattern"!==n.type)return void(this._pattern_image&&(this._pattern_image=null,this._pattern_image_origin=null));this.prepareFillIf(n.image)};var o=n(75),i=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ondropfile=function(e,t){for(var n=0;n<e.length;n++)if(e[n].type.startsWith("image/"))return void this.set("fillStyle",{type:"pattern",image:t[n],fitPattern:!0})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.path.slice();if(!n||!n.length)return void(0,r.error)("path should not be empty");var o=1,i=[];e.isLine()||n.push(n[0]);if(t<=0)return e.transcoordS2T(n[0].x,n[0].y);if(t>=1)return e.transcoordS2T(n[n.length-1].x,n[n.length-1].y);for(;n[o];){var a=n[o-1],u=n[o],s=u.x-a.x,c=u.y-a.y;i.push(Math.sqrt(s*s+c*c)),o++}var l=i.reduce(function(e,t){return e+t},0);o=0;var f=0;do{f+=i[o++]}while(f/l<t);f-=i[--o],t=(t-f/l)*(l/i[o]);var h=n[o%n.length],p=n[(o+1)%n.length],d=h.x+Math.round((p.x-h.x)*t),y=h.y+Math.round((p.y-h.y)*t);return e.transcoordS2T(d,y)};var r=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=t.strokeStyle,o=t.lineDash,i=t.lineWidth,a=t.lineCap,u=t.lineJoin,s=t.alpha;if(!r||0==i)return;a&&(e.lineCap=a);if(o){var c="round"==a;switch(o){case"solid":o=[0,0];break;case"round-dot":o=c?[0,2*i]:[i,i];break;case"square-dot":o=c?[i,2*i]:[2*i,i];break;case"dash":o=c?[3*i,2.5*i]:[4*i,1.5*i];break;case"dash-dot":o=c?[3*i,3*i,0,3*i]:[4*i,2*i,i,2*i];break;case"long-dash":o=c?[5*i,4*i]:[6*i,3*i];break;case"long-dash-dot":o=c?[5*i,3*i,0,3*i]:[6*i,2*i,i,2*i];break;case"long-dash-dot-dot":o=c?[5*i,2*i,0,2*i,0,2*i]:[6*i,i,i,i,i,i]}e.setLineDash(o)}e.globalAlpha*=s,e.strokeStyle=r,e.lineWidth=i,e.lineJoin=u,e.stroke()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;if(!this._model.effects)return;this._model.effects.forEach(function(n){t.effect(e,n)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e||isNaN(+t))return t;var n,r,o,i,a,u,s,c,l,f,h=e.length,p=e.search(/[0-9\-\+#]/),d=p>0?e.substring(0,p):"",y=e.split("").reverse().join(""),v=y.search(/[0-9\-\+#]/),g=h-v,b=e.substring(g,g+1),m=g+("."===b||","===b?1:0),_=v>0?e.substring(m,h):"";e=e.substring(p,m),t="-"===e.charAt(0)?-t:+t,n=t<0?t=-t:0,r=e.match(/[^\d\-\+#]/g),".",o=r&&r[1]&&r[0]||",",e=e.split("."),t=+(t=t.toFixed(e[1]&&e[1].length))+"",a=e[1]&&e[1].lastIndexOf("0"),(!(s=t.split("."))[1]||s[1]&&s[1].length<=a)&&(t=(+t).toFixed(a+1));if(c=e[0].split(o),e[0]=c.join(""),(i=e[0]&&e[0].indexOf("0"))>-1)for(;s[0].length<e[0].length-i;)s[0]="0"+s[0];else 0==+s[0]&&(s[0]="");if((t=t.split("."))[0]=s[0],u=c[1]&&c[c.length-1].length){for(l=t[0],y="",g=l.length%u,h=l.length,m=0;m<h;m++)y+=l.charAt(m),!((m-g+1)%u)&&m<h-u&&(y+=o);t[0]=y}t[1]=e[1]&&t[1]?"."+t[1]:"",("0"===(r=t.join(""))||""===r)&&(n=!1);f="+"==e[0].substring(0,1)?n?"-":"+":n?"-":"";return d+(f+r)+_}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.textLines=function(e,t,n,r,o){if(!r)return[];e.save(),e.font=n;var i=(0,a.default)(e,r,t,!!o);return e.restore(),i},t.font=u,t.drawText=function(e,t,n,r){var i=r.alpha,a=void 0===i?o.DEFAULT.FONT_COLOR:i,s=r.fontColor,c=void 0===s?o.DEFAULT.FONT_COLOR:s,l=r.textAlign,f=void 0===l?o.DEFAULT.TEXT_ALIGN:l,h=r.textBaseline,p=void 0===h?o.DEFAULT.TEXT_BASELINE:h,d=r.fontSize,y=void 0===d?o.DEFAULT.FONT_SIZE:d,v=r.lineHeight,g=void 0===v?1.2*y:v;e.save(),e.beginPath();var b=t.left,m=t.top,_=t.width,w=t.height;e.font=u(r);var x,k,O=n.length*g;switch(p){case"top":x=m,e.textBaseline="top";break;case"bottom":x=m+w-O+g,e.textBaseline="bottom";break;case"middle":default:x=m+w/2-O/2+g/2,e.textBaseline="middle"}switch(f){case"left":k=b,e.textAlign="left";break;case"right":k=b+_,e.textAlign="right";break;case"justify":k=b,e.textAlign="left";break;case"center":default:k=b+_/2,e.textAlign="center"}e.globalAlpha*=a,e.fillStyle=c,"justify"!=f?n.forEach(function(t,n){e.fillText(t.join(" "),k,x+n*g)}):n.forEach(function(t,n){var r=x+n*g;if(1==t.length)e.fillText(t[0],k,r);else{var o=t.map(function(t){return e.measureText(t).width}),i=o.reduce(function(e,t){return e+t},0),a=(_-i)/(t.length-1),u=k;t.forEach(function(t,n){e.fillText(t,u,r),u+=o[n]+a})}});e.restore()};var r,o=n(2),i=n(76),a=(r=i)&&r.__esModule?r:{default:r};function u(e){var t=e.fontFamily,n=void 0===t?o.DEFAULT.FONT_FAMILY:t,r=e.bold,i=void 0===r?o.DEFAULT.BOLD:r,a=e.italic,u=void 0===a?o.DEFAULT.ITALIC:a,s=e.fontSize,c=void 0===s?o.DEFAULT.FONT_SIZE:s,l=[];return i&&l.push("bold"),u&&l.push("italic"),l.push(c+"px"),l.push(n),l.join(" ")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=this,o=this.path,i=this.rotatePoint;this.get("rotation"),this.get("scale");e&&(o=e.call(n,o));var a=o.map(function(e){return r.transcoordS2P(e.x,e.y)});if(t){var o=t.call(n,a);o&&(a=o)}var u,s,c,l,f={x:0,y:0},o=a.map(function(e){return r.transcoordP2S(e.x,e.y,f)});u=s=o[0].x,c=l=o[0].y;for(var h=1;h<o.length;h++){var p=o[h];p.x<u?u=p.x:p.x>s&&(s=p.x),p.y<c?c=p.y:p.y>l&&(l=p.y)}i={x:(u+s)/2,y:(c+l)/2},i=this.transcoordS2P(i.x,i.y,f),this.path=a.map(function(e){return r.transcoordP2S(e.x,e.y,i)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=this.bounds,r=this.rotatePoint,o=this.get("rotation"),a=this.get("scale");if(e){var u=e.call(t,n);u&&(n=u)}var s=n,c=s.left,l=s.top,f=s.width,h=s.height,p=[{x:c,y:l},{x:c+f,y:l+h}],d=(p=p.map(function(e){return i.default.transcoordRR(e.x,e.y,r,o,a)}))[0],y=p[1];r={x:(d.x+y.x)/2,y:(d.y+y.y)/2},p=p.map(function(e){return i.default.transcoordR(e.x,e.y,r,o,a)}),d=p[0],y=p[1],this.bounds={left:d.x,top:d.y,width:y.x-d.x,height:y.y-d.y}};var r,o=n(0),i=(r=o)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeMappings=u,t.onchangeData=function(e,t){u.call(this)},t.buildMappings=function(){var e=this;if(!this._model.mappings)return void(this._mappings=[]);if(!this._model.mappings instanceof Array)return(0,o.error)("Mappings model is invalid (should be a Array) ..",this._model.mappings),void(this._mappings=[]);this._mappings=(this._model.mappings||[]).map(function(t){return new a.default(t,e)})},t.disposeMappings=function(){this._mappings&&this._mappings.forEach(function(e){return e.dispose()}),delete this._mappings},t.onchangeMappings=function(e,t){this.disposeMappings(),u.call(this)};var r,o=n(1),i=n(211),a=(r=i)&&r.__esModule?r:{default:r};function u(){var e=this;this.mappings&&this.mappings.forEach(function(t){try{var n=t.target,r=t.property,i=t.accessor;if(void 0==(i=i(e.data)))return;if("(root)"==(n=n.trim())||"(key)"==n){if((f=Object.keys(i||{}).map(function(t){return e.root.findOrCreate(t)}).filter(function(e){return!!e})).length>0){var a=t.evaluator(i,f);f.forEach(function(e){return e[r]=a[e.get("id")]})}}else if(n.startsWith("[")){if(!n.endsWith("]"))throw String("mapping target should end with ']' to designate property-id.("+n+")");var u=n.substring(1,n.length-1),s=t.evaluator(i,f);if(s instanceof Array)s.forEach(function(t){var n=t[u];if(n){var o=e.root.findOrCreate(n);o&&(o[r]=t)}});else{if(!(s instanceof Object))throw String("mapping data should be an object to target property-id.("+e.data+")");var c=s[u];if(c){var l=e.root.findOrCreate(c);l&&(l[r]=s)}}}else{var f;if((f=e.root.findAll(n,e)).length>0){var h=t.evaluator(i,f);f.forEach(function(e){return e[r]=h})}}}catch(n){(0,o.error)(n,e,t)}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=a(n(212)),i=a(n(213));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.owner=n,this.model=t}return r(e,[{key:"dispose",value:function(){delete this._model,delete this.owner,delete this.evaluator,delete this.accessor}},{key:"model",get:function(){return this._model},set:function(e){e.target;var t=e.property,n=e.rule,r=e.param,a=e.accessor;this._model=e,this.evaluator=(0,o.default)(this,this.owner,n,r,function(e){switch(e){case"ref":case"fillStyle":case"strokeStyle":return"string";default:return}}(t)),this.accessor=(0,i.default)(a)}},{key:"target",get:function(){return this.model.target}},{key:"property",get:function(){return this.model.property}},{key:"param",get:function(){return this.model.param}}]),e}();t.default=u},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.default=buildEvaluator;var _logger=__webpack_require__(1),_utils=__webpack_require__(3);function tostring(e){var t=(0,_utils.objToVal)(e);return void 0==t?"":String(t)}function tonumber(e){return Number((0,_utils.objToVal)(e))}function value(e){return e}function valueString(e){return tostring(e)}function valueNumber(e){return tonumber(e)}function map(e){if(this.param)return e=tostring(e),this.param.hasOwnProperty(e)?this.param[e]:this.param.default}function range(e){var t=this.param;if(t){for(var n in t){var r=n.split("~"),o=_slicedToArray(r,2),i=o[0],a=o[1],u=!!i,s=!!a;if(i=parseFloat(i),a=parseFloat(a),e=tonumber(e),u&&!s&&e>=i)return t[n];if(!u&&s&&e<i)return t[n];if(e>=i&&e<a)return t[n]}return t.default}}function radian(e){return tonumber(e)*Math.PI/180}function noop(){}function build(script){var evaluator;try{return eval("evaluator = function(value, targets) {"+script+"}"),evaluator}catch(e){return(0,_logger.error)(e),noop}}function buildEvaluator(e,t,n,r,o){switch(n){case"value":return"text"===o||"string"===o?valueString.bind(e):"number"===o?valueNumber.bind(e):value.bind(t);case"map":return map.bind(e);case"range":return range.bind(e);case"radian":return radian.bind(e);case"eval":return build(r).bind(t);default:return value.bind(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return r;var t=String(e).trim().replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split(".").filter(function(e){return!!e.trim()});return t.length>0?function(e){return t.reduce(function(e,t){return e?e[t]:void 0},e)}:r};var r=function(e){return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transcoordR=r,t.transcoordRR=o,t.transcoordP2S=function(e,t,n){if(!this.parent)return{x:e,y:t};var o=this.model,i=o.rotation,a=void 0===i?0:i,u=o.scale,s=void 0===u?{x:1,y:1}:u;if(this.isLayer()){var c=this.model.translate,l=r(e,t,c,a,s);return c&&(l.x-=c.x/(s?s.x:1),l.y-=c.y/(s?s.y:1)),l}n=n||this.rotatePoint;var f=r(e,t,n,a,s);return{x:f.x+(n.x-n.x/s.x),y:f.y+(n.y-n.y/s.y)}},t.transcoordS2P=function(e,t,n){if(!this.parent)return{x:e,y:t};var r=this.model,i=r.rotation,a=void 0===i?0:i,u=r.scale,s=void 0===u?{x:1,y:1}:u;if(this.isLayer()){var c=this.model.translate,l=o(e,t,void 0,a,s);return c&&(l.x+=c.x,l.y+=c.y),l}n=n||this.rotatePoint;var f=o(e,t,n,a,s);return{x:f.x-(n.x-n.x/s.x),y:f.y-(n.y-n.y/s.y)}},t.transcoordS2TR=function(e,t,n){var n=n||this.rootModel,r=this.transcoordS2T(e,t,n);return o(r.x,r.y,void 0,n.get("rotation")||0)},t.transcoordS2T=function(e,t,n){for(var n=n||this.rootModel,r=[],o=this.parent;o&&o!==n;o=o.parent)r.push(o);var i=this.transcoordS2P(e,t);return r.forEach(function(e){var t=e.model.scale,n=e.bounds;if(t){var r=e.rotatePoint;i.x+=(r.x-n.left)*t.x,i.y+=(r.y-n.top)*t.y}else i.x+=n.left,i.y+=n.top;i=e.transcoordS2P(i.x,i.y)}),i},t.transcoordT2S=function(e,t,n){for(var n=n||this.rootModel,r=[],o=this.parent;o&&o!==n;o=o.parent)r.splice(0,0,o);var i={x:e,y:t};return r.forEach(function(e){var t=e.model.scale;i=e.transcoordP2S(i.x,i.y);var n=e.bounds;if(t){var r=e.rotatePoint;i.x-=(r.x-n.left)/t.x,i.y-=(r.y-n.top)/t.y}else i.x-=n.left,i.y-=n.top}),this.transcoordP2S(i.x,i.y)},t.transcoordS2O=function(e,t,n){var r=this.rootModel,o=this.transcoordS2T(e,t,r);return n.transcoordT2S(o.x,o.y,r)},t.transcoordC2S=function(e,t,n){if(!n)for(n=this;n&&!n.isLayer();)n=n.parent;var o=n.model,i=o.translate,a=o.scale,u=o.rotation,s=r(e,t,i,u,a);i&&(s.x-=i.x/(a?a.x:1),s.y-=i.y/(a?a.y:1));return n===this?s:this.transcoordT2S(s.x,s.y,n)},t.transcoordS2C=function(e,t,n){if(!n)for(n=this;n&&!n.isLayer();)n=n.parent;if(n!==this)var r=this.transcoordS2T(e,t,n);else var r={x:e,y:t};var i=n.model,a=i.translate,u=i.rotation,s=i.scale;r=o(r.x,r.y,void 0,u,s),a&&(r.x+=a.x,r.y+=a.y);return r};!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(2));function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:1,y:1};return e-=n.x,t-=n.y,{x:(e*Math.cos(-r)-t*Math.sin(-r)+n.x)/o.x,y:(e*Math.sin(-r)+t*Math.cos(-r)+n.y)/o.y}}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:1,y:1};return e-=n.x,t-=n.y,{x:(e*Math.cos(r)-t*Math.sin(r)+n.x)*o.x,y:(e*Math.sin(r)+t*Math.cos(r)+n.y)*o.y}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.element,n=e.fillStyle,r=t.style;if(r.background="",!n)return;if("string"==typeof n)r.backgroundColor=n;else switch(n.type){case"pattern":r.backgroundImage="url("+n.image+")",n.fitPattern?r.backgroundSize="100% 100%":n.width||n.height?r.backgroundSize=(n.width?n.width+"px":"auto")+" "+(n.height?n.height+"px":"auto"):r.backgroundSize="contain";break;case"gradient":r.background=function(e,t){var n=t.colorStops,r=t.gradientType;if(n instanceof Array&&n.length>0)switch(r){case"radial":var o=t.center||"center";return"radial-gradient(farthest-corner at "+function(e,t){var n=e.bounds,r=n.width,o=n.height;switch(t){case"center":return[r/2,o/2];case"left-top":return[0,0];case"right-top":return[r,0];case"left-bottom":return[0,o];default:return[r,o]}}(e,o).map(function(e){return e+"px"}).join(" ")+","+n.map(function(e){return e.color+" "+100*e.position+"%"}).join(",")+")";case"linear":var i=180*(t.rotation||0)/3.141592653589793+90+"deg";return"linear-gradient("+i+", "+n.map(function(e){return e.color+" "+100*e.position+"%"}).join(",")+")"}return""}(e,n)}};n(2)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(3),i=n(1);var a,u=[];function s(){a=null;var e=performance.now(),t=(u=u.filter(function(e){return c(e)})).reduce(function(t,n){var r=e-n.updatedAt;return r>=n.retention?t.kills.push(n):t.next=0==t.next?n.retention-r:Math.min(t.next,n.retention-r),t},{next:0,kills:[]});t.kills.forEach(function(e){var t=u.indexOf(e);-1!=t?(u.splice(t,1),e.removeSelf(!0)):(0,i.error)("Should not be here. Maybe reentrance problem.")}),t.next>0&&(a=setTimeout(l,Math.max(t.next,500)))}function c(e){return!e.disposed&&e.retention>0&&!e.isTemplate()&&e.app&&e.app.isViewMode}var l=(0,o.throttle)(function(){requestAnimationFrame(s)},500),f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"add",value:function(e){c(e)&&-1==u.indexOf(e)&&(u.push(e),e.touch()),this.touch()}},{key:"remove",value:function(e){var t=u.indexOf(e);t>0&&u.splice(t,1),this.touch()}},{key:"touch",value:function(){null!==a&&(clearTimeout(a),a=null),l()}},{key:"length",get:function(){return u.length}}]),e}();t.default=new f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(13);var i={reflow:function(e,t){},capturables:function(e){return e.components},drawables:function(e){return e.components.filter(function(e){return!e.hidden})},isStuck:function(e){return!1},ABSOLUTE:!0};((r=o)&&r.__esModule?r:{default:r}).default.register("absolute",i),t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(13);function i(e){var t=e.components.filter(function(e){return!e.hidden}),n=e.get("layoutConfig"),r=t[n&&n.activeIndex||0];return r&&[r]||[]}var a={reflow:function(e){var t=e.bounds,n={left:0,top:0,width:t.width,height:t.height};e.forEach(function(e){e.bounds=n,e.set("rotation",0)})},capturables:function(e){return i(e)},drawables:function(e){return i(e)},isStuck:function(e){return!0}};((r=o)&&r.__esModule?r:{default:r}).default.register("card",a),t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(13);function i(e){var t=e.get("layoutConfig");return t&&t.weight||1}var a={reflow:function(e){var t=this.drawables(e),n=e.get("padding")||{},r=t.reduce(function(e,t){return e+i(t)},0),o=e.bounds,a=r>0?(o.width-((n.left||0)+(n.right||0)))/r:o.width,u=o.height-((n.top||0)+(n.bottom||0)),s=0;t.forEach(function(e){var t=i(e),r=e.get("margin")||{};e.bounds={left:a*s+(n.left||0)+(r.left||0),top:0+(n.top||0)+(r.top||0),width:t*a-((r.left||0)+(r.right||0)),height:u-((r.top||0)+(r.bottom||0))},e.set("rotation",0),s+=t})},capturables:function(e){return e.components},drawables:function(e){return e.components.filter(function(e){return!e.hidden})},isStuck:function(e){return!0}};((r=o)&&r.__esModule?r:{default:r}).default.register("linear-horizontal",a),t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(13);function i(e){var t=e.get("layoutConfig");return t&&t.weight||1}var a={reflow:function(e){var t=this.drawables(e),n=e.get("padding")||{},r=t.reduce(function(e,t){return e+i(t)},0),o=e.bounds,a=r>0?(o.height-((n.top||0)+(n.bottom||0)))/r:o.height,u=o.width-((n.left||0)+(n.right||0)),s=0;t.forEach(function(e){var t=i(e),r=e.get("margin")||{};e.bounds={left:0+(n.left||0)+(r.left||0),top:a*s+(n.top||0)+(r.top||0),width:u-((r.left||0)+(r.right||0)),height:t*a-((r.top||0)+(r.bottom||0))},e.set("rotation",0),s+=t})},capturables:function(e){return e.components},drawables:function(e){return e.components.filter(function(e){return!e.hidden})},isStuck:function(e){return!0}};((r=o)&&r.__esModule?r:{default:r}).default.register("linear-vertical",a),t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(13);var i={reflow:function(e){var t=e.get("layoutConfig"),n=t&&t.columns||e.get("columns"),r=t&&t.rows||e.get("rows"),o=t&&t.widths||e.get("widths"),i=t&&t.heights||e.get("heights"),a=o?o.filter(function(e,t){return t<n}).reduce(function(e,t){return e+t},0):n,u=i?i.filter(function(e,t){return t<r}).reduce(function(e,t){return e+t},0):r,s=e.textBounds,c=e.get("paddingLeft")||0,l=e.get("paddingTop")||0,f=s.width/a,h=s.height/u,p=0,d=0;e.components.forEach(function(e,t){for(var r=o?o[t%n]:1,a=i?i[Math.floor(t/n)]:1,u=e.colspan||1,s=0;--u>0;)s+=o?o[(t+u)%n]:1;for(var y=e.rowspan||1,v=0;--y>0;)v+=i?i[Math.floor(t/n)+y]:1;e.bounds={left:c+p,top:l+d,width:f*(r+s),height:h*(a+v)},e.set("rotation",0),t%n==n-1?(p=0,d+=a*h):p+=r*f})},capturables:function(e){return e.components.filter(function(e){return!e.merged})},drawables:function(e){return e.components.filter(function(e){return!e.merged})},isStuck:function(e){return!0},keyNavigate:function(e,t,n){var r=e.get("layoutConfig"),o=r&&r.columns||e.get("columns"),i=r&&r.rows||e.get("rows"),a=e.getRowColumn(t),u=a.row,s=a.column;switch(n.code){case"ArrowUp":if(u>0)return e.getAt((u-1)*o+s);break;case"ArrowDown":if(u<i-1)return e.getAt((u+1)*o+s);break;case"ArrowRight":if(s<o-1)return e.getAt(u*o+s+1);break;case"ArrowLeft":if(s>0)return e.getAt(u*o+s-1);break;default:return t}},joinType:!0};((r=o)&&r.__esModule?r:{default:r}).default.register("table",i),t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(13)),o=i(n(35));function i(e){return e&&e.__esModule?e:{default:e}}var a={reflow:function(e,t){this.drawables(e).filter(function(e){return e.isHTMLElement()}).forEach(function(e){return(0,o.default)(e)})},capturables:function(e){return e.components},drawables:function(e){return e.components.filter(function(e){return!e.hidden})},isStuck:function(e){return!1},ABSOLUTE:!0};r.default.register("html-absolute",a),t.default=a},function(e,t,n){"use strict";function r(e,t,n){var r=e.unitScale;t.set("scale",{x:r,y:r}),t.set("translate",{x:0,y:0})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this.model_layer.model,n=t.width,o=t.height,i=this.target_element,a=this.model_layer;if(!(n&&o&&i&&i.offsetWidth&&i.offsetHeight))return void r(this,a,i);switch(e){case"center":!function(e,t,n){var r=e.unitScale,o=t.model,i=o.width,a=o.height;t.set("scale",{x:r,y:r}),t.set("translate",{x:Math.max((n.offsetWidth-i*r)/2,0),y:Math.max((n.offsetHeight-a*r)/2,0)})}(this,a,i);break;case"both":!function(e,t,n){var r=t.model,o=r.width,i=r.height,a=n.offsetWidth,u=n.offsetHeight;t.set("scale",{x:a/o,y:u/i}),t.set("translate",{x:0,y:0})}(0,a,i);break;case"width":!function(e,t,n){var r=n.offsetWidth/t.get("width");t.set("scale",{x:r,y:r}),t.set("translate",{x:0,y:0})}(0,a,i);break;case"height":!function(e,t,n){var r=n.offsetHeight/t.get("height");t.set("scale",{x:r,y:r}),t.set("translate",{x:0,y:0})}(0,a,i);break;case"ratio":!function(e,t,n){var r=t.model,o=r.width,i=r.height,a=n.offsetWidth,u=n.offsetHeight,s=a/o,c=u/i,l=Math.min(s,c);t.set("scale",{x:l,y:l}),t.set("translate",{x:(a-o*l)/2,y:(u-i*l)/2})}(0,a,i);break;case"none":default:r(this,a,i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.containedInPath=function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=0;o<n.length-1;o++)if(a(e,t,n[o],n[o+1],r))return!0;return!1},t.getTipNeckPos=function(e,t,n,r){if("arrow"!=e.slice(-5))return n;n.x,n.y;var o=Math.atan2(r.y-n.y,r.x-n.x),i=1.5*t;return{x:n.x+Math.cos(o)*i,y:n.y+Math.sin(o)*i}},t.drawEndTips=function(e,t,n){var r=n.lineWidth,o=void 0===r?i:r,a=n.strokeStyle,c=void 0===a?"#000000":a,l=n.lineCap,f=void 0!==l&&l,h=n.alpha,p=void 0===h?1:h,d=n.begin,y=void 0===d?"none":d,v=n.end,g=void 0===v?"none":v,b=n.beginSize,m=void 0===b?"size5":b,_=n.endSize,w=void 0===_?"size5":_;if(("none"!=y||"none"!=g)&&(o=Number(o)||i,e.lineCap=f,e.lineWidth=o,e.strokeStyle=c,e.fillStyle=c,e.globalAlpha*=p,"none"!=y&&u(e,t[0],t[1],o,y,s(m,o)),"none"!=g)){var x=t.length;u(e,t[x-1],t[x-2],o,g,s(w,o))}};var r=5,o=Math.sqrt(3),i=2;function a(e,t,n,o,i){var a,u,s,c,l=r+i,f=n.x,h=n.y,p=o.x,d=o.y;if(Math.abs(f-p)>l&&Math.abs(h-d)>l){var y=(d-h)/(p-f),v=h-y*f;if(Math.abs(t-(y*e+v))>l)return!1}return f>p?(u=f,a=p):(u=p,a=f),h>d?(c=h,s=d):(c=d,s=h),!(u+r<e)&&(!(a-r>e)&&(!(c+r<t)&&!(s-r>t)))}function u(e,t,n,r,i,a){var u=t.x,s=t.y,c=Math.atan2(n.y-s,n.x-u);switch(e.beginPath(),e.translate(u,s),e.rotate(c),i){case"oval":e.ellipse(0,0,a.X,a.Y,0,0,2*Math.PI),e.fill();break;case"diamond":e.moveTo(-a.X,0),e.lineTo(0,-a.Y),e.lineTo(a.X,0),e.lineTo(0,a.Y),e.fill();break;case"arrow":e.moveTo(0,0),e.lineTo(o*a.X,-a.Y),e.lineTo(o*a.X,a.Y),e.fill();break;case"sharp-arrow":e.moveTo(0,0),e.lineTo(o*a.X,-a.Y),e.lineTo(-a.X/1.5+o*a.X,0),e.lineTo(o*a.X,a.Y),e.fill();break;case"open-arrow":e.moveTo(o*a.X+r,-a.Y),e.lineTo(r,0),e.lineTo(o*a.X+r,a.Y),e.stroke()}e.rotate(-c),e.translate(-u,-s),e.closePath()}function s(e,t){var n={};switch(t*=1.2,e){case"size1":n.X=t,n.Y=t;break;case"size2":n.X=1.5*t,n.Y=t;break;case"size3":n.X=2*t,n.Y=t;break;case"size4":n.X=t,n.Y=1.5*t;break;case"size5":n.X=1.5*t,n.Y=1.5*t;break;case"size6":n.X=2*t,n.Y=1.5*t;break;case"size7":n.X=t,n.Y=2*t;break;case"size8":n.X=1.5*t,n.Y=2*t;break;case"size9":n.X=2*t,n.Y=2*t;break;default:n.X=1.5*t,n.Y=1.5*t}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.model,r=n.cx,o=n.cy,i=n.rx,a=n.ry,u=2*Math.PI*t,s=r+i*Math.cos(u),c=o+a*Math.sin(u);return e.transcoordS2T(s,c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=a(n(0)),i=a(n(5));function a(e){return e&&e.__esModule?e:{default:e}}var u={ondragstart:function(e,t,n){n.mutatePath(null,function(n){n.splice(t+1,0,e)})},ondragmove:function(e,t,n){n.mutatePath(null,function(n){n[t+1]=e})},ondragend:function(e,t,n){}},s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"is3dish",value:function(){return!0}},{key:"render",value:function(e){var t=this.model.path,n=void 0===t?[]:t;if(!(n.length<=1)){e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath()}}},{key:"contains",value:function(e,t){var n=this.model.path,r=!1;return n.forEach(function(o,i){var a=(i+n.length+1)%n.length,u=o.x,s=o.y,c=n[a].x,l=n[a].y;s>t!=l>t&&e<(c-u)*(t-s)/(l-s)+u&&(r=!r)}),r}},{key:"mutable",get:function(){return!0}},{key:"pathExtendable",get:function(){return!0}},{key:"path",get:function(){return this.model.path},set:function(e){this.set("path",e)}},{key:"controls",get:function(){var e=this.path;return e.map(function(t,n){var r=e[n+1>=e.length?0:n+1];return{x:(t.x+r.x)/2,y:(t.y+r.y)/2,handler:u}})}}]),t}();t.default=s,o.default.memoize(s.prototype,"controls",!1),o.default.register("polygon",s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=a(n(0)),i=a(n(81));function a(e){return e&&e.__esModule?e:{default:e}}var u={ondragstart:function(e,t,n){n.mutatePath(null,function(n){n.splice(t,0,e)})},ondragmove:function(e,t,n){n.mutatePath(null,function(n){n[t]=e})},ondragend:function(e,t,n){}},s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"pathExtendable",get:function(){return!0}},{key:"path",get:function(){return this.model.path},set:function(e){this.set("path",e)}},{key:"controls",get:function(){for(var e=this.path,t=[],n=0;n<e.length-1;n++){var r=e[n],o=e[n+1];0==n&&t.push({x:r.x,y:r.y,handler:u}),t.push({x:(r.x+o.x)/2,y:(r.y+o.y)/2,handler:u}),n==e.length-2&&t.push({x:o.x,y:o.y,handler:u})}return t}}]),t}();t.default=s,o.default.memoize(s.prototype,"controls",!1),o.default.register("polyline",s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(0)),i=s(n(5)),a=s(n(4)),u=n(1);function s(e){return e&&e.__esModule?e:{default:e}}var c={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"image-selector",label:"image-src",name:"src",property:{displayField:"id",displayFullUrl:!0,baseUrlAlias:"$base_url",defaultStorage:"scene-image",storageFilters:{type:Array,value:[{name:"category",value:"image"}]},useUpload:!0}}],"value-property":"src"},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,a.default)(i.default)),r(t,[{key:"dispose",value:function(){(function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),this._offcanvas=null,this._image=null}},{key:"render",value:function(e){var n=this.model,r=n.left,o=n.top,i=n.width,a=n.height,u=n.isGray,s=void 0!==u&&u,c=n.alpha,l=void 0===c?1:c,f=n.src;if(this.prepareIf(!this._image&&f),e.beginPath(),e.globalAlpha*=l,this._image&&this._image.complete)if(s&&this._offcanvas)e.drawImage(this._offcanvas,r,o,i,a);else try{e.drawImage(this._image,r,o,i,a)}catch(n){e.drawImage(t.noimage,r,o,i,a)}else e.drawImage(t.noimage,r,o,i,a)}},{key:"prepare",value:function(e,t){var n=this,r=this.model.src;if(r){this._image=new Image;try{"data"!==String(r).substring(0,4)?this._image.crossOrigin="use-credentials":this._image.crossOrigin=null,this._image.src="string"==typeof r?this.app.url(r):r}catch(e){return void t(e)}this._image.onload=function(){if(n.get("isGray")){var t=n._image.width,r=n._image.height;n._offcanvas=o.default.createCanvas(t,r);var i=n._offcanvas.getContext("2d");i.drawImage(n._image,0,0);var a=function(e,t,n){try{var r=e.getImageData(0,0,t,n)}catch(e){return(0,u.error)("Get Image Data Error: "+e.message),null}for(var o=r.data,i=0;i<t*n*4;i+=4){var a=o[i],s=o[i+1],c=o[i+2],l=parseInt((a+s+c)/3);r.data[i]=l,r.data[i+1]=l,r.data[i+2]=l}return r}(i,t,r);i.putImageData(a,0,0)}e(n)},this._image.onerror=function(e){t(e)}}else e(this)}},{key:"onchange",value:function(e,t){(e.hasOwnProperty("src")||e.hasOwnProperty("isGray"))&&(this._offcanvas=null,this._image=null,this.prepareIf(e.src))}},{key:"ondropfile",value:function(e,t){for(var n=0;n<e.length;n++)if(e[n].type.startsWith("image/"))return void(this.src=t[n])}},{key:"nature",get:function(){return c}},{key:"hasTextProperty",get:function(){return!1}},{key:"src",get:function(){return this.get("src")},set:function(e){this.set("src",e)}}],[{key:"noimage",get:function(){return t.NOIMAGE||(t.NOIMAGE=new Image,t.NOIMAGE.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABIBAMAAAD7Se1QAAAAIVBMVEUAAABHcEwBAQEREREBAQEEBAQGBgYLCwsDAwMDAwMICAi6HF9tAAAAC3RSTlNNAEAERiMYCS41Eac10lYAAAEgSURBVHhe7dY9asQwEAXgh7DNertNiJy48pIitY3SB7bYdk0ukL1BDDmA9gZecoH4pmFQ3MQayUMguPBrNPD4wD9TCMvJmt3M/AtYwXOlXiWgqADVCUBD46MAnGhMBaCiUQmAm8VA/Eh/eWl9Fn5WcxD+OLuRrUYJDKLluwH2InACUgkoACSdADxQc50Bytadb9RkM0CT13TcvlCT1HFg8UTHvasuUVACCa3El6u2UdD8LFTlKhUFFgA+d3dj10aABkUN72N3jAADCrJq7PIIsPidcxBoTHIIAjMFmyCwmGYIAA1P9gFgfCANAOsDSccCDW+uLDB+kLGg94OkZoAGkwsDDAe2DOg5oPxAg03rBR88OHpBz4N8UVeHFSwma74BTW6Ge4rIRa4AAAAASUVORK5CYII="),t.NOIMAGE}}]),t}();t.default=l,o.default.register("image-view",l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=s(n(0)),a=s(n(5)),u=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var c={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"src",name:"src"}],"value-property":"src"},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,u.default)(a.default)),r(t,[{key:"dispose",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),this._audio=null}},{key:"ready",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ready",this).call(this),this.setSource(this.src)}},{key:"render",value:function(e){var n=this.model,r=n.left,o=n.top,i=n.width,a=n.height;n.src;e.beginPath(),e.drawImage(t.image,r,o,i,a)}},{key:"start",value:function(){this._audio&&(this._audio.classList.add("active"),this._audio.play())}},{key:"pause",value:function(){this._audio&&(this._audio.classList.remove("active"),this._audio.pause())}},{key:"setSource",value:function(e){if(e){this._audio=new Audio;try{"data"!==String(e).substring(0,4)?this._audio.crossOrigin="use-credentials":this._audio.crossOrigin=null,this._audio.src="string"==typeof e?this.app.url(e):e}catch(e){return void console.error(e)}}else this._audio=null}},{key:"onchange",value:function(e,t){e.hasOwnProperty("src")&&this.setSource(e.src)}},{key:"ondblclick",value:function(e){this.started=!this.started}},{key:"ondropfile",value:function(e,t){for(var n=0;n<e.length;n++)if(e[n].type.startsWith("audio/"))return void(this.src=t[n])}},{key:"nature",get:function(){return c}},{key:"hasTextProperty",get:function(){return!1}},{key:"src",get:function(){return this.get("src")},set:function(e){this.set("src",e)}},{key:"started",get:function(){return this._audio&&this._audio.classList.contains("active")},set:function(e){e?this.start():this.pause()}}],[{key:"image",get:function(){return t.IMAGE||(t.IMAGE=new Image,t.IMAGE.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAMAAAC3Ycb+AAAAP1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACzJYIvAAAAFHRSTlMA8BAwgNBgQKB/wCBwUJDg37CvXyUlBK8AABFYSURBVHja7NsBkqIwFIThTiAQgyBq3/+sm6p1tnamZkaTMhJJf1f4S/JeEIiIiIiIiIiIiIiIiEhD7Hg4BH84TpAKjJ4f3NFCtjVd+InXz2RTs+FXlxGylYHfcVfIJmb+YFWSLUyGVJKKBJJKUo+Rd6w63l/qzLuCkryO5fe0l2xk5mMWbe+v0fNBRqf7S3je6CipQ2ACr+dWcYEpzBFS1plpguatsnomMgdIQSOTuQ5SjmE6/UgK8szgdJIUM/FG41YlFmYJ2kkKsY5ZzAwBurHDk3WGeRY0bvYrGa1+rqNI22f7dS32ZnUK1GMr0eSK3mEc9dhKMxp+ZTo8kT2emOXS5LQ1kCxbJBocSd2k5PaIjMVzjWcdJPk9ooBnmzx1t5XbIxqBKpJ4NGTgzwKiGpK4do72gb+ZUMIYtCPm9WCPMsYTE5k2hq2ZvzujlCE1iRmwf3dvmRyKsT0T7b9I7HEPCpqCiqT2IIqaT1pI0noQZdlFC8l/PbYPAnRORT56VBEE6FXkb49agmByKhJ71BME6FsvEntUFQTdqekisUdlQWCXhovEHtUFAWbTapHYo8YgmFybO3vsUWcQYGmxSOxRbRAMprkisUfFQVKmrX18sxt7VB0ENjT1xir2qDxIwkFi3v89e+xRfxAMzfzzIfZ4hyAYDR9zwVuLPd4jCDrTwoLYGb5LEFi3/+E3rweR6urX20c/Fvls2Pvwm9mDSGIPhv8YPyGf3/eo9Ye7O8B2FIShAAooakEttex/rbODad5/yTHIAjqn505IQPv+Xz06dz+4VXORHEZcgAcB8updM8F6e25jBzwIkE07l+x8amMnPDp6nsNJ+BoZ7Q6F8egqAda9VEuRNlZjBzwYkMskdXR73okd8GBAJiKYjBcZKKqG9OiKDbgdfxJ5VhsBPDiQZhaouD3p4hfw4EAmwxisz3MSHwAPEmQ1TB1N+SmXWoAHC7JbZsWl/IxLLcCDBplNo3lrfMLsmwAPGmShAxX5/1vOEzjEz3iyfQ/hI36W4TctsUesOAifPdrQg8M++KYl95iCBkjI1r8634betBAPHZDTPFAmD3zLiHgogVTziMsahz0eIh5aIGHGRSJ2mFtHPR4iHhQIP2UvWGMf8wk74qEIEib7rLjPiBfxiAcCwp8V+Nae3uMdRhAPDIR/J5f/Q2DTcC+hIB7qIGEq3Ti9bx+sryMeAAgS70OK8G2kBD8L8QBAoLWU3g3vUVIc6D0txAMAsY+4jBWowXHO64gHBGKfYJ2T5qY1BxcL98BB+PQ+XiS9xxh9EQ8ChA6C5UXWIUoE9MBB8LVHQoS7ib8/dRn3sAcJ6bQRSdH96RDxIEH4QEX+AHF4LxHEAwUh12xyr1V8lwjiQYDYF8kuf1jluUQQDwrEvkhW8Wc6LhHUgwfhi4QPlHm7LRHawx4kpE191Dq8lgjhAYDQa1cftYrPEiE8OJDb40uqyzdQCA8WhAzL4G/PT4c3WrgHD2IfllGl53V37zsgHg5ApPNvVvq4Fn4spx4oiH1W3CwtEV+PDhEPJyBSkVX4aa7emkM83ICEKWpGM7wdvYCCeDgCEYpcwhLxczhEPFyBCEUWnRL5T6X59SBASBF+9l28TL5F7uEORCZyCUvEx+S7yT0cgoRVb9JaXLR1qUdfgksQ0fTbgmhFB20d8HAKEha14+F8f1sHPNyCiL6EqK+n20/rgIdjkFC0Ho1s6Gndvcc9ICkr/ey8/rHO6vp9KawL8DAFOV6l9Fyub7IbflsCag1qRfVsXWvxHjxIejU+BHZV6uvHD1XiEb++Bw8i+dNd+Wv0eCQmhcPhRPwUUt2DB5G1sfa1aeyzAuyJj9x2HjyIdKzIKw5SI14ieFtvo3kIQERj3lVhkUOnRD7AnjV5369QkAOJZeCH+Jh41xOLs73dQwAifY6dpxCCbjTDzLf1Bm1Y93tAIDOWXcLPvrHyr2hVoEAceEAgDQzB4jetk0/c2OXRHB48EJCpa4dgpYh2ETxtrshz7zx4ICCzfuTSDn8p/EOS9OTjwgMB+cABP3yWYuOPIofs33LigYCULlpZNXJppVU30Vf14kGAUCLijf1D71lN9FW9eFiA9KgZ8FPpPUsSnufGA+8hvAg2Kpz0nrX//qp+PIgpC3i6xJRITOye9fn1VT15ICCrVlQG5rywo0H8x965bVkNwmCYQ2kR6Gmb939WXV65dFnI/tPdjPBfO7XMN4EkTUJtqZp4sCJ1+8jwkhMu0KpMxFXFA8hlVfQSMxGH5mDK1VKV8QCyvTVtUiYyo7V358VStfGoAEFMhGYhEwloxZy9WKo2Hjwg5iSOvFDXeUYd33+PuVfHgwnEBWLocDJp+IIa2fyvperjwQRiXCKGosyXqoA+YfsIELuYu4HAt+msMknfDK4jfQJIzOZ2IPAQWJtFOhQKivR2IDZ6Awis7V0iLxqBI7uEZo19dakTogLSwKvf8yk8Jq6CGK0GKvWlatG7b7kkUU/Lo1gdXWn7/4E0j0qeJDpqN/ABqQcgJgdqURb4chjQktIugDS6wFFiz3JgaJj7AGJmholAe9YKhoZLJ0Ca6smjwJ4VwVN96gVIE5GM71kHaGKxGyAtRDaB2NBhLVmpHyANRKzDO28W7FS3HQFpaIWa8TrfCXQwegJSL5k+8M9UJ+pm9QTEnCIZrR0MDQeQ9ua0iCcYQaBTV0CqNXQW/yiyYG7W1heQanPaCkciBXuH1BkQJzHcDQxmpgGkPatl4WkbCXO/bW9AqlNg4H0PPMi6A1IxkQmOZ8D0ousNSMVEEuyreTAQ6Q7IRJeCX2YZQHhv6SrBOmpkM+YUzN0BqSRQCupmTeCP9wdkhiOREwtEzgGEsWcF9BhK9R8fQDiN7A8DiR0CKXQlj/q9IM8OgXjIzcKBlAHkD6FulgNzJwPIHwpo8mQAkX3LiPq9dKUMAQk9AqmcqmjuBAJCPQIpA4guIAsKJA0gnwNy3A4kDyBIHCEPxAwgf8gPILqA5AFEF5CxZX0lIHYc6rqADLf380BmFMgxgIzUyf8MJKLTRelKHgKy9wgkjfS7LiA0gKgC8vQn3HUA4RQ5LKPIAQciWbqIEg0YkLNDIHYUyqkCsmKN5vg3+W0AYTRATaPY+uu1IwS6UMGAlO6AFPjSCQMStaNh53cdcPG7Hx1Uupo+rx+Bltn1BuTAj5BptEV/bHAAwbnJMICwRmtUDOSEA8s4Rmtw3nITGD6TwUNoG0Ca7xi2YKSPj2eKXQFxQWKA2QbGMWEMMGseOb7C7T47uJS1JyAzVbTjqZdU3zbHzMXWS+qp4Fgn8Ahy/QCRGqQcwU1vGnN7fylboWn8Bzg//hyjxltvdcl45bwFfYKzFyBy11UU9BnjuoqfWizVlQXulpzBTNbaB5Aid+VRrkBFB630AMS9BC8FK2ggE7u/FGy1kvfcB9TKQufX5uUXNWl3EjvWCi4k/u9A3Ddq1CpTIQGe6VN1qd8ArcvDQNw3S41Kn6qQmOq5e7pRr+8fAYLiIJtFrrvYRMYL0q06vj8EZLXUriJzRY8H1xEagOCK7gkghRg6RQYO0I6aWPwIEAru80AiMWSdzAeuDXUKyr+WqpAID8hMHC1Ct8F4mUsQ6W8pJMICki0JHCBczAFdBl38G3VE6ErQhhWlih4LWrCSLpaqjggHiGe9mVjRY0YPoelyqcqIcIDEe97rqJFFH7FcLlUZEQ6Qg5plvZiBFNhtri1VFREGEC/Eg4nZoU5vqi1VFREGkIXDQ8xAIhzoT/WlKiLCAFIYPOQMxOPdjfWlKiLCADJRm3YGj+pDE2xktmmpaogwgMz8d8GrumZ4xzpbvinqISJ+hiTWm7wEqoJdI9JEV9JChAEkS3xCZzKecLcgN6YwlRBhAGmweTsblg6qKMM7Vmh321UQ4QAp1VfwhqVJIh+Wm03W0qV0EOEAybXtivkCmWrKeH2EZ/xBaSBCV2L9Re+LYSqJJIxDu1ew07U0EGEBcTtmHty4JuPtQhvLh1BAhK7Uvvq0GK484QZST0GvvFDqeSJ1IA0r2mfDljvqBoJ//rVsq7yZCA6kXgVkJ2f4ijIGMjOfMVsCBBORB2Jy+sM6ijNvaBUqmw/cStZ8EiKciHwp6Rp++88qmxXQeTUxDiJWJ9wSISvBicgXW+dypn1PqWTznlwgwdZdfiLHr5OELEAEASKvJFRE5JCPKbh8OxHdQKJU0crEzRXrJ/IEkFms6tGyrUw9kQeALFRXvK2iSzsRAAi6BLxM+60xdsqJAEBuXMAMxDLVp+gmAgC57/UT4qvVj3TVRCAgSAYL91aXtyNLzUQAIFhAiP8m0/NHOp+ILiBtPFKrs6bgSOcT0QTEB8nO3QR1yKslggKRf+m11UB0HOl8IlqAeCvauXuo8HnfIqIDyCw6G8XMcGiplMingMzCnbuHFp/3LSLPA4nUpqm5YkWNzwsQeQxIDsKjH5wVSU5qJPIJIIt4jjpqNBAekQeBfJOeHWS81FQoo4/I7UDcS3wUh0liTzLqiEgDqddx4ZHDrNZAACIAEMw88HPYWb0GAhABgEDmgf9Vb5oNBCByOxD3uqWYbCHVBgIQuRlIsbfwMEG5gQBE7gSyHMDsOayrxJvHBRC5B0hOxJH1nK4SlUE6QOR+IG6ju3iYQEqDdIDIzUDyZu/jMRHpS/OiRG4FkiPRfTw8kbrvIAJEACAIDpyHC1/GQHhEbgKSXwTyqIeEur6kixEBgABHOTr7YSX1MSFAhA0E307wUU76Y0KACAsI/tvCRzkF+iIuL0AEAYLbR2QOfvhKJ/obRESBxNt5rPSFXN4f7dyNdqMgEIbhAXWwJErT/e7/Wreb5HTT07QVgWSAeW5g7b4n8qOSUCRPEId4HP93SXp5dDNGRJFcQTxihSH+NW1Bb1cXKpIryJAwnG/zhl8ZcSP6jiKZghwRaaWLnP/AkcSKKJIniEcUs8QfjFLdEmRvkSxB4lfn0QN6DY+lshQpHiT96Dlr6r5hxRUpHST9ZEY71X7DOmOZQVZLsd5Q8wzrPxYYJDiKNqOBG1ZCkZKzrNXu6lHvkjChSFqQsdTPg45ApXtYaUXKr9TNuPcvqO2pVMkitFXAL2a79/qr3HQvVSTXUtofCl79RDXh5CDpw3pwu6+9kRlvtiI5VtPhmHLltT4EKVQkfb8pcOHrXqk6nBAksUjgpKtuYsskaxGKYT0+84uYgziE4YQgMdx0m8PRfis2MbL33PMXoVjD6PEunI4HSjDjStiJP08vQk9hZzQ7oH/geoLYCUBDW4rf4FqCDFt7THUO6B+4jiDn2XNTW7zf4hqCMND4BOsGyw+yAmh0x+QeFh7EeqD5Ce8nLDrI8NpbDyIWHIQNruo4GyAPlhrEzuixBxHLDDJMnfYgYolBricHNfjIdgMWF+Qyu+pkgX4HCwuymL57ELGkIHZG7z2IWE6Q5VV7vGMhQewbtMcZiwhyHj26ne9+xs8PcvDQHnFFqCD7Au0RW4TK+fOKqw4eoOcqYqgU53HR3/5uShFPCfKey9hFDyJO/vAi7RDZnp7X5igyUH72xSDW1E2Pn4tMRCQgR8vLwbgii4gcmLvqQcSPGtIPX3M08wn6I4qYQ94cM/Yw9Xxhmw+X/59wHrtMlX1AmIkzdyaaAnLg1Nnw8WGYSk40X/BOh4+El6LMSBnN2Cd0tPq4w/LJXGrMbCX06PZ2dcM65yzlNertShSHf3SzRAyPM332IcSAHUKPi8EHmXU0l8Uglmni0yipDoi16s+jJKejhywLooz68yiMEcHr2qM4h81CJ++VPJfTu5UwBpv4Pp9DJSi6MJx0bvUwiw4ewgT8zNR0LHUL+OccOpY/3ElzyGKD5pBlMJpDlsOkMythRoNbXh95PJsdA67MrMtAEYbjeDqNo+7oKqWUUkoppZRSSimllFJKFfMXp4vmSjB8n6sAAAAASUVORK5CYII="),t.IMAGE}}]),t}();t.default=l,i.default.register("audio",l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),o=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,o.default)(r.default)),t}();t.default=a,r.default.register("text",a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=s(n(0)),a=s(n(5)),u=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var c={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"ref",name:"ref",property:"ref"},{type:"select",label:"fit",name:"fit",property:{options:["both","ratio"]}}],"value-property":"ref"},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,u.default)(a.default)),r(t,[{key:"draw",value:function(e){this._drawing||(this._drawing=!0,o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this,e),this._drawing=!1)}},{key:"prerender",value:function(e){if(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prerender",this).call(this,e),this.ref){var n=this.ref.center,r=this.center,i=this.refScale;e.translate(r.x,r.y),e.scale(i.x,i.y),e.translate(-n.x,-n.y)}}},{key:"postrender",value:function(e){if(this.ref)return this.ref.postrender(e);o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postrender",this).call(this,e)}},{key:"render",value:function(e){if(this.ref)return this.ref.render(e);this.model.round;var t=this.bounds,n=t.left,r=t.top,o=t.width,i=t.height;e.beginPath(),e.rect(n,r,o,i)}},{key:"ref",get:function(){var e=this.getState("ref");return e&&"string"==typeof e?this.root.findById(e):null},set:function(e){this.setState("ref",e)}},{key:"refScale",get:function(){var e=this.ref.bounds,t=(this.ref.center,this.bounds),n=(this.center,t.width/e.width),r=t.height/e.height;switch(this.model.fit){case"both":return{x:n,y:r};case"ratio":default:return{x:Math.min(n,r),y:Math.min(n,r)}}}},{key:"nature",get:function(){return c}},{key:"hasTextProperty",get:function(){return!1}}]),t}();t.default=l,i.default.memoize(l.prototype,"ref",!1),i.default.memoize(l.prototype,"refScale",!1),i.default.register("local-ref",l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=s(n(0)),a=s(n(5)),u=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var c={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"scene-number",name:"ref",placeholder:"SCENE-1"},{type:"select",label:"fit",name:"fit",property:{options:["both","ratio"]}}],"value-property":"ref"},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,u.default)(a.default)),r(t,[{key:"dispose",value:function(){this._releaseRef(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"draw",value:function(e){this._drawing||(this._drawing=!0,o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this,e),this._drawing=!1)}},{key:"prerender",value:function(e){if(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"prerender",this).call(this,e),this.ref){var n=this.ref.root.center,r=this.center,i=this.refScale;e.translate(r.x,r.y),i&&e.scale(i.x,i.y),e.translate(-n.x,-n.y)}}},{key:"postrender",value:function(e){if(this.ref)return this.ref.root.postrender(e);o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postrender",this).call(this,e)}},{key:"render",value:function(e){if(this.ref)return this.ref.root.render(e);this.model.round;var t=this.bounds,n=t.left,r=t.top,o=t.width,i=t.height;e.beginPath(),e.rect(n,r,o,i)}},{key:"_releaseRef",value:function(){this.__ref&&this.__ref.release&&(this.__ref._container.off("redraw",this.onredraw_ref,this),this.__ref.release()),delete this.__ref}},{key:"onredraw_ref",value:function(){this.invalidate()}},{key:"onchange",value:function(e,t,n){(t.ref||e.ref)&&this._releaseRef()}},{key:"nature",get:function(){return c}},{key:"hasTextProperty",get:function(){return!1}},{key:"refScale",get:function(){if(this.ref){var e=this.ref.root,t=e.bounds,n=(e.center,this.bounds);this.center;if(t.width&&t.height){var r=n.width/t.width,o=n.height/t.height;switch(this.model.fit){case"both":return{x:r,y:o};case"ratio":default:return{x:Math.min(r,o),y:Math.min(r,o)}}}}}},{key:"ref",get:function(){if(this.__ref||this.__waiting)return this.__ref;var e=this.app.refProvider,t=this.getState("ref");if(e&&t){var n=this;n.__waiting=!0,e.get(t,!0).then(function(e){n.__ref=e,n.__ref.on("redraw",n.onredraw_ref,n),delete n.__waiting},function(e){delete n.__waiting})}return this.__ref},set:function(e){this.setState("ref",e)}}]),t}();t.default=l,i.default.memoize(l.prototype,"ref",!1),i.default.memoize(l.prototype,"refScale",!1),i.default.register("global-ref",l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),o=a(n(4)),i=a(n(85));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,i.default)((0,o.default)(r.default))),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(8)),i=u(n(85)),a=n(36);function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,i.default)(o.default)),r(t,[{key:"render",value:function(e){}},{key:"layout",get:function(){return a.Layout.get(this.get("layout"))||a.HTMLAbsoluteLayout}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=(r=i)&&r.__esModule?r:{default:r};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),o(t,[{key:"render",value:function(e){var t=this.model.path,n=void 0===t?[]:t;if(!(n.length<=1)){e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),this.drawStroke(e)}}},{key:"contains",value:function(e,t){var n=this.model.path,r=!1;return n.forEach(function(o,i){var a=(i+n.length+1)%n.length,u=o.x,s=o.y,c=n[a].x,l=n[a].y;s>t!=l>t&&e<(c-u)*(t-s)/(l-s)+u&&(r=!r)}),r}},{key:"path",get:function(){return this.model.path},set:function(e){this.set("path",e)}}]),t}();t.default=u,a.default.register("path",u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=a(n(0)),i=a(n(5));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"render",value:function(e){var t=this.model,n=t.x1,r=t.y1,o=t.x2,i=t.y2,a=t.x3,u=t.y3;e.beginPath(),e.moveTo(n,r),e.lineTo(o,i),e.lineTo(a,u),e.closePath()}},{key:"contains",value:function(e,t){for(var n=this.model,r=[n.x1,n.y1,n.x2,n.y2,n.x3,n.y3],o=!1,i=0;i<r.length;i+=2){var a=(i+2)%r.length,u=r[i],s=r[i+1],c=r[a+1];s>t!=c>t&&e<(r[a]-u)*(t-s)/(c-s)+u&&(o=!o)}return o}},{key:"mutable",get:function(){return!0}},{key:"path",get:function(){var e=this.model;return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:e.x3,y:e.y3}]},set:function(e){this.set({x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y,x3:e[2].x,y3:e[2].y})}}]),t}();t.default=u,o.default.memoize(u.prototype,"path",!1),o.default.register("triangle",u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=a(n(0)),i=a(n(37));function a(e){return e&&e.__esModule?e:{default:e}}var u={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"ratio",name:"ratio",property:"ratio"}]},s={ondragmove:function(e,t,n){n.controls;var r=n.model,o=r.cx,i=r.rx,a=(n.transcoordP2S(e.x,e.y).x-o)/i*100;a=a>=100||a<=-100?100:Math.abs(a),n.set({ratio:a})}},c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"render",value:function(e){var t=this.model,n=t.ratio,r=void 0===n?50:n,o=t.cx,i=t.cy,a=t.rx,u=t.ry,s=t.startAngle,c=t.endAngle,l=t.anticlockwise;e.beginPath(),e.ellipse(o,i,Math.abs(a),Math.abs(u),0,s||0,c||2*Math.PI,l),e.moveTo(o+a/100*r,i),e.ellipse(o,i,Math.abs(a/100*r),Math.abs(u/100*r),0,s||0,c||2*Math.PI,!0)}},{key:"contains",value:function(e,t){var n=this.model,r=n.cx,o=n.cy,i=n.rx,a=n.ry,u=n.ratio,s=(e-r)/(2*i-.5),c=(t-o)/(2*a-.5),l=(e-r)/(i/100*u*2-.5),f=(t-o)/(a/100*u*2-.5),h=!1;return s*s+c*c<.25&&l*l+f*f>.25&&(h=!h),h}},{key:"controls",get:function(){var e=this.model,t=e.cx,n=e.cy;return[{x:t+e.rx/100*e.ratio,y:n,handler:s}]}},{key:"nature",get:function(){return u}}]),t}();t.default=c,o.default.memoize(c.prototype,"controls",!1),o.default.register("donut",c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=a(n(0)),i=a(n(37));function a(e){return e&&e.__esModule?e:{default:e}}var u={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"ratio",name:"ratio",property:"ratio"},{type:"number",label:"wing",name:"wing",property:"wing"}]},s={ondragmove:function(e,t,n){n.controls;var r=n.model,o=r.cy,i=r.ry,a=(n.transcoordP2S(e.x,e.y).y-o)/i*100+100;a>=100?a=100:a<=0&&(a=0),n.set({ratio:a})}},c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"render",value:function(e){var t=this.model,n=t.ratio,r=void 0===n?30:n,o=t.wing,i=void 0===o?5:o,a=t.cx,u=t.cy,s=t.rx,c=t.ry;t.startAngle,t.endAngle,t.anticlockwise;if(!(i<3)){var l=1.5707963267948966,f=2*Math.PI/i,h=s-r/100*s,p=c-r/100*c;e.save(),e.beginPath(),e.translate(a,u),e.moveTo(s*Math.cos(-l),c*Math.sin(-l)),e.lineTo((s-h)*(Math.cos(f-l)+Math.cos(0-l))/2,(c-p)*(Math.sin(f-l)+Math.sin(0-l))/2);for(var d=1;d<i;d++)e.lineTo(s*Math.cos(f*d-l),c*Math.sin(f*d-l)),e.lineTo((s-h)*(Math.cos(f*(d+1)-l)+Math.cos(f*d-l))/2,(c-p)*(Math.sin(f*(d+1)-l)+Math.sin(f*d-l))/2);e.closePath(),e.restore()}}},{key:"controls",get:function(){var e=this.model,t=e.cx,n=e.cy,r=e.ry;return[{x:t,y:n-r+r*(e.ratio/100),handler:s}]}},{key:"nature",get:function(){return u}}]),t}();t.default=c,o.default.memoize(c.prototype,"controls",!1),o.default.register("star",c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(0)),i=u(n(5)),a=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}var s={mutable:!1,resizable:!0,rotatable:!1,properties:[]},c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,a.default)(i.default)),r(t,[{key:"render",value:function(e){var t=this.bounds,n=t.left,r=t.top,o=t.width,i=t.height;e.beginPath(),e.rect(n,r,o,i)}},{key:"text",get:function(){return this.get("id")},set:function(e){}},{key:"rotatable",get:function(){return!1}},{key:"nature",get:function(){return s}}]),t}();t.default=c,o.default.register("variable",c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(3),i=n(77);t.default=function(e){return function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),r(n,[{key:"animOnValueChange",value:function(e){var t=this;if(e!=this._lastValue){var n=e-(this._lastValue||0);this._lastValue=e,this._anim_alpha=-n,this.animate({step:function(e){t._anim_alpha=n*(e-1),t.invalidate()},duration:1e3,delta:"circ",options:{x:1},ease:"out"}).start()}}},{key:"dispose",value:function(){(function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"dispose",this).call(this),delete this._value_substitutor}},{key:"onchange",value:function(e,t){e.hasOwnProperty("value")&&delete this._value_substitutor}},{key:"defaultValueSubstitutor",value:function(){return this.getState("value")}},{key:"animAlpha",get:function(){return this._anim_alpha||0}},{key:"animValue",get:function(){return(this._lastValue||0)+(this._anim_alpha||0)}},{key:"valueSubstitutor",get:function(){return this._value_substitutor||(this._value_substitutor=(0,i.buildSubstitutor)(this.getState("value"),this)||this.defaultValueSubstitutor),this._value_substitutor}},{key:"value",get:function(){return Number(this.valueSubstitutor())||0},set:function(e){delete this._value_substitutor,this.setState("value",Number((0,o.objToVal)(e)))}}]),n}()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){return function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),r(n,[{key:"_convertDataFormat",value:function(e,t){var n;switch(t){case"json":n=JSON.parse(e);break;default:n=e}return n}}]),n}()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(243);Object.defineProperty(t,"ModelLayer",{enumerable:!0,get:function(){return c(r).default}});var o=n(249);Object.defineProperty(t,"GuideLayer",{enumerable:!0,get:function(){return c(o).default}});var i=n(250);Object.defineProperty(t,"ShiftLayer",{enumerable:!0,get:function(){return c(i).default}});var a=n(251);Object.defineProperty(t,"SelectionLayer",{enumerable:!0,get:function(){return c(a).default}});var u=n(252);Object.defineProperty(t,"ModelingLayer",{enumerable:!0,get:function(){return c(u).default}});var s=n(260);function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"TagLayer",{enumerable:!0,get:function(){return c(s).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},i=p(n(0)),a=(p(n(8)),p(n(14))),u=(n(1),h(n(27)),p(n(84))),s=h(n(86)),c=h(n(244)),l=n(38),f=n(2);function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}var d={x:1,y:1},y={x:0,y:0},v=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"dispose",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),delete this._canvas,delete this._overlay}},{key:"contains",value:function(e,t){return!0}},{key:"isRootModel",value:function(){return!0}},{key:"createElement",value:function(){var e=document.createElement("div");return e.style.position="absolute",e.style["user-select"]="none",e.style.overflow="hidden",this._canvas=i.default.createCanvas(1,1),this._canvas.style.position="absolute",e.appendChild(this._canvas),this._overlay&&e.appendChild(this._overlay),e}},{key:"resize",value:function(){this.fitSize(this.element),this.fitSize(this.canvas)}},{key:"capturePath",value:function(e,t){for(var n=this.layout.capturables(this),r=n.length-1;r>=0;r--){var o=n[r];if(o.isContainer()){var i=o.capturePath(e,t);if(i)return i}}return!1}},{key:"postrender",value:function(e){if(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postrender",this).call(this,e),!l.License.valid){this._watermark||(this._watermark=new Image,this._watermark.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJsAAAAjCAMAAAC0JoimAAACQ1BMVEVHcEwODw+xHySxHySxHySxHyRYWFldR0mxHyRLS0wPEBAPEBBYWFmxHiNYWFlYWFlYWFm0HyRYWFlYWFlYWFmxHySxHySxHyRYWFkPEBAODw9YWFlYWFm9QkYPEBAPEBBYWFlYWFmxHyRYWFmxHyQPEBBYWFlYWFlYWFkPEBAPEBBYWFlYWFlYWFlYWFkOEA+xHyQPEBD///9YWFmxHyRYWFlYWFlYWFlYWFkPEBBYWFn89vaxHyRYWFlYWFmxHyRYWFkPEBAPEBAPEBCxHySxHyQOEA8OEA+xHyRYWFmxHyRYWFkOEA9YWFmxHySxHyS8PUEPEBCxHyQOEA+xHyRYWFkPEBBYWFlYWFkPEBAPEBDz3d757u4PEBAPEBAPEBCxHySxHSIPEBDTgIMPEBCxHyQPEBAPEBBYWFkOEA+xHySyHySxHyQPEBAPEBCwHCHCT1OxHySxHyQPEBDksbPeoKLKZmmxHyS6ODwPEBAOEA/XjZD/8fHnmpz/2Njll5n+7e3/09S+PkL8y8zae37ikJL2vb7wra/fiIryzs+xHyQPEBCvGR6xHSL///+wGyCsEheuFRqyHySuFxy0HyWsHSK6NzvakZTARkq3MDTuztBwEhGzJCmWGRzipKe1Ky/XhIfBSk7CT1PkrrDNZ2r14ODw09T35uf9+fnIXmLRc3Xy2NnrwcOiHB/+/Px5ExP67++ZGh3ObnHcm525MzeMFxnovb7nt7ntycqTGRtsERDRen1oEA6XGh1qERBpEQ/HVFjdAcS7AAAAfHRSTlMAEw4E93sNAaQEB9er2D4YhRIRIpyfwMQICg5Fev2i+VejKn8J3l9lM8z1iybgLr/Shfa9VimRbks+tv5Jc81ul8fSY3XoJKmV87QdHlJm769ayXYjQbY5aUZx/fvmTl3gXtH88B17KsJujRU4VZCI9qw+M+r29vPGKK/+ZLYwnwAACHRJREFUeF68lklvGkkUx4tNGBCHHIxlJINkwcG+GCQuyEiIsFkIGQUjS3bGGHucWDGxo2QOaJxv8Kp6Be/77uz7PttHm6qmCTTt4Mxh+KtV23tS/fTqva5CVPfHSuZkJuRD16vwIGDOucaNqDsyJcxQq9Vk6Clf6xtK1l1dg91hi4Isv9h7sybDw+siF6nUXWuQv9MNtMGKDB92dnZevajBeGfXcgC+uy51g+0ByB++0g2/vlqTXTc6us5B7YvqWit141QD8trOX1+p/tirmTtv2COvvfpbcf0iQwj9tGyGn3KzRqIhbXDM8tqfivZeALh6OikHa2/2Gq6JxsbBdLCfDex3V9lAr9TqUFy7YrQ8XNLntikPyUEtG0CtLhmuV9PVguqyz2CHmw36h7BfG6D+8PQi7YoYx3SJWzLq2VxQ0rE1RCRJgB+KEzhoqsnmwEN1thF8U8s2gfEU7bLp2C0txY0+cP4nNkFaPz46ELkfkEkSEFH4KTa3erTT2BvWJp77Sjajr5XNqGPjpM2T2xcX5++2qleRkYPD59uf94+IcBWbwmJT2GzF9JBjfnIZIcOqA+PYZBAtpienmcMUtcRWFrVs1khP3hnIhOpszvuWfKAvYdKwcdLpa17R+cAVcNXjZ4pxdAM4Pdt8ykCVjTE2gwMPL2DsnUZZL2YaQWGM0xQiOIwx/WaKGjZjHsw5AEhYGVvSCUw9plY2svkLr2r7QHes0sBZw/qY6Nm8fkXDjM0ej6fc4ZvYn7Uvp7E3ODuFwsPYg9AsxkPF1L1h7E9pznQ8WjDeD0CywNggmXgUTQKMt7IJn+i+r08+XdLuVwJaCfIJ39DosaRja6iRb4asB3uLrBZYvtXZbPN44Tc6CWI80Z5v5cISQISxmRnUnBkyviYbtz7K8xfHsHtK4bZJW+CqA5f8+fGT2xsDGy/5dyLXzuaP35qdvRV3KGzuidjMDD07Wpp3sXeqwZZawJN2OlnEeFXDZoz2lZIVgND3OvWVIHCnyUaevOT5DUkgQON39l4Ajcgpz78VxX92xd0z/uOuoKsFe7MWaNZh/+S8jo01VlbDNAOtLWxlF0DJlW9lQ05wFrRs7Cw5bp/Gb520sX2jxipwQNYv+M9bpNM/ZAV771lRXMf2O41bfz1u6Za4WS0AFhOKtLIZS5AvN9mETXqWn3erEt2cfya3nymN2+0twgnixksWt05s89hPZ0GFbQLjZZWNubF8o+z4nsJWL0VfBnI+hKIqm3mOVYcZek3lRNSn1oLM/hEfT5+e025fgvZ8G6XG95Lw7ZKn+Qad2EawN+6OL2A8i1j0YrNhhU2ZzE8Zpr34Zpax5XrHmIw9AFFjKAcwx9igknhkyUElgnrpuspG3jYrcUAArThgdXr2lLWvj9rqtF97nxaHMZWDRQelaEczP8waZAtSCzNNKfepKlOkwjonQAL5AuCkBgaIUB/AksomwL6KdvmUQIf/22EVtGy2oEd9h0wog+V0bHIiteJRMs0zMjKNUh5PnDkUPSOx1btZ5R3Sq8qHIg/7MpbCWG8E+Sy9ocKYy0WHCEUymUGVDcjuoXIxPDslHOjhjrbrMT3kOC2bXlaDvTkxuFtNboMN6VX2ad4B6hPOZ2re9URYP318+GSrKsAVqh68Pdl+vrHZtFrQ/y9z8z4ngkDUqOkkEI7jaAPdZ6uKAhFFiZNEsSqIYsuMozOiLFXrS9Xusgncv82Y32vbVhTHDwyuuKBZQtKGQDJICCSBZDGkSRYq0vy4YTz2YmxYX0oYmDFYgLYMKsm286sLc7oxcJ0SOo84zeyWAatxCnvxn7Z7Q9YtQMbap34lLlydry4fQPeco7vsjxZFsXu82y/mk71+f7opioerZVEsVw/7/c20X+yN5sSwmhV/HD66the0ELAi3vDt1WMyigoGKku7etz24CZ5letsj072hjvT3bI8OD4YlrPRznBnMy/L/VVRlv3J/nA43wzL/dGsLJ+uDoY7/fG/2eSMxVgiCAIApjiAZDIwGDCvYakrM2B3MTAIIFIBX1pMhTjojTAXhQxdhYQvPbEGdAFqw5Ttp0Wen/06y/MXx+tB/nh0PjjfLPP8+8npID+dPBsMlotBfjZ9nOcXq1eDwWBOU9wnV2xID+qMFKM6b3IpAiusGIYnpLwNbsZ6ka4aKDQ5K41McLoucRBpHVsDT0Mmr7RqfBPAM/iOYNWJpx1Di+dt2wIuhY9Ian1Ke58HpK9ckVTxskpq64KU0LPJ+ujoglaxPxc06b4kZW1C68cpLQ0f/80mxUElaquOG2ishnoKq9R1u1YXQEgMTmIridlmxUyNe6IRSRoQMVJX06El2ZnStHstBCiI455HPJlY5ytBx0zaGapL8PXh+GR9ne23o9//k+3Fz+N//tYQy5mJUwkklVXMyEpbmRE57eASoQUNE1K+o7u6CHpb/SwBKqZhaQ2IJaQmbYHlAMKaYbAdlngUSzUcgETh65JCzhzGJxdvxrYmLdynzBWbkLjA1jqS6rpY1GucknRczutRBD2VpS6ofIUNWQ+ziuE0eDnkKJsScCqLOTMTggqGZlYRm25CPZahJVwnCMNaJAB8fvjD1puxzX48/PD1WQ1ymuAGtqsbKgJVAkaVeIVr0JDJ2mkLzK7HN3kR87bV4nQlEAEaXZmNGrxoOCk4DQ7A0lWt6YgM8TiyE0kW4KwORHfeP37yP9imlG31nAy/jD94jQaMgC93luw1GZBlABBDhAWgEgWEAJEZuRhBphPFARCTGOQQIyy6ANil73Ae9YCAWIIUElqN5YDqqztf3L29/cD3n1Wf+P697Vu+f3/L97+srn3/onru+1v3ff/29j3ff1V9fuvud99+8x68rWiy4FP5prAZIaASdRveaf0FsOq+MCErseEAAAAASUVORK5CYII=");var n=this._watermark;e.globalAlpha=.5,e.drawImage(n,this.model.width-n.width-30,this.model.height-n.height-30)}}},{key:"_repositionOverlay",value:function(){var e=this._overlay;if(e){var t=this.model,n=t.translate,r=void 0===n?y:n,o=t.scale,i=void 0===o?d:o,a=t.rotation,u=void 0===a?0:a,s=this.bounds,c=s.left,l=s.top;s.width,s.height;e.style.left=c+"px",e.style.top=l+"px";var f="rotate("+u+"rad) scale("+i.x+", "+i.y+")";e.style["margin-left"]=r.x+"px",e.style["margin-top"]=r.y+"px",["-webkit-","-moz-","-ms-","-o-",""].forEach(function(t){e.style[t+"transform"]=f})}}},{key:"onchange",value:function(e){var t=this._model;delete t.id,delete t.text,delete t.class,this._repositionOverlay()}},{key:"onchanged",value:function(e,t,n){this.invalidate()}},{key:"onmouseenter",value:function(e,n){if(this.app&&!this.app.isEditMode&&n){var r=n.origin;if(!(r instanceof t)&&r.model.event&&r.model.event.hover){var o=r.model.event.hover;o.emphasize&&c.emphasize(r),o.infoWindow&&!r.hidden&&u.default.show(r,o.infoWindow,!0),o.target&&o.hasOwnProperty("value")&&(r._lastValue=this.root.variable(o.target),this.root.variable(o.target,o.value))}}}},{key:"onmouseleave",value:function(e,t){if(this.app&&!this.app.isEditMode&&t){var n=t.origin;if(n.model.event&&n.model.event.hover){var r=n.model.event.hover;r&&(r.emphasize&&c.normalize(n),r.infoWindow&&!n.hidden&&u.default.hide(n,r.infoWindow),r.target&&r.hasOwnProperty("value")&&(this.root.variable(r.target,n._lastValue),delete n._lastValue))}}}},{key:"onclick",value:function(e,t){if(!this.app.isEditMode&&t){var n=t.origin;if(n.model.event&&n.model.event.tap){var r=n.model.event.tap;r.infoWindow&&!n.hidden&&u.default.show(n,r.infoWindow),r&&r.target&&(/^\$/.test(r.target)?this.root.variable(r.target.substring(1),n.substitute(r.value)):"popup"==r.target?s.show(n,r.value):this.trigger(r.target,n.substitute(r.value)))}}}},{key:"stuck",get:function(){return!0}},{key:"overlay",get:function(){if(!this._overlay){var e=document.createElement("div");e.style.position="absolute",e.style["user-select"]="none",e.style["transform-origin"]="top left",this.element&&this.element.appendChild(e),f.GESTURES.forEach(function(t){e.addEventListener(t,function(e){e.stopPropagation()})}),f.KEYEVENTS.forEach(function(t){e.addEventListener(t,function(e){e.stopPropagation()})}),this._overlay=e,this._repositionOverlay()}return this._overlay}},{key:"canvas",get:function(){return this._canvas}},{key:"MPP",get:function(){var e=this.model,t=e.scale,n=void 0===t?{x:1,y:1}:t;switch(e.unit){case"mm":case"cm":return 1/this.app.PPM/n.x;case"in":return 1/this.app.PPI/n.x;case"px":default:return 1/n.x}}},{key:"eventMap",get:function(){return{"(self)":{"(all)":{change:this.onchanged,mouseenter:this.onmouseenter,mouseleave:this.onmouseleave,click:this.onclick}}}}}]),t}();t.default=v,v.Popup=s,i.default.register("model-layer",v)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emphasize=function(e){if(e.hasOwnProperty("_backupStrokeStyle"))return;if(e._backupStrokeStyle=e.model.strokeStyle,e.set("strokeStyle","#f26522"),e.hasOwnProperty("_backupLineWidth"))return;e._backupLineWidth=e.model.lineWidth,e.set("lineWidth",e.model.lineWidth+5)},t.normalize=function(e){if(!e.hasOwnProperty("_backupStrokeStyle"))return;if(e.set("strokeStyle",e._backupStrokeStyle),delete e._backupStrokeStyle,!e.hasOwnProperty("_backupLineWidth"))return;e.set("lineWidth",e._backupLineWidth),delete e._backupLineWidth}},function(e,t,n){"use strict";(function(e){var r=n(246),o=n(247),i=n(248);function a(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=s.prototype:(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);s.TYPED_ARRAY_SUPPORT?(e=t).__proto__=s.prototype:e=h(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(t,n),o=(e=u(e,r)).write(t,n);o!==r&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(s.isBuffer(t)){var n=0|p(t.length);return 0===(e=u(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?u(e,0):h(e,t);if("Buffer"===t.type&&i(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=u(e,t<0?0:0|p(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|p(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function d(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(e).length;default:if(r)return N(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,o);if("number"==typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,o){var i,a=1,u=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,u/=2,s/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var l=-1;for(i=n;i<u;i++)if(c(e,i)===c(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===s)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(n+s>u&&(n=u-s),i=n;i>=0;i--){for(var f=!0,h=0;h<s;h++)if(c(e,i+h)!==c(t,h)){f=!1;break}if(f)return i}return-1}function b(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var u=parseInt(t.substr(2*a,2),16);if(isNaN(u))return a;e[n+a]=u}return a}function m(e,t,n,r){return z(N(t,e.length-n),e,n,r)}function _(e,t,n,r){return z(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return _(e,t,n,r)}function x(e,t,n,r){return z(U(t),e,n,r)}function k(e,t,n,r){return z(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function O(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function P(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,u,s,c=e[o],l=null,f=c>239?4:c>223?3:c>191?2:1;if(o+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(i=e[o+1]))&&(s=(31&c)<<6|63&i)>127&&(l=s);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(s=(15&c)<<12|(63&i)<<6|63&a)>2047&&(s<55296||s>57343)&&(l=s);break;case 4:i=e[o+1],a=e[o+2],u=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&u)&&(s=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&u)>65535&&s<1114112&&(l=s)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=f}return function(e){var t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=A));return n}(r)}t.Buffer=s,t.SlowBuffer=function(e){+e!=e&&(e=0);return s.alloc(+e)},t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return c(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?u(e,t):void 0!==n?"string"==typeof r?u(e,t).fill(n,r):u(e,t).fill(n):u(e,t)}(null,e,t,n)},s.allocUnsafe=function(e){return f(null,e)},s.allocUnsafeSlow=function(e){return f(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},s.byteLength=d,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return E(this,t,n);case"latin1":case"binary":return j(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,o){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;for(var i=o-r,a=n-t,u=Math.min(i,a),c=this.slice(r,o),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){i=c[f],a=l[f];break}return i<a?-1:a<i?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return m(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function E(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function j(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function M(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=Y(e[i]);return o}function S(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function T(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,n,r,o,i){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function I(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function B(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,i){return i||B(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function D(e,t,n,r,i){return i||B(e,0,n,8),o.write(e,t,n,r,52,8),n+8}s.prototype.slice=function(e,t){var n,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=s.prototype;else{var o=t-e;n=new s(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},s.prototype.readUInt8=function(e,t){return t||T(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||T(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||T(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||T(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},s.prototype.readInt8=function(e,t){return t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||T(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||T(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||T(e,4,this.length),o.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||T(e,4,this.length),o.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||T(e,8,this.length),o.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||T(e,8,this.length),o.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||C(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||C(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):I(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);C(this,e,t,n,o-1,-o)}var i=0,a=1,u=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===u&&0!==this[t+i-1]&&(u=1),this[t+i]=(e/a>>0)-u&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);C(this,e,t,n,o-1,-o)}var i=n-1,a=1,u=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===u&&0!==this[t+i+1]&&(u=1),this[t+i]=(e/a>>0)-u&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):I(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!s.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=s.isBuffer(e)?e:N(new s(e,r).toString()),u=a.length;for(i=0;i<n-t;++i)this[i+t]=a[i%u]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function Y(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function U(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(t,n(30))},function(e,t,n){"use strict";t.byteLength=function(e){return 3*e.length/4-c(e)},t.toByteArray=function(e){var t,n,r,a,u,s=e.length;a=c(e),u=new i(3*s/4-a),n=a>0?s-4:s;var l=0;for(t=0;t<n;t+=4)r=o[e.charCodeAt(t)]<<18|o[e.charCodeAt(t+1)]<<12|o[e.charCodeAt(t+2)]<<6|o[e.charCodeAt(t+3)],u[l++]=r>>16&255,u[l++]=r>>8&255,u[l++]=255&r;2===a?(r=o[e.charCodeAt(t)]<<2|o[e.charCodeAt(t+1)]>>4,u[l++]=255&r):1===a&&(r=o[e.charCodeAt(t)]<<10|o[e.charCodeAt(t+1)]<<4|o[e.charCodeAt(t+2)]>>2,u[l++]=r>>8&255,u[l++]=255&r);return u},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i="",a=[],u=0,s=n-o;u<s;u+=16383)a.push(l(e,u,u+16383>s?s:u+16383));1===o?(t=e[n-1],i+=r[t>>2],i+=r[t<<4&63],i+="=="):2===o&&(t=(e[n-2]<<8)+e[n-1],i+=r[t>>10],i+=r[t>>4&63],i+=r[t<<2&63],i+="=");return a.push(i),a.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=a.length;u<s;++u)r[u]=a[u],o[a.charCodeAt(u)]=u;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function l(e,t,n){for(var o,i,a=[],u=t;u<n;u+=3)o=(e[u]<<16)+(e[u+1]<<8)+e[u+2],a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t,n){"use strict";t.read=function(e,t,n,r,o){var i,a,u=8*o-r-1,s=(1<<u)-1,c=s>>1,l=-7,f=n?o-1:0,h=n?-1:1,p=e[t+f];for(f+=h,i=p&(1<<-l)-1,p>>=-l,l+=u;l>0;i=256*i+e[t+f],f+=h,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===i)i=1-c;else{if(i===s)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),i-=c}return(p?-1:1)*a*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var a,u,s,c=8*i-o-1,l=(1<<c)-1,f=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),(t+=a+f>=1?h/s:h*Math.pow(2,1-f))*s>=2&&(a++,s/=2),a+f>=l?(u=0,a=l):a+f>=1?(u=(t*s-1)*Math.pow(2,o),a+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;e[n+p]=255&u,p+=d,u/=256,o-=8);for(a=a<<o|u,c+=o;c>0;e[n+p]=255&a,p+=d,a/=256,c-=8);e[n+p-d]|=128*y}},function(e,t,n){"use strict";var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(0)),i=c(n(14)),a=c(n(83)),u=c(n(82)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2));function c(e){return e&&e.__esModule?e:{default:e}}var l=20,f=0,h=20,p=0,d=20,y=20,v=90*Math.PI/180,g="m",b=0,m="9px Verdana",_=20,w="#f4f4f4",x="#999";function k(e,t,n){return{left:-e.x,top:-e.y,width:l,height:_}}function O(e,t,n,r){return{left:l-e.x,top:f-e.y,origin:h-e.x,width:t-l,height:_}}function P(e,t,n,r){var i={x:-e.x+p+_/2,y:-e.y+d+(n-d)/2},a=o.default.transcoordRR(-e.x+p,-e.y+d,i,v);return{left:a.x-(n-d),top:a.y,origin:y-e.y,width:n-d,height:_}}function A(e){var t=e.get("translate");return{left:-t.x,top:-t.y,width:e.canvas.width/s.DPPX,height:e.canvas.height/s.DPPX}}var E=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.appScale={x:1,y:1},"disabled"!==e.ruler&&(r.hruler=new a.default({left:l,top:f,origin:h,margin:b,height:_,unit:g,rotation:0,font:m,fillStyle:w,strokeStyle:x,capturable:!1}),r.vruler=new a.default({left:0,top:0,origin:y,margin:b,height:_,unit:g,rotation:v,font:m,side:"top",fillStyle:w,strokeStyle:x,capturable:!1}),r.origin_rect=new u.default({left:-h,top:-y,width:h,height:y,fillStyle:w,strokeStyle:x,lineWidth:1}),r.addComponent(r.hruler),r.addComponent(r.vruler),r.addComponent(r.origin_rect)),r.invalidate(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"added",value:function(e){if(this.hruler){var t=this.rootModel,n=Object.assign({},t.get("translate"));n.x<l&&(n.x+=l),n.y<d&&(n.y+=d);var r=t.get("scale")||{x:1,y:1};this.appScale=r,this.hruler.set("scale",r.x),this.vruler.set("scale",r.y),t.set("translate",n),this.set("translate",n),this.screen_coord=A(this);var o=this.screen_coord,i=o.width,a=o.height;this.hruler.set(O(n,i,0,this.hruler)),this.vruler.set(P(n,0,a,this.vruler)),this.origin_rect.set(k(n))}else this.screen_coord=A(this)}},{key:"resize",value:function(){(function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this),this.screen_coord=A(this);var e=this.screen_coord,n=e.width,r=e.height;this.hruler&&(this.hruler.set(O(this.model.translate,n,0,this.hruler)),this.vruler.set(P(this.model.translate,0,r,this.vruler)),this.origin_rect.set(k(this.model.translate)))}},{key:"render",value:function(e){if(this.guide){e.save();var t=this.guide,n=t.x,r=t.y,o=this.screen_coord,i=o.top,a=o.left,u=o.width,s=o.height;e.beginPath(),e.moveTo(n,i),e.lineTo(n,i+s),e.moveTo(a,r),e.lineTo(a+u,r),e.lineWidth=1,e.strokeStyle="tomato",e.setLineDash([2,3]),e.font="10px tahoma",e.fillStyle="#333";var c=this.transcoordS2C(n,r,this.rootModel);e.textBaseline=c.y>200?"bottom":"top",e.textAlign=c.x>200?"right":"left";var l=c.y>200?-5:5,f=c.x>200?-5:5,h=Math.round(n/this.appScale.x),p=Math.round(r/this.appScale.y);e.fillText(" "+h+", "+p+" ",n+f,r+l),e.stroke(),e.restore()}}},{key:"contains",value:function(e,t){return!0}},{key:"onmousedown_origin",value:function(e,t){this.rootModel.set("translate",{x:h,y:y})}},{key:"onchange_root_model",value:function(e,t,n){if(e.scale&&(this.appScale=e.scale,this.hruler&&(this.hruler.set("scale",e.scale.x),this.vruler.set("scale",e.scale.y))),e.translate&&this.set({translate:{x:e.translate.x,y:e.translate.y}}),e.scale||e.translate){if(this.screen_coord=A(this),this.hruler){var r=this.model.translate,o=this.screen_coord,i=o.width,a=o.height;this.hruler.set(O(r,i,0,this.hruler)),this.vruler.set(P(r,0,a,this.vruler)),this.origin_rect.set(k(r))}this._guide=null}this.invalidate()}},{key:"onmouseout_child",value:function(e){this._guide=null,this.invalidate()}},{key:"onmousemove_child",value:function(e,t){e.target&&"CANVAS"!==e.target.tagName?this.guide=null:this.guide=this.transcoordC2S(e.offsetX,e.offsetY)}},{key:"capturable",get:function(){return!1}},{key:"guide",get:function(){return this._guide},set:function(e){this._guide=e,this.invalidate()}},{key:"eventMap",get:function(){return{"(root)":{"(descendant)":{mousemove:this.onmousemove_child,mouseout:this.onmouseout_child,dragmove:this.onmousemove_child},"model-layer":{change:this.onchange_root_model}},"(self)":{"(descendant)":{mousedown:this.onmousedown_origin}}}}}]),t}();t.default=E,o.default.register("guide-layer",E)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(0)),i=u(n(14)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2));function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"added",value:function(e){var t=this.rootModel.get("translate");this.set("translate",t)}},{key:"render",value:function(e){}},{key:"contains",value:function(e,t){return!(this.app.mode!=a.MODE_SHIFT)}},{key:"onkeydown",value:function(e){32==e.keyCode&&void 0===this.before_mode&&(this.before_mode=this.app.mode,this.app.mode=a.MODE_SHIFT)}},{key:"onkeyup",value:function(e){32==e.keyCode&&(void 0!=this.before_mode&&(this.app.mode=this.before_mode),delete this.before_mode)}},{key:"ondragstart",value:function(e){this.last_position=this.transcoordC2S(e.offsetX,e.offsetY)}},{key:"ondragmove",value:function(e){var t=this.transcoordC2S(e.offsetX,e.offsetY),n=t.x,r=t.y;this.rootModel.move({x:n-this.last_position.x,y:r-this.last_position.y}),this.last_position=this.transcoordC2S(e.offsetX,e.offsetY)}},{key:"eventMap",get:function(){return{"(root)":{"(self)":{keydown:this.onkeydown,keyup:this.onkeyup}}}}}]),t}();t.default=s,o.default.register("shift-layer",s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(0)),i=(u(n(8)),u(n(28)),u(n(14))),a=n(1);function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,r){var o=e.selected,i=r?o.slice(0):[];r&&i.length>0?t=i[0].parent:t.isContainer()||(t=t.parent);var u=t.layout.capturables(t),s=!!t.layout.joinType;if(r&&n.selected.forEach(function(e){i.splice(i.indexOf(e),1)}),n.selected=[],u.forEach(function(e){e.capturable&&function(e,t,n){var r,o,i,u,s=t.sx,c=t.sy,l=t.ex,f=t.ey;if(s>l?(r=l,o=s):(r=s,o=l),c>f?(i=f,u=c):(i=c,u=f),n){var h=e.bounds,p=e.transcoordS2TR(h.left,h.top),d=e.transcoordS2TR(h.left+h.width,h.top+h.height),y=p.x,v=d.x,g=p.y,b=d.y,m=Math.min(r,y,o,v),_=Math.max(r,y,o,v),w=Math.min(i,g,u,b),x=Math.max(i,g,u,b);return!(_-m>Math.abs(o-r)+Math.abs(v-y)||x-w>Math.abs(u-i)+Math.abs(b-g))}var k=e.path;if(!k)return(0,a.error)("컴포넌트에 get path가 잘못 구현되어있음.",e),!1;for(var O=0;O<k.length;O++){var P=e.transcoordS2TR(k[O].x,k[O].y);if(r>P.x||o<P.x||i>P.y||u<P.y)return!1}return!0}(e,n,s)&&-1==i.indexOf(e)&&n.selected.push(e)}),i=i.concat(n.selected),o.length!==i.length)e.selected=i;else for(var c=0;c<i.length;c++)if(o[c]!=i[c]){e.selected=i;break}}function c(e,t,n,r,o){o||s(e,t,n,r)}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"added",value:function(e){var t=this.rootModel,n=t.get("translate"),r=t.get("scale");this.set("translate",n),this.set("scale",r)}},{key:"contains",value:function(e,t){return!1}},{key:"render",value:function(e){var t=this.selbox;if(t){var n=t.sx,r=t.sy,o=t.ex,i=t.ey,a=this.get("scale")||{x:1,y:1};e.beginPath(),e.rect(n,r,o-n,i-r),e.setLineDash([2/a.x,4/a.y]),e.lineWidth=1/a.x,e.strokeStyle="black",e.stroke()}}},{key:"onkeydown",value:function(e,t){t.origin;var n=t.deliverer,r=n.selected;if(1!=r.length)return!1;var o=r[0],i=o.parent;if(!i||i===n)return!1;if("Tab"==e.code){if("Tab"!=e.code)return!1;var u=i.layout.capturables(i),s=u.indexOf(o);if(-1==s){if(!i.indexOf(o))return(0,a.warn)("Container not contains [",o,"] as a component"),!1;s=0}var c=u.length;e.shiftKey?s--:s++,o=u[(s+c)%c]}else{if(!i.layout.keyNavigate)return!1;o=i.layout.keyNavigate(i,o,e)||o}n.selected=[o],e.preventDefault()}},{key:"onchange_root_model",value:function(e,t,n){e.translate&&this.set("translate",e.translate),e.scale&&this.set("scale",e.scale)}},{key:"_pendingDecision",value:function(e){this.downpoint={x:e.offsetX,y:e.offsetY}}},{key:"_selectGroupItem",value:function(e,t){for(var n=this.selected.indexOf(e),r=e.parent;r.parent.isGroup();)r=r.parent;var o=[],i=!1,a=!1;if(this.selected.forEach(function(e){var t=e.parent;if(e!==r){for(;t.parent.isGroup();)t=t.parent;t===r&&(o.push(e),i=!0)}else a=!0}),i)if(t.shiftKey){if(-1!=n)return void this._pendingDecision(t);o.push(e)}else{if(-1!=n)return void this._pendingDecision(t);o=[e]}else if(a)return void this._pendingDecision(t);this.selected=o}},{key:"onmousedown_comp",value:function(e,t){var n=t.origin;if(this.downpoint=null,e.shiftKey){if(n.parent.isGroup())return void this._selectGroupItem(n,e);if(-1!=this.selected.indexOf(n))return void this._pendingDecision(e);var r=this.selected.filter(function(e){return!e.isRootModel()&&!!e.parent}),o=r.length>0&&r[0].parent;if(o&&o!==n.parent)return void(n.parent.isGroup()&&this._pendingDecision(e));r.push(n),this.selected=r}else{if(-1!=this.selected.indexOf(n))return;this.selected=[n]}}},{key:"onmouseup_comp",value:function(e,t){if(this.downpoint&&this.downpoint.x===e.offsetX&&this.downpoint.y===e.offsetY){var n=t.origin,r=this.selected.indexOf(n);if(-1==r&&n.parent.isGroup()&&(r=this.selected.indexOf(n.parent)),-1!==r&&e.shiftKey){var o=this.selected.slice();return r>-1&&o.splice(r,1),void(this.selected=o)}n.parent.isGroup()&&(this.selected=[n])}}},{key:"ondragstart_selbox",value:function(e,t){if(t.origin.stuck){var n=this.transcoordC2S(e.offsetX,e.offsetY),r=n.x,o=n.y;this.selbox={sx:r,sy:o,selected:[]}}}},{key:"ondragmove_selbox",value:function(e,t){var n=t.origin;if(n.stuck){var r=this.transcoordC2S(e.offsetX,e.offsetY),o=r.x,i=r.y;t.deliverer;if(this.selbox){this.selbox.ex=o,this.selbox.ey=i;c(this,n,this.selbox,e.shiftKey),this.invalidate()}}}},{key:"ondragend_selbox",value:function(e,t){t.origin.stuck&&(this.last_pos=null,this.selbox=null,c(this,null,null,!1,!0),this.invalidate())}},{key:"eventMap",get:function(){return{"(root)":{"(self)":{keydown:this.onkeydown}},"model-layer":{"(self)":{change:this.onchange_root_model},"(all)":{dragstart:this.ondragstart_selbox,dragmove:this.ondragmove_selbox,dragend:this.ondragend_selbox,mousedown:this.onmousedown_comp,mouseup:this.onmouseup_comp}}}}}]),t}();t.default=l,o.default.register("selection-layer",l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=h(n(0)),i=(h(n(28)),h(n(14))),a=f(n(17)),u=f(n(253)),s=h(n(7)),c=h(n(15)),l=f(n(2));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function h(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=new u.PathHandler(r),i=new u.ControlHandler(r),a=new u.Resizer(r),s=new u.Rotator(r);return r._modelers=[o,i,a,s],r._control_mode_modelers=[i,o,a,s],r.focusOutline=new u.FocusOutline(r),r.groupOutline=new u.GroupOutline(r),r._reversed_modelers=r._modelers.slice().reverse(),r._control_mode_reverse_modelers=r._control_mode_modelers.slice().reverse(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"added",value:function(e){var t=this.rootModel,n=t.get("translate"),r=t.get("scale");this.set("translate",n),this.set("scale",r)}},{key:"contains",value:function(e,t){if(this._state_dragging)return!0;this.modelers.forEach(function(e){return e.reset()});for(var n=this.selected.filter(function(e){return!!e.parent}),r=this.get("scale")||{x:1,y:1},o=0;o<n.length;o++)for(var i=n[o],a=i.transcoordT2S(e,t),u=0;u<this.modelers.length;u++){var s=this.modelers[u];if(s.contains(a.x,a.y,i,r))return this.currentModeler=s,!0}return!1}},{key:"_componentDrawer",value:function(e,t,n,r){var o=[],i=t.parent;if(t.isRootModel())return e.save(),r(e,t,n),void e.restore();for(;i&&!i.isRootModel();)o.push(i),i=i.parent;e.save(),o.reverse().forEach(function(t){var n=t.rotatePoint;e.translate(n.x,n.y);var r=t.get("scale");r&&e.scale(r.x,r.y),e.rotate(t.get("rotation")),e.translate(-n.x,-n.y);var o=t.bounds;e.translate(o.left,o.top)});var a=t.rotatePoint;e.translate(a.x,a.y);var u=t.get("scale");u&&e.scale(u.x,u.y),e.rotate(t.get("rotation")),e.translate(-a.x,-a.y),r(e,t,n),e.restore()}},{key:"prerender",value:function(e){var t=this.model,n=t.translate,r=t.scale,o=void 0===r?{x:1,y:1}:r,i=t.rotation;e.save(),e.beginPath(),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.rect(0,0,e.canvas.width,e.canvas.height),e.fillStyle="black",e.globalAlpha=.5,e.fill(),e.restore(),n&&e.translate(n.x*l.DPPX,n.y*l.DPPX),e.scale(o.x*l.DPPX,o.y*l.DPPX),i&&e.rotate(i),e.clearRect(0,0,this.rootModel.get("width"),this.rootModel.get("height"))}},{key:"render",value:function(e){var t=this;e.beginPath();var n=this.get("scale")||{x:1,y:1},r=this.selected.filter(function(e){return!!e.parent});if(this.focused&&this._componentDrawer(e,this.focused,n,function(e,n,r){t.focusOutline.draw(e,n,r)}),r.length>0&&r[0].parent.isGroup()){for(var o=r[0].parent;o.parent.isGroup();)o=o.parent;this._componentDrawer(e,o,n,function(e,n,r){t.groupOutline.draw(e,n,r)})}r.forEach(function(r){t._componentDrawer(e,r,n,function(e,n,r){t.reversedModelers.forEach(function(t){return t.draw(e,n,r)})})})}},{key:"onkeydown",value:function(e){"Alt"==e.key&&(this._control_mode=!0,this.invalidate())}},{key:"onkeyup",value:function(e){"Alt"==e.key&&(this._control_mode=!1,this.invalidate())}},{key:"onselected",value:function(e,t){this.invalidate()}},{key:"onchange_model",value:function(e,t,n){n.origin===n.deliverer&&(e.translate&&this.set("translate",e.translate),void 0!==e.rotation&&this.set("rotation",e.rotation),e.scale&&this.set("scale",e.scale)),this.invalidate()}},{key:"ondblclick",value:function(e){"function"==typeof this.currentModeler.ondblclick&&this.currentModeler.ondblclick(e),this.invalidate()}},{key:"onmousedown",value:function(e){this.currentModeler.onmousedown(e),this.invalidate()}},{key:"onmouseup",value:function(e){"function"==typeof this.currentModeler.onmouseup&&this.currentModeler.onmouseup(e),this.invalidate()}},{key:"onmouseenter",value:function(e,t){this.invalidate()}},{key:"onmouseleave",value:function(e,t){this.invalidate()}},{key:"ondragstart",value:function(e){this.currentModeler.ondragstart(e),this._state_dragging=!0}},{key:"ondragmove",value:function(e){this.currentModeler.ondragmove(e),this.invalidate()}},{key:"ondragend",value:function(e){this._state_dragging=!1,this.currentModeler.ondragend(e),this.invalidate()}},{key:"ondrop",value:function(e,t){var n=this,r=t.origin,o=e.dataTransfer.files;if(!(o.length<1)){var i=this.rootModel.transcoordC2S(e.offsetX,e.offsetY),u=this.rootModel;Promise.all(Array.from(o).map(function(e){return new Promise(function(t,n){var r=new FileReader;r.addEventListener("loadend",function(e){t(r.result)}),["error","abort"].forEach(function(e){return r.addEventListener(e,function(e){n(e)})}),r.readAsDataURL(e)})})).then(function(t){if(e.altKey)return s.default.around(n.app.commander,function(){r.ondropfile(o,t)}),void(n.selected=[r]);var l=[],f=t.map(function(e,t){var n=void 0;return o[t].type.startsWith("image/")?(n=a.compile({type:"image-view",top:0,left:0,width:200,height:200,src:e},u.app),l.push(new Promise(function(t,r){var o=new Image;o.src=e,o.onload=function(){n.set({width:o.width,height:o.height}),t()},o.onerror=function(e){r(e)}}))):o[t].type.startsWith("audio/")&&(n=a.compile({type:"audio",top:0,left:0,width:20,height:20,src:e},u.app)),n&&(n.center=i,i.x+=50,i.y+=50),n}).filter(function(e){return e}).map(function(e){return{component:e,to_container:u}});f.length>0&&Promise.all(l).then(function(){n.app.commander.execute(new c.default({changes:f})),n.selected=f.map(function(e){return e.component})},function(e){console.error(e)})},function(e){console.error(e)})}}},{key:"onwheel_scale",value:function(e,t){if(0!=e.deltaY||0!=e.deltaX){var n=t.deliverer;if(e.shiftKey){if(-1!=navigator.userAgent.indexOf("Win"))var r=e.deltaY<0?1:-1;else r=e.deltaX<0?1:-1;s.default.around(this.app.commander,function(){n.selected.forEach(function(e){var t=e.get("fontSize")||l.DEFAULT.FONT_SIZE;t<1&&(t=1),t+=r,e.set("fontSize",t)})})}else{r=e.deltaY<0?1:-1;var o=n.get("scale")||{x:1,y:1},i=n.get("translate"),a=e.offsetX,u=e.offsetY,c=n.transcoordC2S(a,u),f=.1*r,h={x:o.x+f,y:o.y+f};if(r<0&&o.x<.2||r>0&&o.x>10)return;n.set("scale",h);var p=n.transcoordC2S(a,u);n.set("translate",{x:i.x+(p.x-c.x)*h.x,y:i.y+(p.y-c.y)*h.y})}}}},{key:"modelers",get:function(){return this._control_mode?this._control_mode_modelers:this._modelers}},{key:"reversedModelers",get:function(){return this._control_mode?this._control_mode_reverse_modelers:this._reversed_modelers}},{key:"eventMap",get:function(){return{"model-layer":{"(all)":{change:this.onchange_model,wheel:this.onwheel_scale,drop:this.ondrop}},"(root)":{"(self)":{selected:this.onselected,keydown:this.onkeydown,keyup:this.onkeyup}}}}}]),t}();t.default=p,o.default.register("modeling-layer",p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(254);Object.defineProperty(t,"FocusOutline",{enumerable:!0,get:function(){return c(r).default}});var o=n(255);Object.defineProperty(t,"GroupOutline",{enumerable:!0,get:function(){return c(o).default}});var i=n(256);Object.defineProperty(t,"ControlHandler",{enumerable:!0,get:function(){return c(i).default}});var a=n(257);Object.defineProperty(t,"PathHandler",{enumerable:!0,get:function(){return c(a).default}});var u=n(258);Object.defineProperty(t,"Resizer",{enumerable:!0,get:function(){return c(u).default}});var s=n(259);function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Rotator",{enumerable:!0,get:function(){return c(s).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layer=t}return r(e,[{key:"draw",value:function(e,t,n){var r=t.bounds;0!=r.width&&0!=r.height&&(e.beginPath(),e.rect(r.left,r.top,r.width,r.height),e.clip(),e.beginPath(),e.strokeStyle="#f26522",e.lineWidth=4,e.shadowBlur=10,e.shadowColor="black",e.shadowOffsetX=0,e.shadowOffsetY=0,e.rect(r.left,r.top,r.width,r.height),e.stroke(),e.closePath())}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layer=t}return r(e,[{key:"draw",value:function(e,t,n){var r=t.bounds;e.beginPath(),e.rect(r.left,r.top,r.width,r.height),e.setLineDash([3/n.x,4/n.y]),e.lineWidth=1/n.x,e.strokeStyle="black",e.stroke(),e.setLineDash([]),e.closePath()}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(7),a=(r=i)&&r.__esModule?r:{default:r};var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layer=t}return o(e,[{key:"reset",value:function(){this.active=null}},{key:"contains",value:function(e,t,n,r){var o=this,i=n.controls;return!!i&&(i.every(function(i,a){return Math.abs(e-i.x)<=4/r.x&&Math.abs(t-i.y)<=4/r.y&&(o.active={component:n,index:a,handler:i.handler}),!o.active}),!!this.active)}},{key:"draw",value:function(e,t,n){var r=t.controls;r&&r.forEach(function(t,r){e.beginPath(),e.lineWidth=1/n.x,e.ellipse(t.x,t.y,4/n.x,4/n.y,0,0,2*Math.PI,!0),e.fillStyle="#ff5d72",e.fill(),e.strokeStyle="#fff",e.stroke()})}},{key:"onevent",value:function(e,t){var n=this.active,r=n.handler,o=n.component,i=n.index,a=o.transcoordC2S(t.offsetX,t.offsetY);a=o.transcoordS2P(a.x,a.y),r&&"function"==typeof r[e]&&r[e](a,i,o)}},{key:"onmousedown",value:function(e){this.onevent("onmousedown",e)}},{key:"ondragstart",value:function(e){var t=this.active;t.changes=a.default.before([t.component]),this.onevent("ondragstart",e)}},{key:"ondragmove",value:function(e){this.onevent("ondragmove",e)}},{key:"ondragend",value:function(e){this.onevent("ondragend",e);var t=this.active,n=t.component,r=t.changes;a.default.after(r,n.app.commander),n.parent&&n.parent.calculateBounds&&n.parent.calculateBounds()}},{key:"selected",get:function(){return this.layer.selected}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(7),a=(r=i)&&r.__esModule?r:{default:r};function u(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}var s=15*Math.PI/180,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layer=t}return o(e,[{key:"reset",value:function(){this.active=null}},{key:"contains",value:function(e,t,n,r){var o=this;return!!n.mutable&&(n.path.every(function(i,a){return Math.abs(e-i.x)<=4/r.x&&Math.abs(t-i.y)<=4/r.y&&(o.active={component:n,index:a}),!o.active}),!!this.active)}},{key:"draw",value:function(e,t,n){if(t.mutable&&!t.stuck){var r=t.path,o=this.active;r.forEach(function(r,i){e.beginPath(),e.ellipse(r.x,r.y,4/n.x,4/n.y,0,0,2*Math.PI,!0),e.lineWidth=1/n.x,e.strokeStyle="#656565",e.fillStyle="#fff",o&&o.component===t&&o.index===i&&(e.strokeStyle="#fa7703",o.toFill&&(e.fillStyle="#ffb80c")),e.fill(),e.stroke()})}}},{key:"ondblclick",value:function(e){var t=this.active.component;if(t.pathExtendable){var n=t.path.slice();n.length<4||(n.splice(this.active.index,1),t.path=n)}}},{key:"onmousedown",value:function(e){this.active.toFill=!0}},{key:"ondragstart",value:function(e){var t=this.active;t.changes=a.default.before([t.component])}},{key:"ondragmove",value:function(e){var t,n,r=this.active,o=r.component,i=r.index,a=o.transcoordC2S(e.offsetX,e.offsetY);if(a=o.transcoordS2P(a.x,a.y),e.shiftKey){var c=o.path.length,l=o.isLine()&&0==i?o.path[1]:o.path[(i-1+c)%c];l=o.transcoordS2P(l.x,l.y);var f,h=0;if(c>2)o.isLine()?0==i?f=o.path[2]:1!=i&&(f=o.path[i-2]):f=o.path[(i-2+c)%c],f&&(h=u(f=o.transcoordS2P(f.x,f.y),l));var p=Math.round((u(l,a)-h)/s)*s+h;a=function(e,t,n){return{x:Math.cos(t)*n+e.x,y:Math.sin(t)*n+e.y}}(l,p,(t=l,n=a,Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y))))}o.mutatePath(null,function(e){e[i]=a})}},{key:"ondragend",value:function(e){var t=this.active,n=t.component,r=t.changes;a.default.after(r,n.app.commander),n.parent&&n.parent.calculateBounds&&n.parent.calculateBounds()}},{key:"selected",get:function(){return this.layer.selected}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=0,i=1,a=2,u=3,s=4,c=5,l=6,f=7;function h(e,t,n){var r,h,p=e.bounds,d=p.left,y=p.top,v=p.width,g=p.height;switch(t){case o:r=d,h=y;break;case i:r=d+v/2,h=y;break;case a:r=d+v,h=y;break;case u:r=d+v,h=y+g/2;break;case s:r=d+v,h=y+g;break;case c:r=d+v/2,h=y+g;break;case l:r=d,h=y+g;break;case f:r=d,h=y+g/2}var b=r,m=h,_=e.transcoordT2S(n.x,n.y);return{dx:_.x-b,dy:_.y-m}}function p(e,t,n,r,h,p){var d=e.bounds,y=d.left,v=d.top,g=d.width,b=d.height,m={left:y,top:v,width:g,height:b};switch(t){case o:y+=r,v+=h,g-=r,b-=h;break;case i:v+=h,b-=h;break;case a:v+=h,g+=r,b-=h;break;case u:g+=r;break;case s:g+=r,b+=h;break;case c:b+=h;break;case l:y+=r,g-=r,b+=h;break;case f:y+=r,g-=r}if(e.mutateBounds(function(t){return Math.abs(g)<=.001&&(g=.001),Math.abs(b)<=.001&&(b=.001),e.adjustResize({left:y,top:v,width:g,height:b},m,n)},this),e.isContainer()&&e.layout.ABSOLUTE&&!e.isGroup()){var _=m.left-y,w=m.top-v;p?e.components.forEach(function(e){e.delta("tx",0),e.delta("ty",0),e.move({x:_,y:w})}):e.components.forEach(function(e){e.delta("tx",_),e.delta("ty",w)})}else{var x=p&&e.parent;x&&x.isGroup()&&group.calculateBounds()}}function d(e){var t=e.left,n=e.top,r=e.width,o=e.height,i=t+r/2,a=n+o/2,u=t+r,s=n+o;return[{x:t,y:n},{x:i,y:n},{x:u,y:n},{x:u,y:a},{x:u,y:s},{x:i,y:s},{x:t,y:s},{x:t,y:a}]}var y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layer=t}return r(e,[{key:"reset",value:function(){this.active=null}},{key:"contains",value:function(e,t,n,r){var o=this;return!!n.resizable&&(d(n.bounds).every(function(i,a){return Math.abs(e-i.x)<=4/r.x&&Math.abs(t-i.y)<=4/r.y&&(o.active={component:n,index:a}),!o.active}),!!this.active)}},{key:"draw",value:function(e,t,n){if(!t.isLine()){var r=t.bounds;if(e.beginPath(),e.rect(r.left,r.top,r.width,r.height),e.setLineDash([3/n.x,4/n.y]),e.lineWidth=1/n.x,e.strokeStyle="black",e.stroke(),e.setLineDash([]),t.resizable){var o=this.active;d(r).forEach(function(r,i){e.beginPath(),e.rect(r.x-4/n.x,r.y-4/n.y,8/n.x,8/n.y),e.setLineDash([0,0]),e.strokeStyle="#656565",e.stroke(),e.fillStyle="#fff",o&&o.component===t&&o.index===i&&(e.strokeStyle="#fa7703",o.focus&&(e.fillStyle="#ffb80c")),e.fill(),e.stroke()})}}}},{key:"onmousedown",value:function(e){this.active.focus=!0}},{key:"ondragstart",value:function(e){var t=this.active.component;this.active.bounds=t.bounds,this.active.boundsList=this.layer.selected.filter(function(e){return e.resizable}).map(function(e){return e.bounds})}},{key:"ondragmove",value:function(e){var t=this.active,n=t.component,r=t.index,o=t.boundsList,i=t.bounds,a=this.layer.transcoordC2S(e.offsetX,e.offsetY);n.bounds=i;var u=h(n,r,a);this.layer.selected.filter(function(e){return e.resizable}).forEach(function(t,n){t.bounds=o[n],p(t,r,e.shiftKey,u.dx,u.dy,!1)})}},{key:"ondragend",value:function(e){var t=this.active,n=t.component,r=t.index,o=t.boundsList,i=t.bounds,a=this.layer.transcoordC2S(e.offsetX,e.offsetY);n.bounds=i;var u=h(n,r,a);this.layer.selected.filter(function(e){return e.resizable}).forEach(function(t,n){t.bounds=o[n],p(t,r,e.shiftKey,u.dx,u.dy,!0)}),this.active.component.app.commander.execute(null,!1)}},{key:"selected",get:function(){return this.layer.selected}}]),e}();t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();o(n(0)),o(n(7));function o(e){return e&&e.__esModule?e:{default:e}}var i=20,a=2*Math.PI,u=Math.PI/2;function s(e,t){var n=e.bounds;return{x:n.left+n.width/2,y:n.top-i/t.y}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layer=t}return r(e,[{key:"reset",value:function(){this.active=null}},{key:"contains",value:function(e,t,n,r){if(!n.rotatable)return!1;var o=s(n,r);return Math.abs(e-o.x)<=4/r.x&&Math.abs(t-o.y)<=4/r.y&&(this.active={component:n},!0)}},{key:"draw",value:function(e,t,n){if(t.rotatable){e.beginPath();var r=s(t,n);e.lineWidth=1.5/n.x,e.moveTo(r.x,r.y+i/n.y),e.lineTo(r.x,r.y),e.strokeStyle="#656565",e.stroke(),e.beginPath(),e.ellipse(r.x,r.y,4/n.x,4/n.y,0,0,a,!0),e.stroke(),e.fillStyle="#fff",e.fill();var o=this.active;o&&o.component===t&&(e.strokeStyle="#fa7703",e.stroke(),o.toFill&&(e.fillStyle="#ffb80c",e.fill()))}}},{key:"onmousedown",value:function(e){this.active.toFill=!0}},{key:"ondragstart",value:function(e){var t=this.active;t.component;t.start_rotation=t.component.get("rotation"),t.rotations=this.layer.selected.filter(function(e){return e.rotatable}).map(function(e){return e.get("rotation")})}},{key:"ondragmove",value:function(e){var t=this.active.component,n=t.transcoordC2S(e.offsetX,e.offsetY);n=t.transcoordS2P(n.x,n.y);var r=t.rotatePoint,o=t.get("rotation")||0,i=Math.atan((r.y-n.y)/(r.x-n.x)),s=(i=r.x>=n.x?i-u:u+i)-o;this.layer.selected.filter(function(e){return e.rotatable}).forEach(function(t,n){var r=((t.get("rotation")||0)+s)%a;t.set("rotation",t.adjustRotation(r,e.shiftKey))})}},{key:"ondragend",value:function(e){var t=this.active,n=t.component;t.rotations;n.app.commander.execute(null,!1)}},{key:"selected",get:function(){return this.layer.selected}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=a(n(0)),i=a(n(14));!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(2));function a(e){return e&&e.__esModule?e:{default:e}}var u=225*Math.PI/180,s=135*Math.PI/180,c=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r._anim_alpha=1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"_drawArrow",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=n.x-t.x,i=n.y-t.y,a=Math.atan2(i,o),c=n.x+r*Math.cos(a+u),l=n.y+r*Math.sin(a+u),f=n.x+r*Math.cos(a+s),h=n.y+r*Math.sin(a+s);e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.moveTo(n.x,n.y),e.lineTo(c,l),e.moveTo(n.x,n.y),e.lineTo(f,h),e.stroke()}},{key:"animOnTargetChange",value:function(e){var t=this;e!==this._lastTargets&&(this._lastTargets=e,this._anim_alpha=1,this.animate({step:function(e){t._anim_alpha=1-e*e,t.invalidate()},duration:5e3,delta:"linear",options:{x:1},ease:"out"}).start())}},{key:"render",value:function(e){var t=this,n=this.targets&&this.targets.filter(function(e){return e.rootModel});if(!n||0==n.length)return this._animate&&this._animate.stop(),void delete this._animate;var r=!1;n.forEach(function(n){var o=n.get("id");if(e.globalAlpha*=t._anim_alpha,o){var i="#"+o,a=n.bounds,u=a.left,s=a.top,c=n.transcoordS2C(u,s,n.rootModel),l=c.x,f=c.y;l=Math.max(l,0),f=Math.max(f-18,0),e.font="12px Arial";var h=e.measureText(i);e.fillStyle="#FF0000",e.fillRect(l,f,h.width+6,16),e.fillStyle="white",e.fillText(i,l+3,f+13),r=!0}e.lineWidth=2,e.strokeStyle="orange",n.mappings&&n.mappings.forEach(function(o){var i=t.root.findAll(o.target,n);i&&i.forEach(function(r){var o=n.center,i=r.center;o=n.transcoordS2C(o.x,o.y,n.rootModel),i=r.transcoordS2C(i.x,i.y,r.rootModel),t._drawArrow(e,o,i)}),r=!0})}),r&&this.animOnTargetChange(this.targets)}},{key:"_ontag",value:function(e){this.targets&&-1!==this.targets.lastIndexOf(e)||(this.targets=(this.targets||[]).concat(e))}},{key:"_offtag",value:function(e){if(this.targets){var t=this.targets.slice();t.splice(this.targets.lastIndexOf(e),1),this.targets=t}}},{key:"_resettag",value:function(){this.targets=[]}},{key:"ontagreset",value:function(e,t){this._resettag()}},{key:"ontag",value:function(e,t){this._ontag(t.origin)}},{key:"offtag",value:function(e,t){this._offtag(t.origin)}},{key:"onmouseenter",value:function(e,t){this._resettag(),this._ontag(t.origin)}},{key:"onmouseleave",value:function(e,t){this._resettag()}},{key:"targets",get:function(){return this._targets},set:function(e){this._targets=e&&e.filter(function(e){return!e.isLayer()}),this.invalidate()}},{key:"eventMap",get:function(){return{"model-layer":{"(descendant)":{tag:this.ontag,tagreset:this.ontagreset,mouseenter:this.onmouseenter,mouseleave:this.onmouseleave}}}}}]),t}();t.default=c,o.default.register("tag-layer",c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(262);Object.defineProperty(t,"compile",{enumerable:!0,get:function(){return(e=r,e&&e.__esModule?e:{default:e}).default;var e}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(264);Object.defineProperty(t,"Engine",{enumerable:!0,get:function(){return i(r).default}});var o=n(266);function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"UAEventHandler",{enumerable:!0,get:function(){return i(o).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(265),a=(r=i)&&r.__esModule?r:{default:r},u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(20));var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventMaps=[],this.root=t,t.eventMap&&this.add(t,t.eventMap)}return o(e,[{key:"stop",value:function(){this.eventMaps.forEach(function(e){return e.eventPump.stop()})}},{key:"add",value:function(e,t){var n=this;if(this.root){var r=function(r){var o=t[r];if("(self)"===r&&void 0===e.on)throw new Error("(self) selector not available when deliverer is not a event handlable object.");u.select(r,n.root,e).forEach(function(r){var i=new a.default(r);i.on(e,o),i.start(),n.eventMaps.push({eventPump:i,listener:e,handlerMap:t,deliverer:r})})};for(var o in t)r(o)}}},{key:"remove",value:function(e,t){for(var n=this.eventMaps.slice(0),r=0;r<n.length;r++){var o=n[r];o.listener!==e||t&&o.handlerMap!==t||(this.eventMaps.splice(r,1),o.eventPump.dispose())}}},{key:"clear",value:function(){this.eventMaps.slice(0).forEach(function(e){return e.eventPump.dispose()}),this.eventMaps=[]}},{key:"dispose",value:function(){this.stop(),this.clear()}},{key:"root",set:function(e){this._root=e},get:function(){return this._root}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(20)),i=n(1);function a(){var e=arguments,t=e[e.length-1],n=this.event_pump;n.listeners.forEach(function(r){!function(e,t,n,r,i){for(var a in n){var u=n[a];if(o.match(a,r.origin,t,e))for(var s in u){var c=u[s];s==r.name&&(r.listener=t,c.apply(t,i))}}}(n.deliverer,r.listener,r.cloned_handlers,t,e)})}var u=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===t.on)throw new Error("Deliverer should be a event handlable object.");this.deliverer=t,this.listeners=[]}return r(e,[{key:"start",value:function(){this.deliverer.on("(all)",a,{event_pump:this})}},{key:"stop",value:function(){this.deliverer.off("(all)",a)}},{key:"on",value:function(e,t){var n=Object.assign({},t);Object.keys(n).forEach(function(t){if(0==t.indexOf("?")){var r=n[t],o=t.substr(1),a=e.get(o);delete n[t],a?n[a]=r:(0,i.warn)("EventPump#on","variable #{selector} is not evaluated on listener")}}),this.listeners.push({listener:e,handlers:t,cloned_handlers:n})}},{key:"off",value:function(e,t){for(var n=0;n<this.listeners.length;n++){var r=this.listeners[n];r.listener!==e||t&&r.handlers!==t||this.listeners.splice(n,1)}}},{key:"clear",value:function(){this.listeners=[]}},{key:"dispose",value:function(){this.stop(),this.clear()}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=(i(n(0)),i(n(8)),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2)));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u={NORMAL:0,DRAGGABLE:1,DRAGGING:2},s=0,c=1,l=2,f={},h=0;var p=function(){function e(t,n){a(this,e),this._type=n.type,this._ctrlKey=n.ctrlKey,this._altKey=n.altKey,this._shiftKey=n.shiftKey,this._metaKey=n.metaKey;var r=function(e,t){if(t.touches){var n=t.touches[0];if(!n)return f;var r=t.target.getBoundingClientRect();return f={x:t.offsetX||n.clientX-(r.x||r.left),y:t.offsetY||n.clientY+(r.y||r.top)}}return{x:t.offsetX,y:t.offsetY}}(0,n);if(this._offsetX=r.x,this._offsetY=r.y,"wheel"==n.type)this.deltaX=n.deltaX,this.deltaY=n.deltaY,this.deltaZ=n.deltaZ;else if("drop"==n.type)this.dataTransfer=n.dataTransfer;else if(n.type.match(/^touch/)&&(this._scale=n.scale,this._touches=n.touches,this._changedTouches=n.changedTouches,void 0==this._scale)){var o=function(e){var t,n,r=0,o=0,i=0;if(1===e.touches.length)return i;Array.from(e.touches).forEach(function(e){t=void 0!=t?Math.min(e.screenX,t):e.screenX,r=Math.max(e.screenX,r),n=void 0!=n?Math.min(e.screenY,n):e.screenY,o=Math.max(e.screenY,o)});var a=r-t||0,u=o-n||0;return i=Math.sqrt(Math.pow(a,2)+Math.pow(u,2))||0}(n);h>0&&(this._scale=o/h),h=o}}return r(e,[{key:"stopPropagation",value:function(){this._stop_=!0}},{key:"isPropagationStopped",value:function(){return this._stop_}},{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"offsetX",get:function(){return this._offsetX}},{key:"offsetY",get:function(){return this._offsetY}},{key:"altKey",get:function(){return this._altKey}},{key:"ctrlKey",get:function(){return this._ctrlKey}},{key:"shiftKey",get:function(){return this._shiftKey}},{key:"metaKey",get:function(){return this._metaKey}},{key:"touches",get:function(){return this._touches}},{key:"changedTouches",get:function(){return this._changedTouches}},{key:"scale",get:function(){return this._scale}}]),e}();function d(e,t){return e.capture(t.offsetX,t.offsetY)}function y(e,t,n){if(e){n.type=t;var r="on"+t;e[r]&&e[r](n),n.isPropagationStopped()||e.trigger(t,n)}}var v=function(){function e(t,n){var r=this;a(this,e),this.container=t,this.html_element=n,this.status=u.NORMAL,this.last_target=null,this.gesture_handlers=o.GESTURES.map(function(e){return r.gestureHandlerBuilder(e)}),this.keyevent_handlers=o.KEYEVENTS.map(function(e){return r.keyeventHandlerBuilder(e)}),o.GESTURES.forEach(function(e,t){return n.addEventListener(e,r.gesture_handlers[t])}),o.KEYEVENTS.forEach(function(e,t){return n.addEventListener(e,r.keyevent_handlers[t])}),n.ondragover=this.gestureHandlerBuilder("dragover"),n.ondrop=this.gestureHandlerBuilder("drop"),n.tabIndex=1}return r(e,[{key:"dispose",value:function(){var e=this;o.GESTURES.forEach(function(t,n){return e.html_element.removeEventListener(t,e.gesture_handlers[n])}),o.KEYEVENTS.forEach(function(t,n){return e.html_element.removeEventListener(t,e.keyevent_handlers[n])}),delete this.gesture_handlers,delete this.keyevent_handlers,delete this.last_target}},{key:"gestureHandlerBuilder",value:function(e){var t=this["on"+e].bind(this),n=this.html_element;return function(e){return!t(new p(n,e))&&e.preventDefault(),!1}}},{key:"keyeventHandlerBuilder",value:function(e){return this["on"+e].bind(this)}},{key:"ondragover",value:function(e){return y(d(this.container,e),e.type,e),!1}},{key:"ondrop",value:function(e){return y(d(this.container,e),e.type,e),!1}},{key:"onclick",value:function(e){return this.html_element.focus(),y(d(this.container,e),e.type,e),this.last_target=null,!1}},{key:"ondblclick",value:function(e){return y(d(this.container,e),e.type,e),this.last_target=null,!1}},{key:"onkeydown",value:function(e){return this.container.trigger(e.type,e),!1}},{key:"onkeyup",value:function(e){return this.container.trigger(e.type,e),!1}},{key:"onmousemove",value:function(e){switch(this.status){case u.DRAGGABLE:var t=e.offsetX-this.__dragstart_e.offsetX,n=e.offsetY-this.__dragstart_e.offsetY;if(t*t+n*n<16)break;this.status=u.DRAGGING,y(this.last_target,"dragstart",this.__dragstart_e),this.__dragmove_e=e,y(this.last_target,"dragmove",e);break;case u.DRAGGING:this.__dragmove_e=e,y(this.last_target,"dragmove",e);break;default:var r=d(this.container,e);this.last_target!=r&&(this.last_target&&y(this.last_target,"mouseleave",e),r&&y(r,"mouseenter",e)),y(r,e.type,e),this.last_target=r}return!1}},{key:"onmousedown",value:function(e){switch(this.status){case u.DRAGGING:y(this.last_target,"dragend",e),this.last_target=null,this.status=u.NORMAL;break;default:var t=d(this.container,e);this.last_target=t,this.status=u.DRAGGABLE,this.__dragstart_e=e,y(t,e.type,e)}return!1}},{key:"onmouseup",value:function(e){switch(this.status){case u.DRAGGING:y(this.last_target,"dragend",e);break;default:y(d(this.container,e),e.type,e)}return this.last_target=null,this.status=u.NORMAL,!1}},{key:"onmouseout",value:function(e){var t=d(this.container,e);switch(this.status){case u.DRAGGING:y(this.last_target,"dragend",e);break;default:if(this.last_target&&this.last_target===t)return;this.last_target&&y(this.last_target,"mouseleave",e)}return this.last_target=null,this.status=u.NORMAL,!1}},{key:"ontouchstart",value:function(e){var t=this,n=d(this.container,e);return this.last_target=n,this.status=c,this.touchPoints||(this.touchPoints=[]),this.touchPoints.push(e.changedTouches[0]),this.holdTimer=setTimeout(function(){t.status=s,y(t.last_target,"hold",e),delete t.holdTimer},500),y(n,e.type,e),!1}},{key:"ontouchmove",value:function(e){var t=this;if(!e.touches||!e.changedTouches)return y(this.last_target,"dragstart",e),y(this.last_target,"dragmove",e),!1;var n=d(this.container,e);switch(this.status){case c:Array.from(e.changedTouches).forEach(function(e){var n=t.touchPoints.find(function(t){return t.identifier===e.identifier});if(n){var r=n.clientX-e.clientX,o=n.clientY-e.clientY;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))>=16?(t.status=l,void(t.holdTimer&&(clearTimeout(t.holdTimer),delete t.holdTimer))):void 0}});break;case l:if(this.holdTimer&&(clearTimeout(this.holdTimer),delete this.holdTimer),2===e.changedTouches.length&&void 0!=e.scale&&1!==e.scale&&(e.scale<.9||e.scale>1.1))return y(this.last_target,"pinch",e),!1;y(this.last_target,"pan",e),n=this.last_target;break;default:this.last_target!=n&&(this.last_target&&y(this.last_target,"mouseleave",e),n&&y(n,"mouseenter",e)),this.last_target=n}return y(n,"touchmove",e),!1}},{key:"ontouchend",value:function(e){var t=d(this.container,e);switch(this.status){case l:t=this.last_target;break;case c:var n=performance.now(),r=n-this.touchedAt;this.holdTimer&&(clearTimeout(this.holdTimer),delete this.holdTimer,y(t,r<500?"doubletap":"tap",e),this.touchedAt=n)}y(t,"touchend",e);var o=this.touchPoints.findIndex(function(t){return t.identifier===e.changedTouches[0].identifier});return this.touchPoints.splice(o,1),this.last_target=null,this.status=s,!1}},{key:"onwheel",value:function(e){return y(d(this.container,e),e.type,e),!0}}]),e}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventMap=void 0;var r=n(29);Object.defineProperty(t,"EventMap",{enumerable:!0,get:function(){return o(r).default}});o(n(268)),o(n(269));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";var r=n(2),o=u(n(29)),i=u(n(7)),a=u(n(76));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e.hasTextProperty&&!e.textHidden){var t=e.model,n=t.text,o=void 0===n?"":n,u=t.rotation,s=void 0===u?0:u,c=t.bold,l=void 0===c?r.DEFAULT.BOLD:c,f=t.italic,h=void 0===f?r.DEFAULT.ITALIC:f,p=t.textWrap,d=void 0===p?r.DEFAULT.TEXT_WRAP:p,y=t.fontFamily,v=void 0===y?r.DEFAULT.FONT_FAMILY:y,g=t.fontColor,b=void 0===g?r.DEFAULT.FONT_COLOR:g,m=t.textAlign,_=void 0===m?r.DEFAULT.TEXT_ALIGN:m,w=t.textBaseline,x=void 0===w?r.DEFAULT.TEXT_BASELINE:w,k=t.paddingTop,O=void 0===k?0:k,P=t.paddingBottom,A=void 0===P?0:P,E=t.paddingLeft,j=void 0===E?0:E,M=t.paddingRight,S=void 0===M?0:M,T=t.fontSize,C=void 0===T?r.DEFAULT.FONT_SIZE:T,R=t.lineHeight,I=void 0===R?1.2*C:R,B=e.bounds,L=B.left,D=B.top,F=B.width,Y=B.height;e.textHidden=!0;var N=document.createElement("textarea");r.GESTURES.forEach(function(e){N.addEventListener(e,function(e){e.stopPropagation()},!0)}),r.KEYEVENTS.forEach(function(e){N.addEventListener(e,function(e){e.stopPropagation()},!0)});var U=e.transcoordS2C(L,D),z=function(e){for(var t=0,n=1,r=e;r;){t+=r.get("rotation")||0;var o=r.get("scale")||{x:1,y:1},i=o.x,a=o.y;n*=Math.max(i,a)||1,r=r.parent}return{rotation:t,scale:n}}(e),H=(s=z.rotation,z.scale),W=F-j-S,G=W,X=Y-O-A;switch(N.style.position="absolute",N.style.width=G+"px",N.style.height=X+"px",N.style.paddingLeft=Math.max(j,0)+"px",N.style.paddingRight=S+"px",N.style.paddingTop=Math.max(O,0)+"px",N.style.paddingBottom=A+"px",N.value=o,N.style.fontFamily=v,N.style.fontSize=C+"px",N.style.lineHeight=I+"px",N.style.overflow="hidden",N.style.resize="none",N.style.outline="none",N.style.border=0,N.style.backgroundColor="transparent",N.style.display="inline-block",N.style.color=b,l&&(N.style.fontWeight="bold"),h&&(N.style.fontStyle="italic"),_){case"right":case"end":N.style.textAlign="right";break;case"justify":N.style.textAlign="justify";break;case"left":case"start":N.style.textAlign="left";break;case"center":default:N.style.textAlign="center"}var V=[l,h,C+"px",v].filter(function(e){return!!e}).join(" ");Z(o);var q=e.root.target_element;q.appendChild(N),N.select();var Q,K=!1;N.onkeydown=function(e){"Escape"!=e.code&&(e.shiftKey||"Enter"!=e.code&&"NumpadEnter"!=e.code)?setTimeout(function(){Z(N.value)}):(K=Q.skipUpdate="Escape"==e.code,document.createEvent?N.dispatchEvent(Q):N.fireEvent(Q.eventType,Q))},document.createEvent?(Q=document.createEvent("HTMLEvents")).initEvent("blur",!0,!1):(Q=document.createEventObject()).eventType="blur";var J=e.root.selected;N.addEventListener("blur",function t(n){e.root.selected=J,e.textHidden=!1,N.removeEventListener("blur",t,!1),N.parentElement&&N.parentElement.removeChild(N),q.focus(),n.skipUpdate||K||e.app.commander.execute(new i.default({changes:[{component:e,before:{text:o},after:{text:N.value}}]}))},!1)}function Z(t){var n={left:0,top:0},r=I*function(e,t,n,r){var o,i=e.getContext();return i.save(),i.font=n,o=(0,a.default)(i,t,r,e.get("textWrap")).length,i.restore(),o}(e,t,V,W);switch(N.style.height=r+"px",x){case"top":case"hanging":break;case"bottom":case"alphabetic":n.top=X-r;break;case"middle":default:n.top=X/2-r/2}if(!d){var o=function(e,t,n,r){var o=t.split("\n"),i=r,a=e.getContext();return a.save(),a.font=n,o.forEach(function(e){var t=a.measureText(e).width;t>i&&(i=t)}),a.restore(),i}(e,t,V,W);switch(N.style.width=o+"px",_){case"right":case"end":n.left=W-o;break;case"left":case"start":break;case"center":case"justify":default:n.left=(W-o)/2}}N.style.marginLeft=n.left+"px",N.style.marginTop=n.top+"px";var i="translate("+U.x+"px, "+U.y+"px) scale("+H+") rotate("+s+"rad)";["-webkit-","-moz-","-ms-","-o-",""].forEach(function(e){N.style[e+"transform"]=i,N.style[e+"transform-origin"]=-n.left+"px "+-n.top+"px"})}}o.default.register("text-editor",{"(root)":{"(self)":{keydown:function(e,t){t.origin;var n=t.deliverer.selected;return!(1!==n.length||!n[0].hasTextProperty||"Enter"!=e.code&&"NumpadEnter"!=e.code||(s(n[0]),e.preventDefault(),0))}}},"model-layer":{"(descendant)":{dblclick:function(e,t){s(t.origin)}}}})},function(e,t,n){"use strict";!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(2));var r=u(n(29)),o=u(n(88)),i=(u(n(0)),u(n(8)),u(n(28)),u(n(7))),a=u(n(15));function u(e){return e&&e.__esModule?e:{default:e}}var s=0,c=2,l=3,f=4,h=(0,n(3).debounce)(function(e,t,n){if(n)e.focused=null;else{var r=[];t[0].parent.isGroup()?e.focused=t[0].parent:(t.forEach(function(e){e.path.forEach(function(t){r.push(e.transcoordS2T(t.x,t.y))})}),e.focused=e.capturePath(r,t))}},300);r.default.register("move-handler",{"model-layer":{"(descendant)":{dragstart:function(e,t){var n=t.origin,r=t.deliverer;if(!n.stuck){var a=r.selected,u=r.selected.filter(function(e){return!e.stuck});if(a.length!==u.length&&(a=r.selected=u),0!=a.length){var c=a[0].transcoordC2S(e.offsetX,e.offsetY);c=a[0].transcoordS2P(c.x,c.y),this.last_pos=c,this.direction=s,r.focused=a[0].parent,e.altKey?(r.selected=a.map(function(e){var t=(0,o.default)(e);return e.parent.addComponent(t),t}),this.duplicates=r.selected.map(function(e){return{component:e}})):this.changes=i.default.before(a)}}},dragmove:function(e,t){var n=t.origin,r=t.deliverer;if(!n.stuck){var o=r.selected;if(0!=o.length){var i=o[0].transcoordC2S(e.offsetX,e.offsetY),a=i.x,u=i.y,p=o[0].transcoordS2P(a,u);e.shiftKey?this.direction==c&&(this.direction=s):this.direction=c;var d=p.x-this.last_pos.x,y=p.y-this.last_pos.y;if(this.direction==s){if(d*d+y*y<25)return;Math.abs(d)>Math.abs(y)?this.direction=l:this.direction=f}this.direction==l?y=0:this.direction==f&&(d=0),o.forEach(function(e){e.move({x:d,y:y})}),this.last_pos=p,h(r,o)}}},dragend:function(e,t){var n=t.origin,r=t.deliverer;if(!n.stuck){var o=r.selected;if(0!=o.length){var u=n.parent,s=r.focused||t.deliverer;if(this.changes)if(s&&s!==u){var c=this.changes.map(function(e){var t=e.component;return e.before,{component:t,to_container:s}});r.app.commander.execute(new a.default({changes:c}))}else i.default.after(this.changes,r.app.commander);else if(this.duplicates){this.duplicates=this.duplicates.map(function(e){return e.to_container=s,e});var l=new a.default({changes:this.duplicates});r.app.commander.execute(l)}o.forEach(function(e){e.parent&&e.parent.calculateBounds&&e.parent.calculateBounds()}),this.last_pos=null,this.changes=null,h(r,o,!0)}}}}},"(root)":{"(self)":{keydown:function(e,t){var n=t.origin,r=t.deliverer,o={},a=e.shiftKey?n.rootModel.MPP:1;switch(e.which){case 37:o.x=-a,o.y=0;break;case 38:o.x=0,o.y=-a;break;case 39:o.x=a,o.y=0;break;case 40:o.x=0,o.y=a;break;default:return}var u=r.selected;i.default.around(r.app.commander,function(){u.forEach(function(e){!e.stuck&&e.move(o)})})}}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(n(27)),a=n(41),u=(r=a)&&r.__esModule?r:{default:r},s=l(n(2)),c=n(38);function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var f=Math.PI/12,h=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._mode=t,this.screen=u.default.screen(),this._baseUrl="undefined"!=typeof window?window.location.origin:null,this._refProvider=n,this.isEditMode&&(this._rotateStep=f,this._rotateStepForced=!1)}return o(e,[{key:"dispose",value:function(){}},{key:"_calcScreen",value:function(){var e={width:screen.width,height:screen.height};this._PPI=function(e,t,n,r){e>0||(e=1),t>0||(t=1),r||(r="d");var o=("d"==r?Math.sqrt(e*e+t*t):"w"==r?e:t)/n;return o>0?Math.round(o):0}(e.width,e.height,this.screen),this._PPM=this._PPI/25.4}},{key:"url",value:function(e){return e.replace("$base_url",this.baseUrl)}},{key:"refProvider",get:function(){return this._refProvider}},{key:"commander",set:function(e){this._commander=e},get:function(){return this._commander}},{key:"screen",get:function(){return this._screen},set:function(e){this._screen=e,this._calcScreen()}},{key:"DPPX",get:function(){return s.DPPX}},{key:"PPI",get:function(){return this._PPI}},{key:"PPM",get:function(){return this._PPM}},{key:"mode",get:function(){return this._mode},set:function(e){var t=this._mode;t!==e&&(this._mode=e,this.trigger("mode",e,t))}},{key:"isViewMode",get:function(){return this._mode==s.MODE_VIEW}},{key:"isEditMode",get:function(){return this._mode==s.MODE_EDIT}},{key:"baseUrl",get:function(){return this._baseUrl},set:function(e){this._baseUrl=e,void 0!=e&&(c.License.baseUrl=e.replace(/^(?:http(s?)\:\/\/)?/,"").replace("/rest",""))}},{key:"rotateStep",get:function(){return this._rotateStep},set:function(e){this._rotateStep=Number(e)||f}},{key:"rotateStepForced",get:function(){return this._rotateStepForced},set:function(e){this._rotateStepForced=!!e}}]),e}();t.default=h,i.mixin(h.prototype,i.event.withEvent)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(272);Object.defineProperty(t,"align",{enumerable:!0,get:function(){return g(r).default}});var o=n(273);Object.defineProperty(t,"distribute",{enumerable:!0,get:function(){return g(o).default}});var i=n(274);Object.defineProperty(t,"zorder",{enumerable:!0,get:function(){return g(i).default}});var a=n(39);Object.defineProperty(t,"add",{enumerable:!0,get:function(){return g(a).default}});var u=n(275);Object.defineProperty(t,"duplicate",{enumerable:!0,get:function(){return g(u).default}});var s=n(40);Object.defineProperty(t,"remove",{enumerable:!0,get:function(){return g(s).default}});var c=n(276);Object.defineProperty(t,"on",{enumerable:!0,get:function(){return c.on}}),Object.defineProperty(t,"once",{enumerable:!0,get:function(){return c.once}}),Object.defineProperty(t,"off",{enumerable:!0,get:function(){return c.off}});var l=n(277);Object.defineProperty(t,"fullscreen",{enumerable:!0,get:function(){return g(l).default}});var f=n(278);Object.defineProperty(t,"cut",{enumerable:!0,get:function(){return f.cut}}),Object.defineProperty(t,"copy",{enumerable:!0,get:function(){return f.copy}}),Object.defineProperty(t,"paste",{enumerable:!0,get:function(){return f.paste}});var h=n(279);Object.defineProperty(t,"toDataURL",{enumerable:!0,get:function(){return h.toDataURL}}),Object.defineProperty(t,"toBlob",{enumerable:!0,get:function(){return h.toBlob}});var p=n(281);Object.defineProperty(t,"group",{enumerable:!0,get:function(){return p.group}}),Object.defineProperty(t,"ungroup",{enumerable:!0,get:function(){return p.ungroup}});var d=n(282);Object.defineProperty(t,"symmetryX",{enumerable:!0,get:function(){return d.symmetryX}}),Object.defineProperty(t,"symmetryY",{enumerable:!0,get:function(){return d.symmetryY}});var y=n(283);Object.defineProperty(t,"change",{enumerable:!0,get:function(){return y.change}}),Object.defineProperty(t,"undoableChange",{enumerable:!0,get:function(){return y.undoableChange}}),Object.defineProperty(t,"undoableChangeBefore",{enumerable:!0,get:function(){return y.undoableChangeBefore}}),Object.defineProperty(t,"undoableChangeAfter",{enumerable:!0,get:function(){return y.undoableChangeAfter}}),Object.defineProperty(t,"undoableChangeReset",{enumerable:!0,get:function(){return y.undoableChangeReset}});var v=n(284);function g(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"getIds",{enumerable:!0,get:function(){return v.getIds}}),Object.defineProperty(t,"getVariables",{enumerable:!0,get:function(){return v.getVariables}}),Object.defineProperty(t,"setVariables",{enumerable:!0,get:function(){return v.setVariables}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(-1==h.indexOf(e))return;var t=this.selected.filter(function(e){return!e.stuck});if(t.length<=1)return;var n=this.app.commander;i.default.around(n,function(){!function(e,t){for(var n=JSON.parse(JSON.stringify(t[0].bounds)),r=n.left+n.width,o=n.top+n.height,i=0;i<t.length;i++){var h=t[i].bounds;n.left=h.left>n.left?n.left:h.left,n.top=h.top>n.top?n.top:h.top,r=h.left+h.width>r?h.left+h.width:r,o=h.top+h.height>o?h.top+h.height:o}switch(n.width=r-n.left,n.height=o-n.top,e){case a:for(var p=0;p<t.length;p++){var d=t[p].bounds;t[p].bounds={left:n.left,top:d.top,width:d.width,height:d.height}}break;case s:for(var y=0;y<t.length;y++){var v=t[y].bounds;t[y].bounds={left:n.left+n.width/2-v.width/2,top:v.top,width:v.width,height:v.height}}break;case u:for(var g=0;g<t.length;g++){var b=t[g].bounds;t[g].bounds={left:r-b.width,top:b.top,width:b.width,height:b.height}}break;case c:for(var m=0;m<t.length;m++){var _=t[m].bounds;t[m].bounds={left:_.left,top:n.top,width:_.width,height:_.height}}break;case f:for(var w=0;w<t.length;w++){var x=t[w].bounds;t[w].bounds={left:x.left,top:n.top+n.height/2-x.height/2,width:x.width,height:x.height}}break;case l:for(var k=0;k<t.length;k++){var O=t[k].bounds;t[k].bounds={left:O.left,top:o-O.height,width:O.width,height:O.height}}break;default:;}}(e,t)})};var r,o=n(7),i=(r=o)&&r.__esModule?r:{default:r};var a="left",u="right",s="center",c="top",l="bottom",f="middle",h=[a,u,s,c,f,l]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(-1==u.indexOf(e))return;var t=this.selected;if(t.length<=1)return;var n=this.app.commander;i.default.around(n,function(){!function(e,t){var n=t.filter(function(e){return!e.stuck}).slice(0);n.sort(function(t,n){var r=t.center,o=n.center;return e===a?r.y-o.y:r.x-o.x});for(var r=n.reduce(function(t,n){return t+(e===a?n.bounds.height:n.bounds.width)},0),o=n[0].bounds,i=n[n.length-1].bounds,u=((e===a?i.top+i.height-o.top:i.left+i.width-o.left)-r)/(n.length-1),s=e===a?o.top+o.height:o.left+o.width,c=1;c<n.length-1;c++){var l=n[c],f=l.bounds;s+=u,e===a?(f.top=s,s+=f.height):(f.left=s,s+=f.width),l.bounds=f}}(e,t)})};var r,o=n(7),i=(r=o)&&r.__esModule?r:{default:r};var a="VERTICAL",u=[a,"HORIZONTAL"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this.selected.filter(function(e){return!e.stuck});if(0==t.length||t[0].isRootModel())return;if(t.length>1&&("forward"==e||"backward"==e))return;var n,r=t[0].parent;if("forward"==e){var o=r.indexOf(t[0]);n=[{component:t[0],from_container:r,to_container:r,from_index:o,to_index:o+1}]}else if("backward"==e){var a=r.indexOf(t[0]);n=[{component:t[0],from_container:r,to_container:r,from_index:a,to_index:a-1}]}else n=t.filter(function(e){return e.parent===r}).sort(function(t,n){var o=r.indexOf(t)<r.indexOf(n);return"front"==e?o:!o}).map(function(t,n){r.indexOf(t);return{component:t,to_container:r,to_index:"front"==e?r.components.length-n-1:n}});var u=new i.default({changes:n});this.app.commander.execute(u)};var r,o=n(15),i=(r=o)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=[];if(this.selected=this.selected.filter(function(e){return!e.isRootModel()}).map(function(t){var n=o.duplicate(t);return n.move({x:20,y:20}),e.push({component:n,to_container:t.parent}),n}),0==e.length)return;var t=new a.default({changes:e});this.app.commander.execute(t)};var r,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(17)),i=n(15),a=(r=i)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=function(e,t,n){switch(e){case"execute":case"redo":case"undo":case"command-reset":this.app.commander.on(e,t,n);break;case"selected":this.on(e,t,n);break;case"mode":this.app.on(e,t,n);break;default:this.on(e,t,n)}},t.once=function(e,t,n){switch(e){case"execute":case"redo":case"undo":case"command-reset":this.app.commander.once(e,t,n);break;case"selected":this.once(e,t,n);break;case"mode":this.app.once(e,t,n);break;default:this.once(e,t,n)}},t.off=function(e,t,n){switch(e){case"execute":case"redo":case"undo":case"command-reset":this.app.commander.off(e,t,n);break;case"selected":this.off(e,t,n);break;case"mode":this.app.off(e,t,n);break;default:this.off(e,t,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this.target_element,n=e||"ratio",r=this;function o(e){r.fit(n),document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement||["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","MSFullscreenChange"].forEach(function(e){return document.removeEventListener(e,o)})}["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","MSFullscreenChange"].forEach(function(e){return document.addEventListener(e,o)}),t.requestFullScreen?t.requestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copy=s,t.cut=function(){u=0;var e=s.call(this);return r.default.call(this),e},t.paste=function(e){if(!e)return;try{JSON.parse(e);u++,o.default.call(this,JSON.parse(e),{x:15*u,y:15*u})}catch(t){(0,i.error)(t,e)}};var r=a(n(40)),o=a(n(39)),i=n(1);function a(e){return e&&e.__esModule?e:{default:e}}var u=0;function s(){var e=this.selected.filter(function(e){return!e.isRootModel()}).map(function(e){return e.hierarchy});if(0!=e.length)return u=0,JSON.stringify(e,null,2)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toDataURL=function(e,t,n,u){var s=this.model_layer,c=s._overlay;return new Promise(function(l,f){if(s){var h=s.get("width"),p=s.get("height");n=n||h,u=u||p;var d=s.get("translate"),y=s.get("scale"),v=Math.min(n/h,u/p);n=h*v,u=p*v,s.set("translate",{x:0,y:0}),s.set("scale",{x:v/o.DPPX,y:v/o.DPPX});var g=r.default.createCanvas(n,u),b=g.getContext("2d");if(s.draw(b),s.set("translate",d),s.set("scale",y),!c)return l(g.toDataURL(e,t)),void(g=null);i.default.toPng(c,{sx:v,sy:v,width:n,height:u}).then(function(r){var o=new Image;o.onload=function(){b.drawImage(o,0,0,n,u),l(g.toDataURL(e,t)),g=null},o.src=r},function(n){(0,a.error)(n),l(g.toDataURL(e,t)),g=null})}else f("No target model")})};var r=u(n(0)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2)),i=u(n(280)),a=n(1);function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(){return{escape:function(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:t,mimeType:function(e){var n=t(e).toLowerCase();return(r="application/font-woff",{woff:r,woff2:r,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[n]||"";var r},dataAsUrl:function(e,t){return"data:"+t+";base64,"+e},isDataUrl:function(e){return-1!==e.search(/^(data:)/)},canvasToBlob:function(e){return e.toBlob?new Promise(function(t){e.toBlob(t)}):function(e){return new Promise(function(t){for(var n=window.atob(e.toDataURL().split(",")[1]),r=n.length,o=new Uint8Array(r),i=0;i<r;i++)o[i]=n.charCodeAt(i);t(new Blob([o],{type:"image/png"}))})}(e)},resolveUrl:function(e,t){var n=document.implementation.createHTMLDocument(),r=n.createElement("base");n.head.appendChild(r);var o=n.createElement("a");return n.body.appendChild(o),r.href=t,o.href=e,o.href},getAndEncode:function(e){var t=3e4;p.impl.options.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());return new Promise(function(n){var r,o=new XMLHttpRequest;if(o.onreadystatechange=function(){if(4!==o.readyState)return;if(200!==o.status)return void(r?n(r):a("cannot fetch resource: "+e+", status: "+o.status));var t=new FileReader;t.onloadend=function(){var e=t.result.split(/,/)[1];n(e)},t.readAsDataURL(o.response)},o.ontimeout=function(){r?n(r):a("timeout of "+t+"ms occured while fetching resource: "+e)},o.responseType="blob",o.timeout=t,o.open("GET",e,!0),o.send(),p.impl.options.imagePlaceholder){var i=p.impl.options.imagePlaceholder.split(/,/);i&&i[1]&&(r=i[1])}function a(e){console.error(e),n("")}})},uid:(e=0,function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+e++}),delay:function(e){return function(t){return new Promise(function(n){setTimeout(function(){n(t)},e)})}},asArray:function(e){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t},escapeXhtml:function(e){return e.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src=e})},width:function(e){var t=n(e,"border-left-width"),r=n(e,"border-right-width");return e.scrollWidth+t+r},height:function(e){var t=n(e,"border-top-width"),r=n(e,"border-bottom-width");return e.scrollHeight+t+r}};var e;function t(e){var t=/\.([^\.\/]*?)$/g.exec(e);return t?t[1]:""}function n(e,t){var n=window.getComputedStyle(e).getPropertyValue(t);return parseFloat(n.replace("px",""))}}(),i=function(){var e=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(e,o,i){return t(e)?Promise.resolve(e).then(n).then(function(t){var n=Promise.resolve(e);return t.forEach(function(e){n=n.then(function(t){return r(t,e,o,i)})}),n}):Promise.resolve(e)},shouldProcess:t,impl:{readUrls:n,inline:r}};function t(t){return-1!==t.search(e)}function n(t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n[1]);return r.filter(function(e){return!o.isDataUrl(e)})}function r(e,t,n,r){return Promise.resolve(t).then(function(e){return n?o.resolveUrl(e,n):e}).then(r||o.getAndEncode).then(function(e){return o.dataAsUrl(e,o.mimeType(t))}).then(function(n){return e.replace(function(e){return new RegExp("(url\\(['\"]?)("+o.escape(e)+")(['\"]?\\))","g")}(t),"$1"+n+"$3")})}}(),a=function(){return{resolveAll:function(){return e(document).then(function(e){return Promise.all(e.map(function(e){return e.resolve()}))}).then(function(e){return e.join("\n")})},impl:{readAll:e}};function e(){return Promise.resolve(o.asArray(document.styleSheets)).then(function(e){var t=[];return e.forEach(function(e){try{o.asArray(e.cssRules||[]).forEach(t.push.bind(t))}catch(t){console.log("Error while reading CSS rules from "+e.href,t.toString())}}),t}).then(function(e){return e.filter(function(e){return e.type===CSSRule.FONT_FACE_RULE}).filter(function(e){return i.shouldProcess(e.style.getPropertyValue("src"))})}).then(function(t){return t.map(e)});function e(e){return{resolve:function(){var t=(e.parentStyleSheet||{}).href;return i.inlineAll(e.cssText,t)},src:function(){return e.style.getPropertyValue("src")}}}}}(),u=function(){return{inlineAll:function t(n){if(!(n instanceof Element))return Promise.resolve(n);return function(e){var t=e.style.getPropertyValue("background");return t?i.inlineAll(t).then(function(t){e.style.setProperty("background",t,e.style.getPropertyPriority("background"))}).then(function(){return e}):Promise.resolve(e)}(n).then(function(){return n instanceof HTMLImageElement?e(n).inline():Promise.all(o.asArray(n.childNodes).map(function(e){return t(e)}))})},impl:{newImage:e}};function e(e){return{inline:function(t){return o.isDataUrl(e.src)?Promise.resolve():Promise.resolve(e.src).then(t||o.getAndEncode).then(function(t){return o.dataAsUrl(t,o.mimeType(e.src))}).then(function(t){return new Promise(function(n,r){e.onload=n,e.onerror=r,e.src=t})})}}}}(),s={imagePlaceholder:void 0,cacheBust:!1};function c(e,t){return function(e){void 0===e.imagePlaceholder?p.impl.options.imagePlaceholder=s.imagePlaceholder:p.impl.options.imagePlaceholder=e.imagePlaceholder;void 0===e.cacheBust?p.impl.options.cacheBust=s.cacheBust:p.impl.options.cacheBust=e.cacheBust}(t=t||{}),Promise.resolve(e).then(function(e){return function(e,t,n){if(!n&&t&&!t(e))return Promise.resolve();return Promise.resolve(e).then(function(e){if(e instanceof HTMLCanvasElement)try{return o.makeImage(e.toDataURL())}catch(e){(0,r.warn)(e)}return e.cloneNode(!1)}).then(function(n){return function(e,t,n){var r=e.childNodes;return 0===r.length?Promise.resolve(t):function(e,t,n){var r=Promise.resolve();return t.forEach(function(t){r=r.then(function(){return f(t,n)}).then(function(t){t&&e.appendChild(t)})}),r}(t,o.asArray(r),n).then(function(){return t})}(e,n,t)}).then(function(t){return function(e,t){return t instanceof Element?Promise.resolve().then(function(){var n,r;n=window.getComputedStyle(e),r=t.style,n.cssText?r.cssText=n.cssText:function(e,t){o.asArray(e).forEach(function(n){t.setProperty(n,e.getPropertyValue(n),e.getPropertyPriority(n))})}(n,r)}).then(function(){[":before",":after"].forEach(function(n){!function(n){var r=window.getComputedStyle(e,n),i=r.getPropertyValue("content");if(""!==i&&"none"!==i){var a=o.uid();t.className=t.className+" "+a;var u=document.createElement("style");u.appendChild(function(e,t,n){var r="."+e+":"+t,i=n.cssText?function(e){var t=e.getPropertyValue("content");return e.cssText+" content: "+t+";"}(n):function(e){return o.asArray(e).map(function(t){return t+": "+e.getPropertyValue(t)+(e.getPropertyPriority(t)?" !important":"")}).join("; ")+";"}(n);return document.createTextNode(r+"{"+i+"}")}(a,n,r)),t.appendChild(u)}}(n)})}).then(function(){e instanceof HTMLTextAreaElement&&(t.innerHTML=e.value),e instanceof HTMLInputElement&&t.setAttribute("value",e.value)}).then(function(){t instanceof SVGElement&&(t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t instanceof SVGRectElement&&["width","height"].forEach(function(e){var n=t.getAttribute(e);n&&t.style.setProperty(e,n)}))}).then(function(){return t}):t}(e,t)})}(e,t.filter,!0)}).then(h).then(function(e){var n=t,r=n.bgcolor,o=n.width,i=n.height,a=n.style,u=n.sx,s=void 0===u?1:u,c=n.sy,l=void 0===c?1:c,f=e.style;r&&(f.backgroundColor=r);o&&(f.width=o+"px");i&&(f.height=i+"px");f["margin-left"]="0px",f["margin-top"]="0px",["-webkit-","-moz-","-ms-","-o-",""].forEach(function(e){f[e+"transform"]="rotate(0rad) translate(0px, 0px) scale("+s+", "+l+")"}),a&&Object.keys(a).forEach(function(e){f[e]=a[e]});return e}).then(function(n){return function(e,t,n){return Promise.resolve(e).then(function(e){return e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(e)}).then(o.escapeXhtml).then(function(e){return'<foreignObject x="0" y="0" width="100%" height="100%">'+e+"</foreignObject>"}).then(function(e){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+n+'">'+e+"</svg>"}).then(function(e){return"data:image/svg+xml;charset=utf-8,"+e})}(n,t.width||o.width(e),t.height||o.height(e))})}function l(e,t){return c(e,t).then(o.makeImage).then(o.delay(100)).then(function(n){var r=function(e){var n=document.createElement("canvas");t.width,t.height;if(n.width=t.width||o.width(e),n.height=t.height||o.height(e),t.bgcolor){var r=n.getContext("2d");r.fillStyle=t.bgcolor,r.fillRect(0,0,n.width,n.height)}return n}(e);return r.getContext("2d").drawImage(n,0,0),r})}function f(e,t,n){if(!n&&t&&!t(e))return Promise.resolve();return Promise.resolve(e).then(i).then(function(n){return a(e,n,t)}).then(function(t){return u(e,t)});function i(e){if(e instanceof HTMLCanvasElement){try{return o.makeImage(e.toDataURL())}catch(e){(0,r.warn)(e)}}return e.cloneNode(false)}function a(e,t,n){var r=e.childNodes;return 0===r.length?Promise.resolve(t):function(e,t,n){var r=Promise.resolve();return t.forEach(function(t){r=r.then(function(){return f(t,n)}).then(function(t){t&&e.appendChild(t)})}),r}(t,o.asArray(r),n).then(function(){return t});function i(e,t,n){var r=Promise.resolve();return t.forEach(function(t){r=r.then(function(){return f(t,n)}).then(function(t){t&&e.appendChild(t)})}),r}}function u(e,t){return t instanceof Element?Promise.resolve().then(function(){!function(e,t){e.cssText?t.cssText=e.cssText:function(e,t){o.asArray(e).forEach(function(n){t.setProperty(n,e.getPropertyValue(n),e.getPropertyPriority(n))})}(e,t)}(window.getComputedStyle(e),t.style)}).then(function(){[":before",":after"].forEach(function(n){!function(n){var r=window.getComputedStyle(e,n),i=r.getPropertyValue("content");if(""===i||"none"===i)return;var a=o.uid();t.className=t.className+" "+a;var u=document.createElement("style");u.appendChild(function(e,t,n){var r="."+e+":"+t,i=n.cssText?function(e){var t=e.getPropertyValue("content");return e.cssText+" content: "+t+";"}(n):function(e){return o.asArray(e).map(function(t){return t+": "+e.getPropertyValue(t)+(e.getPropertyPriority(t)?" !important":"")}).join("; ")+";"}(n);return document.createTextNode(r+"{"+i+"}")}(a,n,r)),t.appendChild(u)}(n)})}).then(function(){e instanceof HTMLTextAreaElement&&(t.innerHTML=e.value);e instanceof HTMLInputElement&&t.setAttribute("value",e.value)}).then(function(){if(!(t instanceof SVGElement))return;if(t.setAttribute("xmlns","http://www.w3.org/2000/svg"),!(t instanceof SVGRectElement))return;["width","height"].forEach(function(e){var n=t.getAttribute(e);n&&t.style.setProperty(e,n)})}).then(function(){return t}):t;function n(){function n(e,t){if(e.cssText)t.cssText=e.cssText;else n(e,t);function n(e,t){o.asArray(e).forEach(function(n){t.setProperty(n,e.getPropertyValue(n),e.getPropertyPriority(n))})}}n(window.getComputedStyle(e),t.style)}function r(){function n(n){var r=window.getComputedStyle(e,n),i=r.getPropertyValue("content");if(i===""||i==="none")return;var a=o.uid();t.className=t.className+" "+a;var u=document.createElement("style");function s(e,t,n){var r="."+e+":"+t,i=n.cssText?a(n):u(n);return document.createTextNode(r+"{"+i+"}");function a(e){var t=e.getPropertyValue("content");return e.cssText+" content: "+t+";"}function u(e){return o.asArray(e).map(t).join("; ")+";";function t(t){return t+": "+e.getPropertyValue(t)+(e.getPropertyPriority(t)?" !important":"")}}}u.appendChild(s(a,n,r)),t.appendChild(u)}[":before",":after"].forEach(function(e){n(e)})}function i(){if(e instanceof HTMLTextAreaElement)t.innerHTML=e.value;if(e instanceof HTMLInputElement)t.setAttribute("value",e.value)}function a(){if(!(t instanceof SVGElement))return;if(t.setAttribute("xmlns","http://www.w3.org/2000/svg"),!(t instanceof SVGRectElement))return;["width","height"].forEach(function(e){var n=t.getAttribute(e);if(!n)return;t.style.setProperty(e,n)})}}}function h(e){return u.inlineAll(e).then(function(){return e})}var p={toSvg:c,toPng:function(e,t){return l(e,t||{}).then(function(e){return e.toDataURL()})},toJpeg:function(e,t){return l(e,t=t||{}).then(function(e){return e.toDataURL("image/jpeg",t.quality||1)})},toBlob:function(e,t){return l(e,t||{}).then(o.canvasToBlob)},toPixelData:function(e,t){return l(e,t||{}).then(function(t){return t.getContext("2d").getImageData(0,0,o.width(e),o.height(e)).data})},impl:{fontFaces:a,images:u,util:o,inliner:i,options:{}}};t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.group=function(){var e=this.selected.filter(function(e){return!!e.parent&&!e.stuck});if(e.length<2)return;var t=e[0].parent,n=[],a=e.sort(function(e,n){return t.components.indexOf(e)-t.components.indexOf(n)});a.forEach(function(e){n.push(e.bounds)});var u=r.default.union(n),s=e[0].transcoordP2S(u.left,u.top);s=e[0].transcoordS2T(s.x,s.y);var c=o.compile({type:"group",left:s.x,top:s.y,width:u.width,height:u.height}),l=[{component:c,to_container:t}];a.forEach(function(e){l.push({component:e,to_container:c})}),this.app.commander.execute(new i.default({changes:l})),this.selected=[c]},t.ungroup=function(){if(0===this.selected.length)return;var e=[],t=[];this.selected.forEach(function(n){if(n.isGroup()){var r=n.parent;n.components.forEach(function(n){e.push(n),t.push({component:n,to_container:r})}),t.push({component:n,to_container:null})}}),this.app.commander.execute(new i.default({changes:t})),this.selected=e};var r=a(n(0)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(17)),i=a(n(15));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.symmetryX=function(){o.default.around(this.app.commander,a,this)},t.symmetryY=function(){o.default.around(this.app.commander,u,this)};var r=i(n(0)),o=i(n(7));function i(e){return e&&e.__esModule?e:{default:e}}function a(){var e=this.selected;if(0!=e.length){var t=e.map(function(e){return e.bounds}),n=r.default.union(t),o=n.left+n.width/2;e.map(function(e){e.symmetryX(o)})}}function u(){var e=this.selected;if(0!=e.length){var t=e.map(function(e){return e.bounds}),n=r.default.union(t),o=n.top+n.height/2;e.map(function(e){e.symmetryY(o)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.change=function(e,t,n){var r=this.findAll(e,n);return r.forEach(function(e){e.set(t)}),r},t.undoableChange=function(e){i.default.around(this.app.commander,e)};var r,o=n(7),i=(r=o)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIds=function(){return Object.values(this.indexMap).map(function(e){var t=e.model,n=t.id,r=t.data;return{key:n,value:r}}).sort(function(e,t){return e.key>t.key?1:-1})},t.getVariables=function(){return Object.values(this.indexMap).filter(function(e){return"variable"===e.get("type")}).map(function(e){var t=e.model,n=t.id,r=t.data;t.dataType;return{key:n,value:r}}).sort(function(e,t){return e.key>t.key?1:-1})},t.setVariables=function(e){var t=Object.values(this.indexMap).filter(function(e){return"variable"===e.get("type")}).reduce(function(e,t){return e[t.get("id")]=t,e},{}),n=[];e.forEach(function(e){var r=t[e.key];r?(r.data=e.value,delete t[e.key]):n.push({type:"variable",id:e.key,left:0,top:0,width:100,height:20,data:e.value})}),r.default.call(this,n,{x:-100,y:0}),this.selected=Object.values(t),o.default.call(this)};var r=i(n(39)),o=i(n(40));function i(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(27)),i=u(n(286)),a=u(n(287));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=t.model_layer.get("scale"),r=t.model_layer.get("translate");if(e){var o=JSON.parse(e);o.scale=n,o.translate=r,t.rebuildContentModel(o)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.timecapsule=new i.default(20);var n=this;this.snapshot_taker=new a.default({get state(){var e=n.container.model_layer.hierarchy;return JSON.stringify(e)}},this.timecapsule),this.snapshot_taker.take(!0)}return r(e,[{key:"dispose",value:function(){this.reset(),this.timecapsule&&this.timecapsule.dispose(),this.snapshot_taker&&this.snapshot_taker.dispose(),delete this.container,delete this.timecapsule,delete this.snapshot_taker}},{key:"execute",value:function(e,t){!1!==t&&e&&e.execute(),this.snapshot_taker.touch(),this.trigger("execute",e,!0,!1)}},{key:"undo",value:function(){this.timecapsule.backwardable&&(s(this.timecapsule.backward(),this.container),this.trigger("undo",this.undoable(),this.redoable()))}},{key:"redo",value:function(){this.timecapsule.forwardable&&(s(this.timecapsule.forward(),this.container),this.trigger("redo",this.undoable(),this.redoable()))}},{key:"undoable",value:function(){return this.timecapsule.backwardable}},{key:"redoable",value:function(){return this.timecapsule.forwardable}},{key:"reset",value:function(){this.timecapsule&&this.timecapsule.reset(),this.trigger("command-reset")}}]),e}();t.default=c,o.mixin(c.prototype,o.event.withEvent)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1);var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(t=Number(t))||t<=0?((0,o.error)("TimeCapsule maxsize should be greater than 0.",t),this.maxsize=10):this.maxsize=t,this.reset(),n&&this.snapshot(n)}return r(e,[{key:"dispose",value:function(){this.reset()}},{key:"snapshot",value:function(e){this.q.splice(this.pos+1,this.q.length-this.pos+1,e),this.q.length>this.maxsize&&this.q.splice(0,this.q.length-this.maxsize),this.pos=this.q.length-1}},{key:"forward",value:function(){if(this.snapshot_taker&&this.snapshot_taker.take(),this.forwardable)return this.q[++this.pos];(0,o.warn)("Not forwardable.")}},{key:"backward",value:function(){if(this.snapshot_taker&&this.snapshot_taker.take(),this.backwardable)return this.q[--this.pos];(0,o.warn)("Not backwardable.")}},{key:"reset",value:function(){this.q=[],this.pos=-1}},{key:"current",get:function(){if(-1!==this.pos)return this.q[this.pos];(0,o.warn)("Non state has been recorded.")}},{key:"length",get:function(){return this.q.length}},{key:"forwardable",get:function(){return this.pos<this.q.length-1}},{key:"backwardable",get:function(){return this.pos>0}},{key:"snapshot_taker",get:function(){return this._snapshot_taker},set:function(e){this._snapshot_taker=e}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=(0,n(3).debounce)(function(e){e.brake||e.take()},1e3,{leading:!0,trailing:!1});function i(e){!e.brake&&e.dirty&&o(e)}var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.brake=!1,this.dirty=!1,this.state_holder=t,this.timecapsule=n,this.timecapsule.snapshot_taker=this}return r(e,[{key:"dispose",value:function(){delete this.state_holder,delete this.timecapsule}},{key:"touch",value:function(){this.dirty=!0,i(this)}},{key:"take",value:function(e){(this.dirty||e)&&(this.timecapsule.snapshot(this.state_holder.state),this.dirty=!1)}},{key:"brake",get:function(){return this._brake},set:function(e){this._brake=!!e,i(this)}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=n(70),u=(r=a)&&r.__esModule?r:{default:r};var s=new WeakSet,c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.counters={},this.references={},this.creator=t,this.disposer=n,s.add(this)}return o(e,null,[{key:"residents",get:function(){return s}}]),o(e,[{key:"dispose",value:function(){if(this.disposer)for(var e in this.references)this.disposer.call(null,e,this.references[e]);delete this.references,delete this.counters}},{key:"add",value:function(e,t){var n=this;return new Promise(function(r,o){var i=n.references[e];if(i)i===t?o(Error("Reference ID and target duplicate")):t?o(Error("Reference ID duplicate")):r(i);else{var a=function(t){t=(0,u.default)(t,function(){var e=this;this.release=function(){return n.release(e)}}),n.references[e]=t,n.counters[e]=1,r(t)};if(t)a(t);else{if(!n.creator)return void o(Error("Reference id("+e+") is not allowed. Reference creator should be defined."));n.creator.call(null,e,function(e){a(e)},function(e){o(e)})}}})}},{key:"get",value:function(e,t){var n=this;return new Promise(function(r,o){var i=n.references[e];i?n.counters.hasOwnProperty(e)?(n.counters[e]++,r(i)):o(Error("No Reference Count")):t?n.add(e).then(function(e){r(e)},function(e){o(e)}):o(Error("No References for "+e))})}},{key:"_id",value:function(e){for(var t in this.references){if(this.references[t]===e)return t}return-1}},{key:"release",value:function(e){var t=this._id(e),n=this.references[t];n?(this.counters[t]--,0==this.counters[t]&&(this.disposer&&this.disposer.call(null,t,n),delete this.references[t],delete this.counters[t],(0,i.debug)("RELEASED",t))):(0,i.error)("No Referenced ID")}},{key:"ids",get:function(){return Object.keys(this.references)}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o={},i={},a=[];function u(e){var t="SCRIPT"==e.target.tagName?o:i,n=e.target.src||e.target.href;t[n]=!0,a.forEach(function(e,r){var u=e.resolve,s=e.scripts,l=e.styles;if(t==o){var f=s.indexOf(n);f>-1&&f<s.length-1&&c(s[f+1])}for(var h=0;h<s.length;h++)if(!o[s[h]])return;if(l)for(var p=0;p<l.length;p++)if(!i[l[p]])return;u(),a[r]=null}),a=a.filter(function(e){return e})}function s(e){var t=e.target.src,n="SCRIPT"==e.target.tagName?o:i;a.forEach(function(r,i){var u=r.reject,s=r.scripts,c=r.styles,l=!1;if(n===o){for(var f=0;f<s.length;f++)if(s[f]==t){l=!0;break}}else if(c)for(var h=0;h<c.length;h++)if(c[h]==t){l=!0;break}l&&(u(e),a[i]=null)}),a=a.filter(function(e){return e}),delete n[t],document.head.removeChild(e.target)}function c(e){o[e]=!1;var t=document.createElement("script");t.onload=u,t.onerror=s,t.type="text/javascript",t.src=e,document.head.appendChild(t)}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"load",value:function(e,t){return"string"==typeof e&&(e=[e]),"string"==typeof t&&(t=[t]),new Promise(function(n,r){if((!e||e instanceof Array)&&(!t||t instanceof Array)){var l,f=!0;if(t&&t.forEach(function(e){i.hasOwnProperty(e)||function(e){i[e]=!1;var t=document.createElement("link");t.onload=u,t.onerror=s,t.type="text/css",t.rel="stylesheet",t.media="screen,print",t.href=e,document.head.appendChild(t)}(e),i[e]||(f=!1)}),e&&e.length>0&&e.forEach(function(e){o.hasOwnProperty(e)?o[e]||(f=!1):l=l||e}),l)c(l);else if(f)return void n();a.push({resolve:n,reject:r,scripts:e,styles:t})}else r("invalid sources for load")})}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="0.0.0"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return r};var r=0,o=performance.now(),i=0;requestAnimationFrame(function e(){requestAnimationFrame(e),i++;var t=performance.now(),n=t-o;n<1e3||(r=Math.round(1e3*i/n),o=t,i=0)})}])});